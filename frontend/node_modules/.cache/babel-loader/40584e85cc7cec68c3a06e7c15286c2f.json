{"remainingRequest":"/Users/yameitu/Desktop/ICIRCLE/Smartfoodshed_VA_Flow/frontend/node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js!/Users/yameitu/Desktop/ICIRCLE/Smartfoodshed_VA_Flow/frontend/src/store/modules/viewer/vegacharter.js","dependencies":[{"path":"/Users/yameitu/Desktop/ICIRCLE/Smartfoodshed_VA_Flow/frontend/src/store/modules/viewer/vegacharter.js","mtime":1665074268342},{"path":"/Users/yameitu/Desktop/ICIRCLE/Smartfoodshed_VA_Flow/frontend/babel.config.js","mtime":1644077470344},{"path":"/Users/yameitu/Desktop/ICIRCLE/Smartfoodshed_VA_Flow/frontend/node_modules/cache-loader/dist/cjs.js","mtime":1644041617264},{"path":"/Users/yameitu/Desktop/ICIRCLE/Smartfoodshed_VA_Flow/frontend/node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js","mtime":1661441977623}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmlsdGVyLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZm9yLWVhY2guanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5zcGxpY2UuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLmxpbmsuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLmZvci1lYWNoLmpzIjsKaW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUuanMiOwppbXBvcnQgX2FzeW5jVG9HZW5lcmF0b3IgZnJvbSAiL1VzZXJzL3lhbWVpdHUvRGVza3RvcC9JQ0lSQ0xFL1NtYXJ0Zm9vZHNoZWRfVkFfRmxvdy9mcm9udGVuZC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vYXN5bmNUb0dlbmVyYXRvciI7CmltcG9ydCBfdG9Db25zdW1hYmxlQXJyYXkgZnJvbSAiL1VzZXJzL3lhbWVpdHUvRGVza3RvcC9JQ0lSQ0xFL1NtYXJ0Zm9vZHNoZWRfVkFfRmxvdy9mcm9udGVuZC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vdG9Db25zdW1hYmxlQXJyYXkiOwppbXBvcnQgeyBnZXRDb21wb25lbnRUeXBlIH0gZnJvbSAnQC91dGlscy9oZWxwJzsKaW1wb3J0IGF4aW9zIGZyb20gJ2F4aW9zJzsKCmZ1bmN0aW9uIGNyZWF0ZU5ld1ZlZ2FSZW5kZXIoaWQpIHsKICByZXR1cm4gewogICAgaWQ6ICJjYXJkLXZlZ2FjaGFydGVyLSIuY29uY2F0KGlkKSwKICAgIGlucHV0RGF0YTogbnVsbCwKICAgIC8vIHNlbGVjdGVkVmVnYVJlbmRlcjogbnVsbCwgCiAgICBzb3VyY2VMaW5rOiBbXSwKICAgIC8vCiAgICB0YXJnZXRMaW5rOiBbXSwKICAgIG1hcmdpbkxlZnQ6IG51bGwsCiAgICBtYXJnaW5Ub3A6IG51bGwsCiAgICB3aWR0aDogbnVsbCwKICAgIGhlaWdodDogbnVsbCwKICAgIGRhdGE6IHVuZGVmaW5lZAogIH07Cn0KCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lc3BhY2VkOiB0cnVlLAogIHN0YXRlOiB7CiAgICBuZXh0QXZhaWxhYmxlSW5kZXg6IDAsCiAgICBjYXJkczogW10sCiAgICBjb21wb25lbnQ6IGZ1bmN0aW9uIGNvbXBvbmVudCgpIHsKICAgICAgcmV0dXJuIGltcG9ydCgnQC9jb21wb25lbnRzL3ZpZXdlci92ZWdhY2hhcnRlcicpOwogICAgfQogIH0sCiAgbXV0YXRpb25zOiB7CiAgICBBRERfQ09NUE9ORU5UOiBmdW5jdGlvbiBBRERfQ09NUE9ORU5UKHN0YXRlKSB7CiAgICAgIHZhciBuZXh0SW5kZXggPSBzdGF0ZS5uZXh0QXZhaWxhYmxlSW5kZXg7CiAgICAgIHN0YXRlLm5leHRBdmFpbGFibGVJbmRleCArPSAxOwogICAgICBzdGF0ZS5jYXJkcy5wdXNoKGNyZWF0ZU5ld1ZlZ2FSZW5kZXIobmV4dEluZGV4KSk7CiAgICB9LAogICAgREVMRVRFX0NPTVBPTkVOVDogZnVuY3Rpb24gREVMRVRFX0NPTVBPTkVOVChzdGF0ZSwgaWQpIHsKICAgICAgZm9yICh2YXIgaSBpbiBzdGF0ZS5jYXJkcykgewogICAgICAgIGlmIChzdGF0ZS5jYXJkc1tpXS5pZCA9PSAiIi5jb25jYXQoaWQpKSB7CiAgICAgICAgICBzdGF0ZS5jYXJkcy5zcGxpY2UoaSwgMSk7CiAgICAgICAgICBicmVhazsKICAgICAgICB9CiAgICAgIH0KICAgIH0sCiAgICBVUERBVEVfUE9TOiBmdW5jdGlvbiBVUERBVEVfUE9TKHN0YXRlLCBfcmVmKSB7CiAgICAgIHZhciBpZCA9IF9yZWYuaWQsCiAgICAgICAgICBtYXJnaW5MZWZ0ID0gX3JlZi5tYXJnaW5MZWZ0LAogICAgICAgICAgbWFyZ2luVG9wID0gX3JlZi5tYXJnaW5Ub3A7CgogICAgICBmb3IgKHZhciBpIGluIHN0YXRlLmNhcmRzKSB7CiAgICAgICAgaWYgKHN0YXRlLmNhcmRzW2ldLmlkID09IGlkKSB7CiAgICAgICAgICBzdGF0ZS5jYXJkc1tpXS5tYXJnaW5Ub3AgPSBtYXJnaW5Ub3A7CiAgICAgICAgICBzdGF0ZS5jYXJkc1tpXS5tYXJnaW5MZWZ0ID0gbWFyZ2luTGVmdDsKICAgICAgICB9CiAgICAgIH0KICAgIH0sCiAgICBBRERfU09VUkNFX0xJTks6IGZ1bmN0aW9uIEFERF9TT1VSQ0VfTElOSyhzdGF0ZSwgbGlua0RhdGEpIHsKICAgICAgY29uc29sZS5sb2coJ2FkZGxpbmshISEnKTsKICAgICAgY29uc29sZS5sb2cobGlua0RhdGEpOwoKICAgICAgZm9yICh2YXIgaSBpbiBzdGF0ZS5jYXJkcykgewogICAgICAgIGlmIChzdGF0ZS5jYXJkc1tpXS5pZCA9PSBsaW5rRGF0YS5zb3VyY2UpIHsKICAgICAgICAgIHN0YXRlLmNhcmRzW2ldLnNvdXJjZUxpbmsucHVzaChsaW5rRGF0YSk7CiAgICAgICAgfQogICAgICB9CiAgICB9LAogICAgQUREX1RBUkdFVF9MSU5LOiBmdW5jdGlvbiBBRERfVEFSR0VUX0xJTksoc3RhdGUsIGxpbmtEYXRhKSB7CiAgICAgIGZvciAodmFyIGkgaW4gc3RhdGUuY2FyZHMpIHsKICAgICAgICBpZiAoc3RhdGUuY2FyZHNbaV0uaWQgPT0gbGlua0RhdGEudGFyZ2V0KSB7CiAgICAgICAgICBzdGF0ZS5jYXJkc1tpXS50YXJnZXRMaW5rLnB1c2gobGlua0RhdGEpOwogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KICAgICAgfQogICAgfSwKICAgIFVQREFURV9TT1VSQ0U6IGZ1bmN0aW9uIFVQREFURV9TT1VSQ0Uoc3RhdGUsIGxpbmtEYXRhKSB7CiAgICAgIGZvciAodmFyIGkgaW4gc3RhdGUuY2FyZHMpIHsKICAgICAgICBpZiAoc3RhdGUuY2FyZHNbaV0uaWQgPT0gbGlua0RhdGEuc291cmNlKSB7CiAgICAgICAgICBmb3IgKHZhciBqIGluIHN0YXRlLmNhcmRzW2ldLnNvdXJjZUxpbmspIHsKICAgICAgICAgICAgaWYgKHN0YXRlLmNhcmRzW2ldLnNvdXJjZUxpbmtbal0uaWQgPT0gbGlua0RhdGEuaWQpIHsKICAgICAgICAgICAgICBzdGF0ZS5jYXJkc1tpXS5zb3VyY2VMaW5rW2pdID0gbGlua0RhdGE7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KICAgIH0sCiAgICBVUERBVEVfVEFSR0VUOiBmdW5jdGlvbiBVUERBVEVfVEFSR0VUKHN0YXRlLCBsaW5rRGF0YSkgewogICAgICBmb3IgKHZhciBpIGluIHN0YXRlLmNhcmRzKSB7CiAgICAgICAgaWYgKHN0YXRlLmNhcmRzW2ldLmlkID09IGxpbmtEYXRhLnRhcmdldCkgewogICAgICAgICAgZm9yICh2YXIgaiBpbiBzdGF0ZS5jYXJkc1tpXS50YXJnZXRMaW5rKSB7CiAgICAgICAgICAgIGlmIChzdGF0ZS5jYXJkc1tpXS50YXJnZXRMaW5rW2pdLmlkID09IGxpbmtEYXRhLmlkKSB7CiAgICAgICAgICAgICAgLy8gc3RhdGUuY2FyZHNbaV0udGFyZ2V0TGlua1tqXS50YXJnZXRQb3MgPSBsaW5rRGF0YS50YXJnZXRQb3M7CiAgICAgICAgICAgICAgLy8gc3RhdGUuY2FyZHNbaV0udGFyZ2V0TGlua1tqXS5zb3VyY2VQb3MgPSBsaW5rRGF0YS5zb3VyY2VQb3M7CiAgICAgICAgICAgICAgLy8gc3RhdGUuY2FyZHNbaV0udGFyZ2V0TGlua1tqXS5kID0gbGlua0RhdGEuZDsKICAgICAgICAgICAgICBzdGF0ZS5jYXJkc1tpXS50YXJnZXRMaW5rW2pdID0gbGlua0RhdGE7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KICAgIH0sCiAgICBSRU1PVkVfU09VUkNFTElOSzogZnVuY3Rpb24gUkVNT1ZFX1NPVVJDRUxJTksoc3RhdGUsIGxpbmtEYXRhKSB7CiAgICAgIGZvciAodmFyIGkgaW4gc3RhdGUuY2FyZHMpIHsKICAgICAgICBpZiAoc3RhdGUuY2FyZHNbaV0uaWQgPT0gbGlua0RhdGEuc291cmNlKSB7CiAgICAgICAgICBmb3IgKHZhciBqIGluIHN0YXRlLmNhcmRzW2ldLnNvdXJjZUxpbmspIHsKICAgICAgICAgICAgaWYgKHN0YXRlLmNhcmRzW2ldLnNvdXJjZUxpbmtbal0uaWQgPT0gbGlua0RhdGEuaWQpIHsKICAgICAgICAgICAgICAvLyBzdGF0ZS5jYXJkc1tpXS50YXJnZXRMaW5rW2pdLnRhcmdldFBvcyA9IGxpbmtEYXRhLnRhcmdldFBvczsKICAgICAgICAgICAgICAvLyBzdGF0ZS5jYXJkc1tpXS50YXJnZXRMaW5rW2pdLnNvdXJjZVBvcyA9IGxpbmtEYXRhLnNvdXJjZVBvczsKICAgICAgICAgICAgICAvLyBzdGF0ZS5jYXJkc1tpXS50YXJnZXRMaW5rW2pdLmQgPSBsaW5rRGF0YS5kOwogICAgICAgICAgICAgIHN0YXRlLmNhcmRzW2ldLnNvdXJjZUxpbmsuc3BsaWNlKGosIDEpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CiAgICB9LAogICAgUkVNT1ZFX1RBUkdFVExJTks6IGZ1bmN0aW9uIFJFTU9WRV9UQVJHRVRMSU5LKHN0YXRlLCBsaW5rRGF0YSkgewogICAgICBmb3IgKHZhciBpIGluIHN0YXRlLmNhcmRzKSB7CiAgICAgICAgaWYgKHN0YXRlLmNhcmRzW2ldLmlkID09IGxpbmtEYXRhLnRhcmdldCkgewogICAgICAgICAgZm9yICh2YXIgaiBpbiBzdGF0ZS5jYXJkc1tpXS50YXJnZXRMaW5rKSB7CiAgICAgICAgICAgIGlmIChzdGF0ZS5jYXJkc1tpXS50YXJnZXRMaW5rW2pdLmlkID09IGxpbmtEYXRhLmlkKSB7CiAgICAgICAgICAgICAgLy8gc3RhdGUuY2FyZHNbaV0udGFyZ2V0TGlua1tqXS50YXJnZXRQb3MgPSBsaW5rRGF0YS50YXJnZXRQb3M7CiAgICAgICAgICAgICAgLy8gc3RhdGUuY2FyZHNbaV0udGFyZ2V0TGlua1tqXS5zb3VyY2VQb3MgPSBsaW5rRGF0YS5zb3VyY2VQb3M7CiAgICAgICAgICAgICAgLy8gc3RhdGUuY2FyZHNbaV0udGFyZ2V0TGlua1tqXS5kID0gbGlua0RhdGEuZDsKICAgICAgICAgICAgICBzdGF0ZS5jYXJkc1tpXS50YXJnZXRMaW5rLnNwbGljZShqLCAxKTsKICAgICAgICAgICAgICBzdGF0ZS5jYXJkc1tpXS5pbnB1dERhdGEgPSB1bmRlZmluZWQ7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KICAgIH0sCiAgICBTRVRfSU5QVVREQVRBOiBmdW5jdGlvbiBTRVRfSU5QVVREQVRBKHN0YXRlLCBfcmVmMikgewogICAgICB2YXIgbGluayA9IF9yZWYyLmxpbmssCiAgICAgICAgICBpbnB1dERhdGEgPSBfcmVmMi5pbnB1dERhdGE7CgogICAgICBmb3IgKHZhciBpIGluIHN0YXRlLmNhcmRzKSB7CiAgICAgICAgaWYgKHN0YXRlLmNhcmRzW2ldLmlkID09IGxpbmsudGFyZ2V0KSB7CiAgICAgICAgICAvLyBPYmplY3Qua2V5cyhpbnB1dERhdGEpLmZvckVhY2goCiAgICAgICAgICAvLyAgIGtleSA9PiB7c3RhdGUuY2FyZHNbaV0uaW5wdXREYXRhW2tleV0gPSBpbnB1dERhdGFba2V5XX0KICAgICAgICAgIC8vICkKICAgICAgICAgIC8vIGNvbnNvbGUubG9nKHN0YXRlLmNhcmRzW2ldLmlucHV0RGF0YSkKICAgICAgICAgIHN0YXRlLmNhcmRzW2ldLmlucHV0RGF0YSA9IGlucHV0RGF0YTsKICAgICAgICB9CiAgICAgIH0KICAgIH0gLy8gQUREX0RBVEEoc3RhdGUsIGRhdGEpewogICAgLy8gICBmb3IobGV0IGkgaW4gc3RhdGUuY2FyZHMpewogICAgLy8gICAgIGlmKHN0YXRlLmNhcmRzW2ldLmlkID09IGRhdGEuY2FyZElkKXsKICAgIC8vICAgICAgIHN0YXRlLmNhcmRzW2ldLnNlbGVjdGVkVmVnYVJlbmRlciA9IGRhdGEub250b2xvZ3k7CiAgICAvLyAgICAgfQogICAgLy8gICB9CiAgICAvLyB9LAogICAgLy8gTE9BRF9EQVRBKHN0YXRlLCB7aWQsIGRhdGF9KXsKICAgIC8vICAgZm9yKGxldCBpIGluIHN0YXRlLmNhcmRzKXsKICAgIC8vICAgICBjb25zb2xlLmxvZygiPT09PT09PT09IikKICAgIC8vICAgICBjb25zb2xlLmxvZyhkYXRhKQogICAgLy8gICAgIGNvbnNvbGUubG9nKHN0YXRlLmNhcmRzW2ldLmlkKQogICAgLy8gICAgIGNvbnNvbGUubG9nKGlkKQogICAgLy8gICAgIGNvbnNvbGUubG9nKCI9PT09PT09PT0iKQogICAgLy8gICAgIGlmKHN0YXRlLmNhcmRzW2ldLmlkID09IGlkKXsKICAgIC8vICAgICAgIHN0YXRlLmNhcmRzW2ldLmRhdGEgPSBkYXRhOwogICAgLy8gICAgIH0KICAgIC8vICAgfQogICAgLy8gfSwKCiAgfSwKICBhY3Rpb25zOiB7CiAgICB1cGRhdGVQb3M6IGZ1bmN0aW9uIHVwZGF0ZVBvcyhfcmVmMywgX3JlZjQpIHsKICAgICAgdmFyIGNvbW1pdCA9IF9yZWYzLmNvbW1pdDsKICAgICAgdmFyIGlkID0gX3JlZjQuaWQsCiAgICAgICAgICBtYXJnaW5Ub3AgPSBfcmVmNC5tYXJnaW5Ub3AsCiAgICAgICAgICBtYXJnaW5MZWZ0ID0gX3JlZjQubWFyZ2luTGVmdDsKICAgICAgY29tbWl0KCdVUERBVEVfUE9TJywgewogICAgICAgIGlkOiBpZCwKICAgICAgICBtYXJnaW5Ub3A6IG1hcmdpblRvcCwKICAgICAgICBtYXJnaW5MZWZ0OiBtYXJnaW5MZWZ0CiAgICAgIH0pOwogICAgfSwKICAgIGFkZENvbXA6IGZ1bmN0aW9uIGFkZENvbXAoX3JlZjUpIHsKICAgICAgdmFyIGNvbW1pdCA9IF9yZWY1LmNvbW1pdDsKICAgICAgY29uc29sZS5sb2coJ3Rlc3QnKTsKICAgICAgY29tbWl0KCdBRERfQ09NUE9ORU5UJyk7CiAgICB9LAogICAgZGVsZXRlQ29tcDogZnVuY3Rpb24gZGVsZXRlQ29tcChfcmVmNiwgaWQpIHsKICAgICAgdmFyIGNvbW1pdCA9IF9yZWY2LmNvbW1pdCwKICAgICAgICAgIHN0YXRlID0gX3JlZjYuc3RhdGUsCiAgICAgICAgICBkaXNwYXRjaCA9IF9yZWY2LmRpc3BhdGNoOwogICAgICB2YXIgdG9EZWxldGVkQ29tcCA9IHN0YXRlLmNhcmRzLmZpbHRlcihmdW5jdGlvbiAoY2FyZCkgewogICAgICAgIHJldHVybiBjYXJkLmlkID09IGlkOwogICAgICB9KVswXTsKCiAgICAgIHZhciB0b0RlbGV0ZVNvdXJjZUxpbmsgPSBfdG9Db25zdW1hYmxlQXJyYXkodG9EZWxldGVkQ29tcC5zb3VyY2VMaW5rKTsKCiAgICAgIHZhciB0b0RlbGV0ZVRhcmdldExpbmsgPSBfdG9Db25zdW1hYmxlQXJyYXkodG9EZWxldGVkQ29tcC50YXJnZXRMaW5rKTsKCiAgICAgIHRvRGVsZXRlU291cmNlTGluay5mb3JFYWNoKGZ1bmN0aW9uIChsaW5rKSB7CiAgICAgICAgY29uc29sZS5sb2cobGluayk7CiAgICAgICAgZGlzcGF0Y2goJ2xpbmsvZGVsZXRlQ29tcCcsIGxpbmsuaWQsIHsKICAgICAgICAgIHJvb3Q6IHRydWUKICAgICAgICB9KTsKICAgICAgfSk7CiAgICAgIHRvRGVsZXRlVGFyZ2V0TGluay5mb3JFYWNoKGZ1bmN0aW9uIChsaW5rKSB7CiAgICAgICAgZGlzcGF0Y2goJ2xpbmsvZGVsZXRlQ29tcCcsIGxpbmsuaWQsIHsKICAgICAgICAgIHJvb3Q6IHRydWUKICAgICAgICB9KTsKICAgICAgfSk7CiAgICAgIGNvbW1pdCgnREVMRVRFX0NPTVBPTkVOVCcsIGlkKTsKICAgIH0sCiAgICBhZGRMaW5rOiBmdW5jdGlvbiBhZGRMaW5rKF9yZWY3LCBkYXRhKSB7CiAgICAgIHZhciBjb21taXQgPSBfcmVmNy5jb21taXQ7CiAgICAgIGNvbnNvbGUubG9nKCd0dXlhbWVpIHRlc3QsIGFkZCBsaW5rJyk7CgogICAgICBpZiAoZGF0YS5zdGF0dXMgPT0gInNvdXJjZSIpIHsKICAgICAgICBjb21taXQoJ0FERF9TT1VSQ0VfTElOSycsIGRhdGEpOwogICAgICAgIGRpc3BhdGNoKCdvdXRwdXRIYW5kbGVyJywgbGlua0RhdGEpOwogICAgICB9IGVsc2UgewogICAgICAgIGNvbW1pdCgnQUREX1RBUkdFVF9MSU5LJywgZGF0YSk7IC8vZGlzcGF0Y2goJ2lucHV0SGFuZGxlcicsIGxpbmtEYXRhKQogICAgICB9CiAgICB9LAogICAgdXBkYXRlTGluazogZnVuY3Rpb24gdXBkYXRlTGluayhfcmVmOCwgbGlua0RhdGEpIHsKICAgICAgdmFyIGNvbW1pdCA9IF9yZWY4LmNvbW1pdDsKCiAgICAgIGlmIChsaW5rRGF0YS5zdGF0dXMgPT0gJ3NvdXJjZScpIHsKICAgICAgICBjb21taXQoJ1VQREFURV9TT1VSQ0UnLCBsaW5rRGF0YSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgY29tbWl0KCdVUERBVEVfVEFSR0VUJywgbGlua0RhdGEpOwogICAgICB9CiAgICB9LAogICAgcmVtb3ZlTGluazogZnVuY3Rpb24gcmVtb3ZlTGluayhfcmVmOSwgbGlua0RhdGEpIHsKICAgICAgdmFyIGNvbW1pdCA9IF9yZWY5LmNvbW1pdDsKCiAgICAgIGlmIChsaW5rRGF0YS5zdGF0dXMgPT0gJ3NvdXJjZScpIHsKICAgICAgICBjb21taXQoJ1JFTU9WRV9TT1VSQ0VMSU5LJywgbGlua0RhdGEpOwogICAgICB9IGVsc2UgewogICAgICAgIGNvbW1pdCgnUkVNT1ZFX1RBUkdFVExJTksnLCBsaW5rRGF0YSk7CiAgICAgIH0KICAgIH0sCiAgICBhZGRWZWdhUmVuZGVyOiBmdW5jdGlvbiBhZGRWZWdhUmVuZGVyKF9yZWYxMCwgZGF0YSkgey8vICAgZm9yKGxldCBpIGluIHN0YXRlLmNhcmRzKXsKICAgICAgLy8gICAgIGlmKHN0YXRlLmNhcmRzW2ldLmlkID09IGRhdGEuY2FyZElkICYmIHN0YXRlLmNhcmRzW2ldLnNlbGVjdGVkVGFibGUgIT09IGRhdGEpewogICAgICAvLyAgICAgICBjb21taXQoJ0FERF9EQVRBJywgZGF0YSk7CiAgICAgIC8vICAgICAgIGNvbnNvbGUubG9nKGRhdGEpOwogICAgICAvLyAgICAgICBsZXQgb250b2xvZ3lEYXRhID0gYXdhaXQgYXhpb3MucG9zdCgnaHR0cDovLzEyNy4wLjAuMTo1MDAwL2dldE9udG9sb2d5JykKICAgICAgLy8gICAgICAgY29uc29sZS5sb2cob250b2xvZ3lEYXRhLmRhdGEpOyAKICAgICAgLy8gICAgICAgY29tbWl0KCdMT0FEX0RBVEEnLCB7aWQ6IGRhdGEuY2FyZElkLCBkYXRhOiB7CiAgICAgIC8vICAgICAgICAgZGF0YTogey4uLm9udG9sb2d5RGF0YS5kYXRhfSAsIAogICAgICAvLyAgICAgICAgIG9udG9sb2d5TmFtZTogZGF0YS5vbnRvbG9neQogICAgICAvLyAgICAgICB9fSkKICAgICAgLy8gICAgICAgY29uc29sZS5sb2coJ2FkZGluZyBvbnRvbG9neURhdGEgIyMjIyMjIyMjIyMjJykKICAgICAgLy8gICAgICAgZm9yKGxldCBpIGluIHN0YXRlLmNhcmRzKXsKICAgICAgLy8gICAgICAgICBpZihzdGF0ZS5jYXJkc1tpXS5pZCA9PSBkYXRhLmNhcmRpZCl7CiAgICAgIC8vICAgICAgICAgICBmb3IobGV0IGogaW4gc3RhdGUuY2FyZHNbaV0uc291cmNlbGluayl7CiAgICAgIC8vICAgICAgICAgICAgIGRpc3BhdGNoKCdvdXRwdXRoYW5kbGVyJywgc3RhdGUuY2FyZHNbaV0uc291cmNlbGlua1tqXSkKICAgICAgLy8gICAgICAgICAgIH0KICAgICAgLy8gICAgICAgICB9CiAgICAgIC8vICAgICAgIH0KICAgICAgLy8gICAgIH0KICAgICAgLy8gICB9CgogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKCkgewogICAgICAgIHZhciBjb21taXQsIGRpc3BhdGNoLCBzdGF0ZTsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBjb21taXQgPSBfcmVmMTAuY29tbWl0LCBkaXNwYXRjaCA9IF9yZWYxMC5kaXNwYXRjaCwgc3RhdGUgPSBfcmVmMTAuc3RhdGU7CgogICAgICAgICAgICAgIGNhc2UgMToKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUpOwogICAgICB9KSkoKTsKICAgIH0sCiAgICAvLyBJbnB1dCBIYW5kbGVyIHdpbGwgYmUgdHJpZ2dlcmVkIGJ5IG90aGVyIGNvbXBvbmVudHMKICAgIC8vIFdoZW4gc291cmNlIENvbXBvbmVudAogICAgaW5wdXRIYW5kbGVyOiBmdW5jdGlvbiBpbnB1dEhhbmRsZXIoX3JlZjExLCBfcmVmMTIpIHsKICAgICAgdmFyIGNvbW1pdCA9IF9yZWYxMS5jb21taXQsCiAgICAgICAgICBzdGF0ZSA9IF9yZWYxMS5zdGF0ZTsKICAgICAgdmFyIGxpbmsgPSBfcmVmMTIubGluaywKICAgICAgICAgIGlucHV0RGF0YSA9IF9yZWYxMi5pbnB1dERhdGE7CiAgICAgIHZhciBzb3VyY2VDb21wVHlwZSA9IGdldENvbXBvbmVudFR5cGUobGluay5zb3VyY2UpOwogICAgICB2YXIgdGFyZ2V0Q29tcFR5cGUgPSBnZXRDb21wb25lbnRUeXBlKGxpbmsudGFyZ2V0KTsKICAgICAgY29uc29sZS5sb2coJ2RvY3VtZW50IEhhbmxkZSBJbnB1dCAxMjMnKTsKICAgICAgY29uc29sZS5sb2coaW5wdXREYXRhKTsKCiAgICAgIGlmIChpbnB1dERhdGEpIHsKICAgICAgICBjb21taXQoJ1NFVF9JTlBVVERBVEEnLCB7CiAgICAgICAgICBsaW5rOiBsaW5rLAogICAgICAgICAgaW5wdXREYXRhOiBpbnB1dERhdGEKICAgICAgICB9KTsKICAgICAgfQogICAgfSwKICAgIG91dHB1dEhhbmRsZXI6IGZ1bmN0aW9uIG91dHB1dEhhbmRsZXIoX3JlZjEzLCBsaW5rRGF0YSkgewogICAgICB2YXIgY29tbWl0ID0gX3JlZjEzLmNvbW1pdCwKICAgICAgICAgIHN0YXRlID0gX3JlZjEzLnN0YXRlOwogICAgICB2YXIgdGFyZ2V0Q29tcFR5cGUgPSBnZXRDb21wb25lbnRUeXBlKGxpbmtEYXRhLnRhcmdldCk7CiAgICAgIGNvbnNvbGUubG9nKCdvdXRwdXRIYW5kbGVyJyk7CiAgICAgIGNvbnNvbGUubG9nKGxpbmtEYXRhKTsKCiAgICAgIGZvciAodmFyIGkgaW4gc3RhdGUuY2FyZHMpIHsKICAgICAgICBpZiAoc3RhdGUuY2FyZHNbaV0uaWQgPT0gbGlua0RhdGEuc291cmNlKSB7CiAgICAgICAgICBkaXNwYXRjaCgiIi5jb25jYXQodGFyZ2V0Q29tcFR5cGUsICIvaW5wdXRIYW5kbGVyIiksIHsKICAgICAgICAgICAgbGluazogbGlua0RhdGEsCiAgICAgICAgICAgIGlucHV0RGF0YTogc3RhdGUuY2FyZHNbaV0uaW5wdXREYXRhCiAgICAgICAgICB9LCB7CiAgICAgICAgICAgIHJvb3Q6IHRydWUKICAgICAgICAgIH0pOwogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KICAgICAgfQogICAgfQogIH0KfTs="},{"version":3,"sources":["/Users/yameitu/Desktop/ICIRCLE/Smartfoodshed_VA_Flow/frontend/src/store/modules/viewer/vegacharter.js"],"names":["getComponentType","axios","createNewVegaRender","id","inputData","sourceLink","targetLink","marginLeft","marginTop","width","height","data","undefined","namespaced","state","nextAvailableIndex","cards","component","mutations","ADD_COMPONENT","nextIndex","push","DELETE_COMPONENT","i","splice","UPDATE_POS","ADD_SOURCE_LINK","linkData","console","log","source","ADD_TARGET_LINK","target","UPDATE_SOURCE","j","UPDATE_TARGET","REMOVE_SOURCELINK","REMOVE_TARGETLINK","SET_INPUTDATA","link","actions","updatePos","commit","addComp","deleteComp","dispatch","toDeletedComp","filter","card","toDeleteSourceLink","toDeleteTargetLink","forEach","root","addLink","status","updateLink","removeLink","addVegaRender","inputHandler","sourceCompType","targetCompType","outputHandler"],"mappings":"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","sourcesContent":["import {getComponentType} from '@/utils/help'\nimport axios from 'axios'\n\nfunction createNewVegaRender(id){\n  return {\n    id: `card-vegacharter-${id}`,\n    inputData: null, \n    // selectedVegaRender: null, \n    sourceLink: [], //\n    targetLink: [], \n    marginLeft: null, \n    marginTop: null, \n    width: null, \n    height: null,\n    data: undefined, \n  }\n}\n\nexport default {\n  namespaced: true,\n  state: {\n    nextAvailableIndex: 0,\n    cards: [],\n    component: () => import('@/components/viewer/vegacharter'), \n  }, \n  mutations: {\n    ADD_COMPONENT(state){\n      const nextIndex = state.nextAvailableIndex;\n      state.nextAvailableIndex += 1\n      state.cards.push(createNewVegaRender(nextIndex));\n    },\n    DELETE_COMPONENT(state, id){\n      for(let i in state.cards){\n        if(state.cards[i].id == `${id}`){\n          state.cards.splice(i, 1);\n          break\n        }\n      }\n    }, \n    UPDATE_POS(state, {id, marginLeft, marginTop}) {\n      for(let i in state.cards){\n        if(state.cards[i].id == id){\n          state.cards[i].marginTop = marginTop \n          state.cards[i].marginLeft = marginLeft\n        }\n      }\n    }, \n    ADD_SOURCE_LINK(state, linkData){\n      console.log('addlink!!!');\n      console.log(linkData);\n      for(let i in state.cards){\n        if(state.cards[i].id == linkData.source){\n          state.cards[i].sourceLink.push(linkData);\n        }\n      }\n    },\n    ADD_TARGET_LINK(state, linkData){\n      for(let i in state.cards){\n        if(state.cards[i].id == linkData.target){\n          state.cards[i].targetLink.push(linkData);\n          return;\n        }\n      }\n    },\n    UPDATE_SOURCE(state, linkData){\n      for(let i in state.cards){\n        if(state.cards[i].id == linkData.source){\n          for(let j in state.cards[i].sourceLink){\n            if(state.cards[i].sourceLink[j].id == linkData.id){\n              state.cards[i].sourceLink[j] = linkData\n            }\n          }\n        }\n      }\n    },\n    UPDATE_TARGET(state, linkData){\n      for(let i in state.cards){\n        if(state.cards[i].id == linkData.target){\n          for(let j in state.cards[i].targetLink){\n            if(state.cards[i].targetLink[j].id == linkData.id){\n              // state.cards[i].targetLink[j].targetPos = linkData.targetPos;\n              // state.cards[i].targetLink[j].sourcePos = linkData.sourcePos;\n              // state.cards[i].targetLink[j].d = linkData.d;\n              state.cards[i].targetLink[j] = linkData\n            }\n          }\n        }\n      }\n    },\n    REMOVE_SOURCELINK(state, linkData){\n      for(let i in state.cards){\n        if(state.cards[i].id == linkData.source){\n          for(let j in state.cards[i].sourceLink){\n            if(state.cards[i].sourceLink[j].id == linkData.id){\n              // state.cards[i].targetLink[j].targetPos = linkData.targetPos;\n              // state.cards[i].targetLink[j].sourcePos = linkData.sourcePos;\n              // state.cards[i].targetLink[j].d = linkData.d;\n              state.cards[i].sourceLink.splice(j,1);\n            }\n          }\n        }\n      }\n    },\n    REMOVE_TARGETLINK(state, linkData){\n      for(let i in state.cards){\n        if(state.cards[i].id == linkData.target){\n          for(let j in state.cards[i].targetLink){\n            if(state.cards[i].targetLink[j].id == linkData.id){\n              // state.cards[i].targetLink[j].targetPos = linkData.targetPos;\n              // state.cards[i].targetLink[j].sourcePos = linkData.sourcePos;\n              // state.cards[i].targetLink[j].d = linkData.d;\n              state.cards[i].targetLink.splice(j, 1);\n              state.cards[i].inputData = undefined;\n            }\n          }\n        }\n      }\n    }, \n    SET_INPUTDATA(state, {link, inputData}){\n      for(let i in state.cards){\n        if(state.cards[i].id == link.target){\n          // Object.keys(inputData).forEach(\n          //   key => {state.cards[i].inputData[key] = inputData[key]}\n          // )\n          // console.log(state.cards[i].inputData)\n          state.cards[i].inputData = inputData;\n        }\n      }\n    }, \n    // ADD_DATA(state, data){\n    //   for(let i in state.cards){\n    //     if(state.cards[i].id == data.cardId){\n    //       state.cards[i].selectedVegaRender = data.ontology;\n    //     }\n    //   }\n    // },\n    // LOAD_DATA(state, {id, data}){\n    //   for(let i in state.cards){\n    //     console.log(\"=========\")\n    //     console.log(data)\n    //     console.log(state.cards[i].id)\n    //     console.log(id)\n    //     console.log(\"=========\")\n    //     if(state.cards[i].id == id){\n    //       state.cards[i].data = data;\n    //     }\n    //   }\n    // },\n  }, \n  actions: {\n    updatePos({commit}, {id, marginTop, marginLeft}) {\n      commit('UPDATE_POS', {id, marginTop, marginLeft})\n    }, \n    addComp({commit}, ){\n      console.log('test')\n      commit('ADD_COMPONENT');\n    },\n    deleteComp({commit, state, dispatch}, id){\n      const toDeletedComp = state.cards.filter(card => card.id == id)[0];\n      \n      const toDeleteSourceLink = [...toDeletedComp.sourceLink];\n      const toDeleteTargetLink = [...toDeletedComp.targetLink];\n      toDeleteSourceLink.forEach(link => {\n        console.log(link)\n        dispatch('link/deleteComp', link.id, {root: true})\n      })\n      toDeleteTargetLink.forEach(link => {\n        dispatch('link/deleteComp', link.id, {root: true})\n      })\n      commit('DELETE_COMPONENT', id);\n    }, \n    addLink({commit}, data){\n      console.log('tuyamei test, add link')\n      if(data.status == \"source\"){\n        commit('ADD_SOURCE_LINK', data)\n        dispatch('outputHandler', linkData)\n      }else{\n        commit('ADD_TARGET_LINK', data)\n        //dispatch('inputHandler', linkData)\n      }\n    },\n    updateLink({commit}, linkData){\n      if(linkData.status == 'source'){\n        commit('UPDATE_SOURCE', linkData)\n      }else{\n        commit('UPDATE_TARGET', linkData)\n      }\n    },\n    removeLink({commit}, linkData){\n      if(linkData.status == 'source'){\n        commit('REMOVE_SOURCELINK', linkData)\n      }else{ \n        commit('REMOVE_TARGETLINK', linkData)\n      }\n    },\n    \n    \n    async addVegaRender({commit, dispatch, state}, data){\n    //   for(let i in state.cards){\n    //     if(state.cards[i].id == data.cardId && state.cards[i].selectedTable !== data){\n    //       commit('ADD_DATA', data);\n    //       console.log(data);\n    //       let ontologyData = await axios.post('http://127.0.0.1:5000/getOntology')\n    //       console.log(ontologyData.data); \n    //       commit('LOAD_DATA', {id: data.cardId, data: {\n    //         data: {...ontologyData.data} , \n    //         ontologyName: data.ontology\n    //       }})\n\n    //       console.log('adding ontologyData ############')\n         \n    //       for(let i in state.cards){\n    //         if(state.cards[i].id == data.cardid){\n    //           for(let j in state.cards[i].sourcelink){\n    //             dispatch('outputhandler', state.cards[i].sourcelink[j])\n    //           }\n    //         }\n    //       }\n    //     }\n    //   }\n    },\n\n    // Input Handler will be triggered by other components\n    // When source Component\n    inputHandler({commit, state, }, {link, inputData}){\n      const sourceCompType = getComponentType(link.source);\n      const targetCompType = getComponentType(link.target);\n      console.log('document Hanlde Input 123');\n      console.log(inputData);\n      if(inputData){\n        commit('SET_INPUTDATA', {link, inputData})  \n      }\n    }, \n\n    outputHandler({commit, state, }, linkData){\n      const targetCompType = getComponentType(linkData.target);\n      console.log('outputHandler');\n      console.log(linkData);\n      for(let i in state.cards){\n        if(state.cards[i].id == linkData.source){\n          dispatch(`${targetCompType}/inputHandler`, {link: linkData, inputData: state.cards[i].inputData}, {root: true})\n          return;\n        }\n      }\n    },\n\n    \n    \n  }\n}"]}]}