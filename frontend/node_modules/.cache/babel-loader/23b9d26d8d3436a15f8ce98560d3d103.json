{"remainingRequest":"/Users/qiurui/Desktop/ICICLE/new_gui_2022/Smartfoodshed_VA_Flow/frontend/node_modules/.pnpm/babel-loader@8.2.5_5ouqwanl7jnotevpn4w6qovjqm/node_modules/babel-loader/lib/index.js!/Users/qiurui/Desktop/ICICLE/new_gui_2022/Smartfoodshed_VA_Flow/frontend/node_modules/.pnpm/cache-loader@4.1.0_webpack@4.46.0/node_modules/cache-loader/dist/cjs.js??ref--1-0!/Users/qiurui/Desktop/ICICLE/new_gui_2022/Smartfoodshed_VA_Flow/frontend/node_modules/.pnpm/vue-loader@15.10.0_rm23m4wqnartkrat7nvkqiuwja/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/qiurui/Desktop/ICICLE/new_gui_2022/Smartfoodshed_VA_Flow/frontend/src/components/viewer/tabularviewer/Inner.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/qiurui/Desktop/ICICLE/new_gui_2022/Smartfoodshed_VA_Flow/frontend/src/components/viewer/tabularviewer/Inner.vue","mtime":1661231292929},{"path":"/Users/qiurui/Desktop/ICICLE/new_gui_2022/Smartfoodshed_VA_Flow/frontend/babel.config.js","mtime":1660324544800},{"path":"/Users/qiurui/Desktop/ICICLE/new_gui_2022/Smartfoodshed_VA_Flow/frontend/node_modules/.pnpm/cache-loader@4.1.0_webpack@4.46.0/node_modules/cache-loader/dist/cjs.js","mtime":1660324597580},{"path":"/Users/qiurui/Desktop/ICICLE/new_gui_2022/Smartfoodshed_VA_Flow/frontend/node_modules/.pnpm/babel-loader@8.2.5_5ouqwanl7jnotevpn4w6qovjqm/node_modules/babel-loader/lib/index.js","mtime":1660324598487},{"path":"/Users/qiurui/Desktop/ICICLE/new_gui_2022/Smartfoodshed_VA_Flow/frontend/node_modules/.pnpm/cache-loader@4.1.0_webpack@4.46.0/node_modules/cache-loader/dist/cjs.js","mtime":1660324597580},{"path":"/Users/qiurui/Desktop/ICICLE/new_gui_2022/Smartfoodshed_VA_Flow/frontend/node_modules/.pnpm/vue-loader@15.10.0_rm23m4wqnartkrat7nvkqiuwja/node_modules/vue-loader/lib/index.js","mtime":1660324597951}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:ZXhwb3J0IGRlZmF1bHQgewogIHByb3BzOiBbJ2l0ZW1Qcm9wcyddLAoKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgZGF0YVN0YXR1czogZmFsc2UsCiAgICAgIGxvYWRpbmdTdGF0dXM6IHVuZGVmaW5lZCwKICAgICAgc2VsZWN0ZWQ6IFtdLAogICAgICBzZWFyY2g6ICIiLAogICAgICBzaGVldHM6IFtdLAogICAgICBoZWFkZXJzOiBbXSwKICAgICAgZGVzc2VydHM6IFtdLAogICAgICBjdXJyZW50RGF0YUJhc2U6IFtdLAogICAgICBhbnN3ZXJCYXNlZFJldHJpZXZhbDoge30sCiAgICAgIGN1cnJlbnRTaGVldDogIiIsCiAgICAgIGZsYWc6IGZhbHNlLAogICAgICB0YWJsZUl0ZW1LZXk6ICIiCiAgICB9OwogIH0sCgogIG1ldGhvZHM6IHsKICAgIHRvZ2dsZVNoZWV0KHNoZWV0TmFtZSkgewogICAgICBpZiAodGhpcy5jdXJyZW50U2hlZXQgIT0gc2hlZXROYW1lKSB7CiAgICAgICAgdGhpcy5jdXJyZW50U2hlZXQgPSBzaGVldE5hbWU7CiAgICAgICAgdGhpcy5zaGVldERhdGFVcGRhdGUodGhpcy5jdXJyZW50U2hlZXQpOwogICAgICB9CiAgICB9LAoKICAgIHNoZWV0RGF0YVVwZGF0ZShzaGVldE5hbWUpIHsKICAgICAgY29uc3QgdmFsID0gdGhpcy5pdGVtUHJvcHMuaW5wdXREYXRhOwogICAgICBjb25zdCB7CiAgICAgICAgdGFibGVEYXRhLAogICAgICAgIHRhYmxlSW5mbwogICAgICB9ID0gdmFsWyJkYXRhIl1bc2hlZXROYW1lXTsKICAgICAgdGhpcy5oZWFkZXJzID0gW107CiAgICAgIGxldCByZWxhdGlvbl9pZF9leGlzdCA9IGZhbHNlOwogICAgICBsZXQgaWRfZXhpc3QgPSBmYWxzZTsKCiAgICAgIGlmICh0YWJsZURhdGEubGVuZ3RoID4gMCkgewogICAgICAgIHRhYmxlSW5mby5mb3JFYWNoKGluZm8gPT4gewogICAgICAgICAgdGhpcy5oZWFkZXJzLnB1c2goewogICAgICAgICAgICB0ZXh0OiBpbmZvLmxhYmVsLAogICAgICAgICAgICB2YWx1ZTogaW5mby52YWx1ZQogICAgICAgICAgfSk7CiAgICAgICAgICBpbmZvLnZhbHVlID09ICdyZWxhdGlvbl9pZCcgPyByZWxhdGlvbl9pZF9leGlzdCA9IHRydWUgOiBpbmZvLnZhbHVlID09ICdpZCcgPyBpZF9leGlzdCA9IHRydWUgOiAtMTsKICAgICAgICB9KTsKICAgICAgICB0aGlzLnRhYmxlSXRlbUtleSA9IHJlbGF0aW9uX2lkX2V4aXN0ID8gJ3JlbGF0aW9uX2lkJyA6IGlkX2V4aXN0ID8gJ2lkJyA6IHRoaXMuaGVhZGVyc1swXS52YWx1ZTsKICAgICAgICB0aGlzLmN1cnJlbnREYXRhQmFzZSA9IHRhYmxlRGF0YTsKICAgICAgICB0aGlzLmRlc3NlcnRzID0gdGFibGVEYXRhOwogICAgICB9CiAgICB9CgogIH0sCiAgd2F0Y2g6IHsKICAgICJpdGVtUHJvcHMuaW5wdXREYXRhIjogZnVuY3Rpb24gKHZhbCwgb2xkVmFsKSB7CiAgICAgIGNvbnNvbGUubG9nKCJuZXdWYWwsIG9sZFZhbCIpOwoKICAgICAgaWYgKHZhbCkgewogICAgICAgIHRoaXMubG9hZGluZ1N0YXR1cyA9IHRydWU7CiAgICAgICAgdGhpcy5kYXRhU3RhdHVzID0gdmFsLnRhYmxlTmFtZXM7CiAgICAgICAgdGhpcy5oZWFkZXJzID0gW107CiAgICAgICAgY29uc29sZS5sb2codmFsKTsKICAgICAgICBjb25zdCB0YWJsZU5hbWVzID0gdmFsWyd0YWJsZU5hbWVzJ107CiAgICAgICAgdGFibGVOYW1lcy5mb3JFYWNoKHRhYmxlbmFtZSA9PiB7CiAgICAgICAgICB0aGlzLnNoZWV0cy5wdXNoKHsKICAgICAgICAgICAgbmFtZTogdGFibGVuYW1lLAogICAgICAgICAgICBhY3RpdmU6IHRydWUKICAgICAgICAgIH0pOwogICAgICAgIH0pOwogICAgICAgIHRoaXMuY3VycmVudFNoZWV0ID0gdGFibGVOYW1lc1swXTsKICAgICAgICB0aGlzLnNoZWV0RGF0YVVwZGF0ZSh0aGlzLmN1cnJlbnRTaGVldCk7CiAgICAgICAgdGhpcy5sb2FkaW5nU3RhdHVzID0gZmFsc2U7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5sb2FkaW5nU3RhdHVzID0gZmFsc2U7CiAgICAgICAgdGhpcy5kYXRhU3RhdHVzID0gdW5kZWZpbmVkOwogICAgICAgIHRoaXMuY3VycmVudERhdGFCYXNlID0gdW5kZWZpbmVkOwogICAgICAgIHRoaXMuZGVzc2VydHMgPSB1bmRlZmluZWQ7CiAgICAgIH0KICAgIH0sCiAgICBkYXRhU3RhdHVzOiBmdW5jdGlvbiAodmFsLCBvbGRWYWwpIHsKICAgICAgaWYgKHZhbCkgewogICAgICAgIGNvbnN0IHJlc2l6ZXJCRWxlbGVtdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoIiMiICsgdGhpcy5pdGVtUHJvcHMuaWQpLnF1ZXJ5U2VsZWN0b3IoIi5yZXNpemVyLWIiKTsKICAgICAgICBjb25zdCBoZWlnaHRPZlNoZWV0ID0gMjU7CiAgICAgICAgcmVzaXplckJFbGVsZW10LnN0eWxlLmJvdHRvbSA9IC1oZWlnaHRPZlNoZWV0IC0gMTIgKyAicHgiOwogICAgICB9CiAgICB9LAoKICAgIHNlbGVjdGVkKCkgewogICAgICBjb25zb2xlLmxvZyhgdGFibGUgJHt0aGlzLml0ZW1Qcm9wcy5pZH0gc2VsZWN0ZWQgaXRlbXMgdXBkYXRlZGApOwogICAgICBjb25zb2xlLmxvZyh0aGlzLnNlbGVjdGVkKTsKICAgICAgdGhpcy4kc3RvcmUuZGlzcGF0Y2goJ2RvY3VtZW50cy91cGRhdGVTZWxlY3RlZEl0ZW1zJywgewogICAgICAgIGlkOiB0aGlzLml0ZW1Qcm9wcy5pZCwKICAgICAgICBzZWxlY3RlZDogdGhpcy5zZWxlY3RlZAogICAgICB9KTsKICAgIH0KCiAgfQp9Ow=="},{"version":3,"mappings":"AAqEA;EACAA,oBADA;;EAEAC;IACA;MACAC,iBADA;MAEAC,wBAFA;MAGAC,YAHA;MAIAC,UAJA;MAKAC,UALA;MAMAC,WANA;MAOAC,YAPA;MAQAC,mBARA;MASAC,wBATA;MAUAC,gBAVA;MAWAC,WAXA;MAYAC;IAZA;EAcA,CAjBA;;EAkBAC;IACAC;MACA;QACA;QACA;MACA;IACA,CANA;;IAOAC;MACA;MACA;QAAAC;QAAAC;MAAA;MACA;MACA;MACA;;MACA;QACAA;UACA;YACAC,gBADA;YAEAC;UAFA;UAIAC,8BACAC,wBADA,GAEAD,qBACAE,eADA,GAEA,EAJA;QAKA,CAVA;QAWA,wCACA,aADA,GAEAA,WACA,IADA,GAEA,qBAJA;QAKA;QACA;MACA;IACA;;EAjCA,CAlBA;EAqDAC;IACA;MAEAC;;MACA;QACA;QACA;QACA;QAEAA;QACA;QACAC;UACA;YACAC,eADA;YAEAC;UAFA;QAIA,CALA;QAOA;QAEA;QAEA;MACA,CAnBA,MAmBA;QACA;QACA;QACA;QACA;MACA;IACA,CA7BA;IA8BA1B;MACA;QACA;QACA;QACA2B;MACA;IACA,CApCA;;IAqCAzB;MACAqB;MACAA;MACA;QAAAK;QAAA1B;MAAA;IACA;;EAzCA;AArDA","names":["props","data","dataStatus","loadingStatus","selected","search","sheets","headers","desserts","currentDataBase","answerBasedRetrieval","currentSheet","flag","tableItemKey","methods","toggleSheet","sheetDataUpdate","tableData","tableInfo","text","value","info","relation_id_exist","id_exist","watch","console","tableNames","name","active","resizerBElelemt","id"],"sourceRoot":"src/components/viewer/tabularviewer","sources":["Inner.vue"],"sourcesContent":["<template>\n  <div class=\"card-inner\">\n    <v-card-text v-if=\"!dataStatus\" class=\"card-name\">\n      No Table Data\n    </v-card-text>\n    \n    <template v-if=\"dataStatus\">\n      <div>\n        <v-sheet\n          class=\"mx-auto sheetname\"\n          max-width=\"900\"\n          style=\"margin-top:10px\"\n        >\n          <v-slide-group\n            show-arrows\n          >\n            <v-slide-item\n              v-for=\"sheet in sheets\"\n              :key=\"sheet.name\"\n            >\n              <v-btn\n                class=\"mx-2\"\n                :input-value=\"currentSheet == sheet.name\"\n                active-class=\"purple white--text\"\n                depressed\n                rounded\n                small\n                @click=\"toggleSheet(sheet.name)\"\n              >\n                {{sheet.name}}\n              </v-btn>\n            </v-slide-item>\n          </v-slide-group>\n        </v-sheet>\n\n        <v-card-title>\n          {{ currentSheet.split(\".\")[0] }}\n          <v-spacer></v-spacer>\n          <v-text-field\n            v-model=\"search\"\n            append-icon=\"mdi-magnify\"\n            label=\"Search\"\n            single-line\n            hide-details\n          ></v-text-field>\n        </v-card-title>\n        <template>\n          <v-data-table\n            :loading=\"loadingStatus\"\n            :headers=\"headers\"\n            :items=\"desserts\"\n            :item-key=\"tableItemKey\"\n            class=\"elevation-1\"\n            :height=\"`${itemProps.height - 50 - 70}px`\"\n            :search=\"search\"\n            show-select\n            ref=\"table\"\n            :single-select=\"false\"\n            v-model=\"selected\"\n          >\n          </v-data-table>\n        </template>\n      </div>\n    </template>\n  </div>\n</template>\n\n<script>\n\nexport default {\n  props: ['itemProps'], \n  data() {\n    return {\n      dataStatus: false, \n      loadingStatus: undefined,\n      selected: [],\n      search: \"\",\n      sheets: [], \n      headers: [],\n      desserts: [],\n      currentDataBase: [],\n      answerBasedRetrieval: {},\n      currentSheet: \"\", \n      flag: false,\n      tableItemKey: \"\",\n    }\n  }, \n  methods: {\n    toggleSheet(sheetName){\n      if (this.currentSheet != sheetName) {\n        this.currentSheet = sheetName;\n        this.sheetDataUpdate(this.currentSheet);\n      }\n    },\n    sheetDataUpdate(sheetName){\n      const val = this.itemProps.inputData; \n      const {tableData, tableInfo} = val[\"data\"][sheetName];\n      this.headers = []\n      let relation_id_exist = false \n      let id_exist = false \n      if (tableData.length > 0) {\n        tableInfo.forEach(info => {\n          this.headers.push({\n            text: info.label, \n            value: info.value\n          })\n          info.value == 'relation_id' \n            ? (relation_id_exist = true) \n            : info.value == 'id' \n              ? (id_exist = true )\n              : -1\n        })\n        this.tableItemKey = relation_id_exist \n          ? 'relation_id'\n          : id_exist \n            ? 'id'\n            : this.headers[0].value\n        this.currentDataBase = tableData\n        this.desserts = tableData\n      }\n    }\n  },\n  watch: {\n    \"itemProps.inputData\": function (val, oldVal) {\n    \n      console.log(\"newVal, oldVal\");\n      if (val) {\n        this.loadingStatus = true;\n        this.dataStatus = val.tableNames;\n        this.headers = [];\n\n        console.log(val)\n        const tableNames = val['tableNames']; \n        tableNames.forEach(tablename => {\n          this.sheets.push({\n            name: tablename,\n            active: true,\n          })\n        })\n        \n        this.currentSheet = tableNames[0];\n\n        this.sheetDataUpdate(this.currentSheet);\n\n        this.loadingStatus = false;\n      } else {\n        this.loadingStatus = false;\n        this.dataStatus = undefined;\n        this.currentDataBase = undefined;\n        this.desserts = undefined;\n      }\n    },\n    dataStatus: function(val, oldVal) {\n      if (val) {\n        const resizerBElelemt = document.querySelector(\"#\" + this.itemProps.id).querySelector(\".resizer-b\"); \n        const heightOfSheet = 25;\n        resizerBElelemt.style.bottom = (-heightOfSheet - 12) + \"px\"; \n      }\n    },\n    selected() {\n      console.log(`table ${this.itemProps.id} selected items updated`) \n      console.log(this.selected)\n      this.$store.dispatch('documents/updateSelectedItems', {id: this.itemProps.id, selected: this.selected})\n    }\n  }\n}\n</script>\n\n<style scoped>\n.card-name {\n    text-align: center;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    flex-wrap: wrap;\n    height: 100%;\n  }\n\n.card-inner{\n  text-align: center;\n  align-items: center;\n  justify-content: center;\n  flex-wrap: wrap;\n  height: 100%;\n}\n</style>"]}]}