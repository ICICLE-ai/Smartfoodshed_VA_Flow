{"remainingRequest":"/Users/qiurui/Desktop/ICICLE/new_gui_2022/Smartfoodshed_VA_Flow/frontend/node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js!/Users/qiurui/Desktop/ICICLE/new_gui_2022/Smartfoodshed_VA_Flow/frontend/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/qiurui/Desktop/ICICLE/new_gui_2022/Smartfoodshed_VA_Flow/frontend/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/qiurui/Desktop/ICICLE/new_gui_2022/Smartfoodshed_VA_Flow/frontend/src/components/viewer/tabularviewer/Inner.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/qiurui/Desktop/ICICLE/new_gui_2022/Smartfoodshed_VA_Flow/frontend/src/components/viewer/tabularviewer/Inner.vue","mtime":1661231292929},{"path":"/Users/qiurui/Desktop/ICICLE/new_gui_2022/Smartfoodshed_VA_Flow/frontend/babel.config.js","mtime":1660324544800},{"path":"/Users/qiurui/Desktop/ICICLE/new_gui_2022/Smartfoodshed_VA_Flow/frontend/node_modules/cache-loader/dist/cjs.js","mtime":1660324545335},{"path":"/Users/qiurui/Desktop/ICICLE/new_gui_2022/Smartfoodshed_VA_Flow/frontend/node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js","mtime":1661232574882},{"path":"/Users/qiurui/Desktop/ICICLE/new_gui_2022/Smartfoodshed_VA_Flow/frontend/node_modules/cache-loader/dist/cjs.js","mtime":1660324545335},{"path":"/Users/qiurui/Desktop/ICICLE/new_gui_2022/Smartfoodshed_VA_Flow/frontend/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":1661232574916}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZm9yLWVhY2guanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLmZvci1lYWNoLmpzIjsKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KZXhwb3J0IGRlZmF1bHQgewogIHByb3BzOiBbJ2l0ZW1Qcm9wcyddLAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBkYXRhU3RhdHVzOiBmYWxzZSwKICAgICAgbG9hZGluZ1N0YXR1czogdW5kZWZpbmVkLAogICAgICBzZWxlY3RlZDogW10sCiAgICAgIHNlYXJjaDogIiIsCiAgICAgIHNoZWV0czogW10sCiAgICAgIGhlYWRlcnM6IFtdLAogICAgICBkZXNzZXJ0czogW10sCiAgICAgIGN1cnJlbnREYXRhQmFzZTogW10sCiAgICAgIGFuc3dlckJhc2VkUmV0cmlldmFsOiB7fSwKICAgICAgY3VycmVudFNoZWV0OiAiIiwKICAgICAgZmxhZzogZmFsc2UsCiAgICAgIHRhYmxlSXRlbUtleTogIiIKICAgIH07CiAgfSwKICBtZXRob2RzOiB7CiAgICB0b2dnbGVTaGVldDogZnVuY3Rpb24gdG9nZ2xlU2hlZXQoc2hlZXROYW1lKSB7CiAgICAgIGlmICh0aGlzLmN1cnJlbnRTaGVldCAhPSBzaGVldE5hbWUpIHsKICAgICAgICB0aGlzLmN1cnJlbnRTaGVldCA9IHNoZWV0TmFtZTsKICAgICAgICB0aGlzLnNoZWV0RGF0YVVwZGF0ZSh0aGlzLmN1cnJlbnRTaGVldCk7CiAgICAgIH0KICAgIH0sCiAgICBzaGVldERhdGFVcGRhdGU6IGZ1bmN0aW9uIHNoZWV0RGF0YVVwZGF0ZShzaGVldE5hbWUpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIHZhciB2YWwgPSB0aGlzLml0ZW1Qcm9wcy5pbnB1dERhdGE7CiAgICAgIHZhciBfdmFsJGRhdGEkc2hlZXROYW1lID0gdmFsWyJkYXRhIl1bc2hlZXROYW1lXSwKICAgICAgICAgIHRhYmxlRGF0YSA9IF92YWwkZGF0YSRzaGVldE5hbWUudGFibGVEYXRhLAogICAgICAgICAgdGFibGVJbmZvID0gX3ZhbCRkYXRhJHNoZWV0TmFtZS50YWJsZUluZm87CiAgICAgIHRoaXMuaGVhZGVycyA9IFtdOwogICAgICB2YXIgcmVsYXRpb25faWRfZXhpc3QgPSBmYWxzZTsKICAgICAgdmFyIGlkX2V4aXN0ID0gZmFsc2U7CgogICAgICBpZiAodGFibGVEYXRhLmxlbmd0aCA+IDApIHsKICAgICAgICB0YWJsZUluZm8uZm9yRWFjaChmdW5jdGlvbiAoaW5mbykgewogICAgICAgICAgX3RoaXMuaGVhZGVycy5wdXNoKHsKICAgICAgICAgICAgdGV4dDogaW5mby5sYWJlbCwKICAgICAgICAgICAgdmFsdWU6IGluZm8udmFsdWUKICAgICAgICAgIH0pOwoKICAgICAgICAgIGluZm8udmFsdWUgPT0gJ3JlbGF0aW9uX2lkJyA/IHJlbGF0aW9uX2lkX2V4aXN0ID0gdHJ1ZSA6IGluZm8udmFsdWUgPT0gJ2lkJyA/IGlkX2V4aXN0ID0gdHJ1ZSA6IC0xOwogICAgICAgIH0pOwogICAgICAgIHRoaXMudGFibGVJdGVtS2V5ID0gcmVsYXRpb25faWRfZXhpc3QgPyAncmVsYXRpb25faWQnIDogaWRfZXhpc3QgPyAnaWQnIDogdGhpcy5oZWFkZXJzWzBdLnZhbHVlOwogICAgICAgIHRoaXMuY3VycmVudERhdGFCYXNlID0gdGFibGVEYXRhOwogICAgICAgIHRoaXMuZGVzc2VydHMgPSB0YWJsZURhdGE7CiAgICAgIH0KICAgIH0KICB9LAogIHdhdGNoOiB7CiAgICAiaXRlbVByb3BzLmlucHV0RGF0YSI6IGZ1bmN0aW9uIGl0ZW1Qcm9wc0lucHV0RGF0YSh2YWwsIG9sZFZhbCkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICAgIGNvbnNvbGUubG9nKCJuZXdWYWwsIG9sZFZhbCIpOwoKICAgICAgaWYgKHZhbCkgewogICAgICAgIHRoaXMubG9hZGluZ1N0YXR1cyA9IHRydWU7CiAgICAgICAgdGhpcy5kYXRhU3RhdHVzID0gdmFsLnRhYmxlTmFtZXM7CiAgICAgICAgdGhpcy5oZWFkZXJzID0gW107CiAgICAgICAgY29uc29sZS5sb2codmFsKTsKICAgICAgICB2YXIgdGFibGVOYW1lcyA9IHZhbFsndGFibGVOYW1lcyddOwogICAgICAgIHRhYmxlTmFtZXMuZm9yRWFjaChmdW5jdGlvbiAodGFibGVuYW1lKSB7CiAgICAgICAgICBfdGhpczIuc2hlZXRzLnB1c2goewogICAgICAgICAgICBuYW1lOiB0YWJsZW5hbWUsCiAgICAgICAgICAgIGFjdGl2ZTogdHJ1ZQogICAgICAgICAgfSk7CiAgICAgICAgfSk7CiAgICAgICAgdGhpcy5jdXJyZW50U2hlZXQgPSB0YWJsZU5hbWVzWzBdOwogICAgICAgIHRoaXMuc2hlZXREYXRhVXBkYXRlKHRoaXMuY3VycmVudFNoZWV0KTsKICAgICAgICB0aGlzLmxvYWRpbmdTdGF0dXMgPSBmYWxzZTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLmxvYWRpbmdTdGF0dXMgPSBmYWxzZTsKICAgICAgICB0aGlzLmRhdGFTdGF0dXMgPSB1bmRlZmluZWQ7CiAgICAgICAgdGhpcy5jdXJyZW50RGF0YUJhc2UgPSB1bmRlZmluZWQ7CiAgICAgICAgdGhpcy5kZXNzZXJ0cyA9IHVuZGVmaW5lZDsKICAgICAgfQogICAgfSwKICAgIGRhdGFTdGF0dXM6IGZ1bmN0aW9uIGRhdGFTdGF0dXModmFsLCBvbGRWYWwpIHsKICAgICAgaWYgKHZhbCkgewogICAgICAgIHZhciByZXNpemVyQkVsZWxlbXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCIjIiArIHRoaXMuaXRlbVByb3BzLmlkKS5xdWVyeVNlbGVjdG9yKCIucmVzaXplci1iIik7CiAgICAgICAgdmFyIGhlaWdodE9mU2hlZXQgPSAyNTsKICAgICAgICByZXNpemVyQkVsZWxlbXQuc3R5bGUuYm90dG9tID0gLWhlaWdodE9mU2hlZXQgLSAxMiArICJweCI7CiAgICAgIH0KICAgIH0sCiAgICBzZWxlY3RlZDogZnVuY3Rpb24gc2VsZWN0ZWQoKSB7CiAgICAgIGNvbnNvbGUubG9nKCJ0YWJsZSAiLmNvbmNhdCh0aGlzLml0ZW1Qcm9wcy5pZCwgIiBzZWxlY3RlZCBpdGVtcyB1cGRhdGVkIikpOwogICAgICBjb25zb2xlLmxvZyh0aGlzLnNlbGVjdGVkKTsKICAgICAgdGhpcy4kc3RvcmUuZGlzcGF0Y2goJ2RvY3VtZW50cy91cGRhdGVTZWxlY3RlZEl0ZW1zJywgewogICAgICAgIGlkOiB0aGlzLml0ZW1Qcm9wcy5pZCwKICAgICAgICBzZWxlY3RlZDogdGhpcy5zZWxlY3RlZAogICAgICB9KTsKICAgIH0KICB9Cn07"},{"version":3,"sources":["Inner.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div class=\"card-inner\">\n    <v-card-text v-if=\"!dataStatus\" class=\"card-name\">\n      No Table Data\n    </v-card-text>\n    \n    <template v-if=\"dataStatus\">\n      <div>\n        <v-sheet\n          class=\"mx-auto sheetname\"\n          max-width=\"900\"\n          style=\"margin-top:10px\"\n        >\n          <v-slide-group\n            show-arrows\n          >\n            <v-slide-item\n              v-for=\"sheet in sheets\"\n              :key=\"sheet.name\"\n            >\n              <v-btn\n                class=\"mx-2\"\n                :input-value=\"currentSheet == sheet.name\"\n                active-class=\"purple white--text\"\n                depressed\n                rounded\n                small\n                @click=\"toggleSheet(sheet.name)\"\n              >\n                {{sheet.name}}\n              </v-btn>\n            </v-slide-item>\n          </v-slide-group>\n        </v-sheet>\n\n        <v-card-title>\n          {{ currentSheet.split(\".\")[0] }}\n          <v-spacer></v-spacer>\n          <v-text-field\n            v-model=\"search\"\n            append-icon=\"mdi-magnify\"\n            label=\"Search\"\n            single-line\n            hide-details\n          ></v-text-field>\n        </v-card-title>\n        <template>\n          <v-data-table\n            :loading=\"loadingStatus\"\n            :headers=\"headers\"\n            :items=\"desserts\"\n            :item-key=\"tableItemKey\"\n            class=\"elevation-1\"\n            :height=\"`${itemProps.height - 50 - 70}px`\"\n            :search=\"search\"\n            show-select\n            ref=\"table\"\n            :single-select=\"false\"\n            v-model=\"selected\"\n          >\n          </v-data-table>\n        </template>\n      </div>\n    </template>\n  </div>\n</template>\n\n<script>\n\nexport default {\n  props: ['itemProps'], \n  data() {\n    return {\n      dataStatus: false, \n      loadingStatus: undefined,\n      selected: [],\n      search: \"\",\n      sheets: [], \n      headers: [],\n      desserts: [],\n      currentDataBase: [],\n      answerBasedRetrieval: {},\n      currentSheet: \"\", \n      flag: false,\n      tableItemKey: \"\",\n    }\n  }, \n  methods: {\n    toggleSheet(sheetName){\n      if (this.currentSheet != sheetName) {\n        this.currentSheet = sheetName;\n        this.sheetDataUpdate(this.currentSheet);\n      }\n    },\n    sheetDataUpdate(sheetName){\n      const val = this.itemProps.inputData; \n      const {tableData, tableInfo} = val[\"data\"][sheetName];\n      this.headers = []\n      let relation_id_exist = false \n      let id_exist = false \n      if (tableData.length > 0) {\n        tableInfo.forEach(info => {\n          this.headers.push({\n            text: info.label, \n            value: info.value\n          })\n          info.value == 'relation_id' \n            ? (relation_id_exist = true) \n            : info.value == 'id' \n              ? (id_exist = true )\n              : -1\n        })\n        this.tableItemKey = relation_id_exist \n          ? 'relation_id'\n          : id_exist \n            ? 'id'\n            : this.headers[0].value\n        this.currentDataBase = tableData\n        this.desserts = tableData\n      }\n    }\n  },\n  watch: {\n    \"itemProps.inputData\": function (val, oldVal) {\n    \n      console.log(\"newVal, oldVal\");\n      if (val) {\n        this.loadingStatus = true;\n        this.dataStatus = val.tableNames;\n        this.headers = [];\n\n        console.log(val)\n        const tableNames = val['tableNames']; \n        tableNames.forEach(tablename => {\n          this.sheets.push({\n            name: tablename,\n            active: true,\n          })\n        })\n        \n        this.currentSheet = tableNames[0];\n\n        this.sheetDataUpdate(this.currentSheet);\n\n        this.loadingStatus = false;\n      } else {\n        this.loadingStatus = false;\n        this.dataStatus = undefined;\n        this.currentDataBase = undefined;\n        this.desserts = undefined;\n      }\n    },\n    dataStatus: function(val, oldVal) {\n      if (val) {\n        const resizerBElelemt = document.querySelector(\"#\" + this.itemProps.id).querySelector(\".resizer-b\"); \n        const heightOfSheet = 25;\n        resizerBElelemt.style.bottom = (-heightOfSheet - 12) + \"px\"; \n      }\n    },\n    selected() {\n      console.log(`table ${this.itemProps.id} selected items updated`) \n      console.log(this.selected)\n      this.$store.dispatch('documents/updateSelectedItems', {id: this.itemProps.id, selected: this.selected})\n    }\n  }\n}\n</script>\n\n<style scoped>\n.card-name {\n    text-align: center;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    flex-wrap: wrap;\n    height: 100%;\n  }\n\n.card-inner{\n  text-align: center;\n  align-items: center;\n  justify-content: center;\n  flex-wrap: wrap;\n  height: 100%;\n}\n</style>"],"sourceRoot":"src/components/viewer/tabularviewer"}]}