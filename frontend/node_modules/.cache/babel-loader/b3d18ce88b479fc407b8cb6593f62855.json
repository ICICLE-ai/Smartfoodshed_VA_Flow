{"remainingRequest":"/Users/qiurui/Desktop/ICICLE/new_gui_2022/Smartfoodshed_VA_Flow/frontend/node_modules/.pnpm/babel-loader@8.2.5_5ouqwanl7jnotevpn4w6qovjqm/node_modules/babel-loader/lib/index.js!/Users/qiurui/Desktop/ICICLE/new_gui_2022/Smartfoodshed_VA_Flow/frontend/node_modules/.pnpm/cache-loader@4.1.0_webpack@4.46.0/node_modules/cache-loader/dist/cjs.js??ref--1-0!/Users/qiurui/Desktop/ICICLE/new_gui_2022/Smartfoodshed_VA_Flow/frontend/node_modules/.pnpm/vue-loader@15.10.0_rm23m4wqnartkrat7nvkqiuwja/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/qiurui/Desktop/ICICLE/new_gui_2022/Smartfoodshed_VA_Flow/frontend/src/components/InoutputBtns.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/qiurui/Desktop/ICICLE/new_gui_2022/Smartfoodshed_VA_Flow/frontend/src/components/InoutputBtns.vue","mtime":1661228416441},{"path":"/Users/qiurui/Desktop/ICICLE/new_gui_2022/Smartfoodshed_VA_Flow/frontend/babel.config.js","mtime":1660324544800},{"path":"/Users/qiurui/Desktop/ICICLE/new_gui_2022/Smartfoodshed_VA_Flow/frontend/node_modules/.pnpm/cache-loader@4.1.0_webpack@4.46.0/node_modules/cache-loader/dist/cjs.js","mtime":1660324597580},{"path":"/Users/qiurui/Desktop/ICICLE/new_gui_2022/Smartfoodshed_VA_Flow/frontend/node_modules/.pnpm/babel-loader@8.2.5_5ouqwanl7jnotevpn4w6qovjqm/node_modules/babel-loader/lib/index.js","mtime":1660324598487},{"path":"/Users/qiurui/Desktop/ICICLE/new_gui_2022/Smartfoodshed_VA_Flow/frontend/node_modules/.pnpm/cache-loader@4.1.0_webpack@4.46.0/node_modules/cache-loader/dist/cjs.js","mtime":1660324597580},{"path":"/Users/qiurui/Desktop/ICICLE/new_gui_2022/Smartfoodshed_VA_Flow/frontend/node_modules/.pnpm/vue-loader@15.10.0_rm23m4wqnartkrat7nvkqiuwja/node_modules/vue-loader/lib/index.js","mtime":1660324597951}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICogYXMgZDMgZnJvbSAnZDMnOwppbXBvcnQgeyBtYXBTdGF0ZSB9IGZyb20gJ3Z1ZXgnOwpleHBvcnQgZGVmYXVsdCB7CiAgcHJvcHM6IFsncmVzaXppbmdTdGF0dXMnLCAnd2lkdGgnLCAnaGVpZ2h0JywgJ21hcmdpbkxlZnQnLCAnbWFyZ2luVG9wJywgJ2hvdmVyJywgJ2NvbXBvbmVudElkJ10sCgogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICByaWdodEJ0bjogdHJ1ZSwKICAgICAgdG9wQnRuOiBmYWxzZSwKICAgICAgbGVmdEJ0bjogZmFsc2UsCiAgICAgIGxpbmVLZWVwOiBmYWxzZSwKICAgICAgbGluZVBhdGg6IHVuZGVmaW5lZCwKICAgICAgeHkwOiB1bmRlZmluZWQsCiAgICAgIGtlZXA6IGZhbHNlLAogICAgICByaWdodExpbms6IFtdLAogICAgICB0b3BMaW5rOiBbXSwKICAgICAgbGVmdExpbms6IFtdLAogICAgICBjYW52YXM6IGQzLnNlbGVjdCgnLnN2Zy1jYW52YXMnKQogICAgfTsKICB9LAoKICBtZXRob2RzOiB7CiAgICBhZGRMaW5rKGUpIHsKICAgICAgdGhpcy4kc3RvcmUuZGlzcGF0Y2goJ2NoYW5nZUxpbmtEcmF3aW5nU3RhdHVzJywgdHJ1ZSk7CiAgICAgIGNvbnN0IHZtID0gdGhpczsKICAgICAgbGV0IHh5MDsKICAgICAgY29uc3QgY2FudmFzID0gZDMuc2VsZWN0KCcuc3ZnLWNhbnZhcycpOwogICAgICBjb25zdCBtYXJrZXJCb3hXaWR0aCA9IDIwOwogICAgICBjb25zdCBtYXJrZXJCb3hIZWlnaHQgPSAxNTsKICAgICAgY29uc3QgcmVmWCA9IG1hcmtlckJveFdpZHRoIC8gMjsKICAgICAgY29uc3QgcmVmWSA9IG1hcmtlckJveEhlaWdodCAvIDI7CiAgICAgIGNvbnN0IGFycm93UG9pbnRzID0gW1swLCAwXSwgWzAsIDE1XSwgWzIwLCA3LjVdXTsKICAgICAgY2FudmFzLmFwcGVuZCgnZGVmcycpLmFwcGVuZCgnbWFya2VyJykuYXR0cignaWQnLCAnYXJyb3cnKS5hdHRyKCd2aWV3Qm94JywgWzAsIDAsIG1hcmtlckJveFdpZHRoLCBtYXJrZXJCb3hIZWlnaHRdKS5hdHRyKCdyZWZYJywgcmVmWCkuYXR0cigncmVmWScsIHJlZlkpLmF0dHIoJ21hcmtlcldpZHRoJywgbWFya2VyQm94V2lkdGgpLmF0dHIoJ21hcmtlckhlaWdodCcsIG1hcmtlckJveEhlaWdodCkuYXR0cignb3JpZW50JywgJ2F1dG8tc3RhcnQtcmV2ZXJzZScpLmF0dHIoJ29wYWNpdHknLCAwLjYpLmFwcGVuZCgncGF0aCcpLmF0dHIoJ2QnLCBkMy5saW5lKCkoYXJyb3dQb2ludHMpKS5hdHRyKCdzdHJva2UnLCAnYmxhY2snKTsKICAgICAgdGhpcy5rZWVwID0gdHJ1ZTsKICAgICAgeHkwID0gdGhpcy5vbmNsaWNrUG9zUmlnaHQoKTsKICAgICAgdGhpcy4kc3RvcmUuZGlzcGF0Y2goJ3NldEN1cnJlbnRMaW5rJywgewogICAgICAgIGlkOiB0aGlzLmNvbXBvbmVudElkLAogICAgICAgIHBvczogeHkwLAogICAgICAgIGluX291dDogJ3NvdXJjZScKICAgICAgfSk7CiAgICAgIGNvbnN0IGxpbmUgPSBkMy5saW5lKCkueChkID0+IGRbMF0pLnkoZCA9PiBkWzFdKTsgLy8gY29uc3QgY2xhc3NOYW1lID0gYCR7dGhpcy5jb21wb25lbnRJZH0tb3V0bGlua2A7CgogICAgICBjb25zdCBjbGFzc05hbWUgPSAnZHJhd2luZyc7CiAgICAgIGxldCBwYXRoR3JvdXAgPSBjYW52YXMuc2VsZWN0QWxsKGAuJHtjbGFzc05hbWV9YCkuZGF0YShbMF0pOwogICAgICBsZXQgcGF0aEdyb3VwRW50ZXIgPSBwYXRoR3JvdXAuZW50ZXIoKS5hcHBlbmQoJ3BhdGgnKS5hdHRyKCdjbGFzcycsIGNsYXNzTmFtZSk7CiAgICAgIHBhdGhHcm91cEVudGVyLm1lcmdlKHBhdGhHcm91cCkuYXR0cignZCcsIGxpbmUoW3h5MCwgeHkwXSkpLmF0dHIoJ21hcmtlci1lbmQnLCAndXJsKCNhcnJvdyknKS5hdHRyKCdzdHJva2UnLCAnYmxhY2snKS5hdHRyKCdzdHJva2Utd2lkdGgnLCAnMXB4JykuYXR0cignc3Ryb2tlLWRhc2hhcnJheScsICg1LCA1KSk7CiAgICAgIGNhbnZhcy5jYWxsKGRyYXdMaW5lKTsKCiAgICAgIGZ1bmN0aW9uIGRyYXdMaW5lKGNhbnZhcykgewogICAgICAgIGNhbnZhcy5vbignbW91c2Vtb3ZlJywgZnVuY3Rpb24gKCkgewogICAgICAgICAgaWYgKHZtLmtlZXApIHsKICAgICAgICAgICAgcGF0aEdyb3VwRW50ZXIubWVyZ2UocGF0aEdyb3VwKS5hdHRyKCdkJywgbGluZShbeHkwLCBkMy5tb3VzZSh0aGlzKS5tYXAoeCA9PiB4IC0gMSldKSk7CiAgICAgICAgICB9CiAgICAgICAgfSkub24oJ21vdXNldXAnLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICB2bS5rZWVwID0gZmFsc2U7CiAgICAgICAgICBwYXRoR3JvdXBFbnRlci5tZXJnZShwYXRoR3JvdXApLmF0dHIoJ2QnLCBudWxsKTsKICAgICAgICB9KTsKICAgICAgfQogICAgfSwKCiAgICBmaW5pc2hMaW5rKGUpIHsKICAgICAgaWYgKCF0aGlzLmRyYXdMaW5rIHx8ICF0aGlzLmN1cnJlbnRMaW5rLnNvdXJjZSB8fCB0aGlzLmN1cnJlbnRMaW5rLnNvdXJjZS5pZCA9PT0gdGhpcy5jb21wb25lbnRJZCkgewogICAgICAgIHRoaXMuZmluaXNoTGlua2luZygpOwogICAgICAgIHRoaXMuY2FudmFzLm9uKCdtb3VzZW1vdmUnLCBudWxsKS5vbignbW91c2V1cCcsIG51bGwpOwogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgbGV0IHh5MTsKICAgICAgbGV0IHh5MDsKICAgICAgY29uc3QgY2FudmFzID0gZDMuc2VsZWN0KCcuc3ZnLWNhbnZhcycpOwogICAgICB4eTAgPSB0aGlzLmN1cnJlbnRMaW5rLnNvdXJjZS5wb3M7CiAgICAgIHh5MSA9IHRoaXMub25jbGlja1BvcyhlLnRhcmdldC5nZXRBdHRyaWJ1dGUoJ3BvcycpKTsKICAgICAgdGhpcy4kc3RvcmUuZGlzcGF0Y2goJ3NldEN1cnJlbnRMaW5rJywgewogICAgICAgIGlkOiB0aGlzLmNvbXBvbmVudElkLAogICAgICAgIHBvczogeHkxLAogICAgICAgIGluX291dDogJ3RhcmdldCcKICAgICAgfSk7IC8vIGxldCBkID0gdGhpcy5saW5rRChjYW52YXMsIHtzb3VyY2U6IHh5MCwgdGFyZ2V0OiB4eTF9LCB0aGlzLmN1cnJlbnRMaW5rLnNvdXJjZS5pZCsnXycrdGhpcy5jdXJyZW50TGluay50YXJnZXQuaWQpIAoKICAgICAgbGV0IGxpbmtEID0gdGhpcy5saW5rRCh7CiAgICAgICAgc291cmNlOiB4eTAsCiAgICAgICAgdGFyZ2V0OiB4eTEKICAgICAgfSk7CiAgICAgIHRoaXMuJHN0b3JlLmRpc3BhdGNoKCdsaW5rL2FkZENvbXAnLCB7CiAgICAgICAgaWQ6IHRoaXMuY3VycmVudExpbmsuc291cmNlLmlkICsgJ18nICsgdGhpcy5jdXJyZW50TGluay50YXJnZXQuaWQsCiAgICAgICAgc291cmNlOiB0aGlzLmN1cnJlbnRMaW5rLnNvdXJjZS5pZCwKICAgICAgICBzb3VyY2VQb3M6IHRoaXMuY3VycmVudExpbmsuc291cmNlLnBvcywKICAgICAgICBzb3VyY2VCdG46ICdyaWdodC1idG4taWNvbicsCiAgICAgICAgdGFyZ2V0OiB0aGlzLmN1cnJlbnRMaW5rLnRhcmdldC5pZCwKICAgICAgICB0YXJnZXRQb3M6IHRoaXMuY3VycmVudExpbmsudGFyZ2V0LnBvcywKICAgICAgICB0YXJnZXRCdG46IGUudGFyZ2V0LmdldEF0dHJpYnV0ZSgncG9zJyksCiAgICAgICAgZDogbGlua0QKICAgICAgfSk7CiAgICAgIGNvbnN0IHNvdXJjZVR5cGUgPSB0aGlzLmN1cnJlbnRMaW5rLnNvdXJjZS5pZC5zcGxpdCgnLScpWzFdOwogICAgICBjb25zdCB0YXJnZXRUeXBlID0gdGhpcy5jdXJyZW50TGluay50YXJnZXQuaWQuc3BsaXQoJy0nKVsxXTsgLy8gdGhpcy4kc3RvcmUuZGlzcGF0Y2goYCR7c291cmNlVHlwZX0vYWRkTGlua2AsIHsKICAgICAgLy8gICBpZDogdGhpcy5jdXJyZW50TGluay5zb3VyY2UuaWQrJ18nK3RoaXMuY3VycmVudExpbmsudGFyZ2V0LmlkLAogICAgICAvLyAgIHNvdXJjZTogdGhpcy5jdXJyZW50TGluay5zb3VyY2UuaWQsIAogICAgICAvLyAgIHNvdXJjZVBvczogdGhpcy5jdXJyZW50TGluay5zb3VyY2UucG9zLCAKICAgICAgLy8gICBzb3VyY2VCdG46ICdyaWdodC1idG4taWNvbicsCiAgICAgIC8vICAgdGFyZ2V0OiB0aGlzLmN1cnJlbnRMaW5rLnRhcmdldC5pZCwgCiAgICAgIC8vICAgdGFyZ2V0UG9zOiB0aGlzLmN1cnJlbnRMaW5rLnRhcmdldC5wb3MsIAogICAgICAvLyAgIHRhcmdldEJ0bjogZS50YXJnZXQuZ2V0QXR0cmlidXRlKCdwb3MnKSwKICAgICAgLy8gICBkOiBsaW5rRCwKICAgICAgLy8gICBzdGF0dXM6ICdzb3VyY2UnCiAgICAgIC8vIH0pCiAgICAgIC8vIHRoaXMuJHN0b3JlLmRpc3BhdGNoKGAke3RhcmdldFR5cGV9L2FkZExpbmtgLCB7CiAgICAgIC8vICAgaWQ6IHRoaXMuY3VycmVudExpbmsuc291cmNlLmlkKydfJyt0aGlzLmN1cnJlbnRMaW5rLnRhcmdldC5pZCwKICAgICAgLy8gICBzb3VyY2U6IHRoaXMuY3VycmVudExpbmsuc291cmNlLmlkLCAKICAgICAgLy8gICBzb3VyY2VQb3M6IHRoaXMuY3VycmVudExpbmsuc291cmNlLnBvcywgCiAgICAgIC8vICAgc291cmNlQnRuOiAncmlnaHQtYnRuLWljb24nLAogICAgICAvLyAgIHRhcmdldDogdGhpcy5jdXJyZW50TGluay50YXJnZXQuaWQsIAogICAgICAvLyAgIHRhcmdldFBvczogdGhpcy5jdXJyZW50TGluay50YXJnZXQucG9zLCAKICAgICAgLy8gICB0YXJnZXRCdG46IGUudGFyZ2V0LmdldEF0dHJpYnV0ZSgncG9zJyksCiAgICAgIC8vICAgZDogbGlua0QsCiAgICAgIC8vICAgc3RhdHVzOiAndGFyZ2V0JwogICAgICAvLyB9KQogICAgICAvLyByZW1vdmUgdGhlIGN1cnJlbnRMaW5raW5nIGFuZCBkaXNwYXRjaCB0aGUgc3RhdHVzIGluIHN0b3JlCgogICAgICB0aGlzLmZpbmlzaExpbmtpbmcoKTsKICAgIH0sCgogICAgZmluaXNoTGlua2luZygpIHsKICAgICAgaWYgKHRoaXMuZHJhd0xpbmspIHsKICAgICAgICAvLyBEcmF3IExpbmsgRmlyc3QgYW5kIHRoZW4gcmVtb3ZlIHRoZSBkcmF3aW5nIG9uZQogICAgICAgIHRoaXMuY2FudmFzLnNlbGVjdEFsbCgnLmRyYXdpbmcnKS5hdHRyKCdkJywgbnVsbCk7CiAgICAgICAgdGhpcy5jYW52YXMub24oJ21vdXNlbW92ZScsIG51bGwpOwogICAgICAgIHRoaXMuY2FudmFzLm9uKCdtb3VzZXVwJywgbnVsbCk7CiAgICAgICAgdGhpcy5rZWVwID0gZmFsc2U7IC8vIEZpbmlzaCBkcmF3aW5nIExpbmsKCiAgICAgICAgdGhpcy4kc3RvcmUuZGlzcGF0Y2goJ2NoYW5nZUxpbmtEcmF3aW5nU3RhdHVzJywgZmFsc2UpOwogICAgICB9CiAgICB9LAoKICAgIGxpbmtEKGRhdGEpIHsKICAgICAgY29uc3QgbGluZSA9IGQzLmxpbmtIb3Jpem9udGFsKCkueChkID0+IGRbMF0pLnkoZCA9PiBkWzFdKTsKICAgICAgcmV0dXJuIGxpbmUoZGF0YSk7CiAgICB9LAoKICAgIC8vIElucHV0IHRoZSBwb3NpdGlvbiBvZiBhIGJ1dHRvbiBhbmQgZ2V0IGlzIGNlbnRyYWwgcG9zIAogICAgb25jbGlja1Bvcyhwb3MpIHsKICAgICAgaWYgKHBvcy5pbmNsdWRlcygncmlnaHQnKSkgewogICAgICAgIHRoaXMucmlnaHRCdG4gPSB0cnVlOwogICAgICAgIHJldHVybiB0aGlzLm9uY2xpY2tQb3NSaWdodCgpOwogICAgICB9IGVsc2UgaWYgKHBvcy5pbmNsdWRlcygndG9wJykpIHsKICAgICAgICB0aGlzLnRvcEJ0biA9IHRydWU7CiAgICAgICAgcmV0dXJuIHRoaXMub25jbGlja1Bvc1RvcCgpOwogICAgICB9IGVsc2UgaWYgKHBvcy5pbmNsdWRlcygnbGVmdCcpKSB7CiAgICAgICAgdGhpcy5sZWZ0QnRuID0gdHJ1ZTsKICAgICAgICByZXR1cm4gdGhpcy5vbmNsaWNrUG9zTGVmdCgpOwogICAgICB9CiAgICB9LAoKICAgIG9uY2xpY2tQb3NSaWdodCgpIHsKICAgICAgY29uc3QgeCA9IHBhcnNlSW50KHRoaXMubWFyZ2luTGVmdCkgKyBwYXJzZUludCh0aGlzLndpZHRoKSArIDE0OwogICAgICBjb25zdCB5ID0gcGFyc2VJbnQodGhpcy5tYXJnaW5Ub3ApICsgcGFyc2VJbnQodGhpcy5oZWlnaHQpIC8gMjsKICAgICAgcmV0dXJuIFt4LCB5XTsKICAgIH0sCgogICAgb25jbGlja1Bvc1RvcCgpIHsKICAgICAgY29uc3QgeCA9IHBhcnNlSW50KHRoaXMubWFyZ2luTGVmdCkgKyBwYXJzZUludCh0aGlzLndpZHRoIC8gMik7CiAgICAgIGNvbnN0IHkgPSBwYXJzZUludCh0aGlzLm1hcmdpblRvcCkgLSAxNDsKICAgICAgcmV0dXJuIFt4LCB5XTsKICAgIH0sCgogICAgb25jbGlja1Bvc0xlZnQoKSB7CiAgICAgIGNvbnN0IHggPSBwYXJzZUludCh0aGlzLm1hcmdpbkxlZnQpIC0gMTQ7CiAgICAgIGNvbnN0IHkgPSBwYXJzZUludCh0aGlzLm1hcmdpblRvcCkgKyBwYXJzZUludCh0aGlzLmhlaWdodCkgLyAyOwogICAgICByZXR1cm4gW3gsIHldOwogICAgfSwKCiAgICB0ZW1wKCkgewogICAgICBjb25zdCBjYXJkVHlwZSA9IHRoaXMuY29tcG9uZW50SWQuc3BsaXQoJy0nKVsxXTsKICAgICAgY29uc3QgdGhpc0NvbXAgPSB0aGlzW2NhcmRUeXBlXS5jYXJkcy5maWx0ZXIoY2FyZCA9PiBjYXJkLmlkID09IHRoaXMuY29tcG9uZW50SWQpWzBdOwoKICAgICAgaWYgKCF0aGlzQ29tcC5zb3VyY2VMaW5rICYmICF0aGlzQ29tcC50YXJnZXRMaW5rKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICBpZiAodGhpc0NvbXAuc291cmNlTGluaykgewogICAgICAgIHRoaXNDb21wLnNvdXJjZUxpbmsuZm9yRWFjaChsaW5rID0+IHsKICAgICAgICAgIGNvbnN0IG5ld1h5MCA9IHRoaXMub25jbGlja1BvcyhsaW5rLnNvdXJjZUJ0bik7CiAgICAgICAgICBsaW5rLnNvdXJjZVBvcyA9IG5ld1h5MDsKICAgICAgICAgIGNvbnN0IHh5MSA9IGxpbmsudGFyZ2V0UG9zOwogICAgICAgICAgY29uc3QgbmV3RCA9IHRoaXMubGlua0QoewogICAgICAgICAgICBzb3VyY2U6IG5ld1h5MCwKICAgICAgICAgICAgdGFyZ2V0OiB4eTEKICAgICAgICAgIH0pOwogICAgICAgICAgbGluay5kID0gbmV3RDsKICAgICAgICAgIGxpbmsuc3RhdHVzID0gJ3NvdXJjZSc7CiAgICAgICAgICB0aGlzLiRzdG9yZS5kaXNwYXRjaCgnbGluay91cGRhdGVDb21wJywgbGluayk7CiAgICAgICAgICB0aGlzLiRzdG9yZS5kaXNwYXRjaChgJHtjYXJkVHlwZX0vdXBkYXRlTGlua2AsIGxpbmspOwogICAgICAgIH0pOwogICAgICB9CgogICAgICBpZiAodGhpc0NvbXAudGFyZ2V0TGluaykgewogICAgICAgIHRoaXNDb21wLnRhcmdldExpbmsuZm9yRWFjaChsaW5rID0+IHsKICAgICAgICAgIGNvbnN0IG5ld1h5MSA9IHRoaXMub25jbGlja1BvcyhsaW5rLnRhcmdldEJ0bik7CiAgICAgICAgICBsaW5rLnRhcmdldFBvcyA9IG5ld1h5MTsKICAgICAgICAgIGNvbnN0IHh5MCA9IGxpbmsuc291cmNlUG9zOwogICAgICAgICAgY29uc3QgbmV3RCA9IHRoaXMubGlua0QoewogICAgICAgICAgICBzb3VyY2U6IHh5MCwKICAgICAgICAgICAgdGFyZ2V0OiBuZXdYeTEKICAgICAgICAgIH0pOwogICAgICAgICAgbGluay5kID0gbmV3RDsKICAgICAgICAgIGxpbmsuc3RhdHVzID0gJ3RhcmdldCc7CiAgICAgICAgICB0aGlzLiRzdG9yZS5kaXNwYXRjaCgnbGluay91cGRhdGVDb21wJywgbGluayk7CiAgICAgICAgICB0aGlzLiRzdG9yZS5kaXNwYXRjaChgJHtjYXJkVHlwZX0vdXBkYXRlTGlua2AsIGxpbmspOwogICAgICAgIH0pOwogICAgICB9CiAgICB9CgogIH0sCgogIGNyZWF0ZWQoKSB7fSwKCiAgY29tcHV0ZWQ6IHsgLi4ubWFwU3RhdGUoWydjdXJyZW50TGluaycsICdkcmF3TGluaycsICdkb2N1bWVudHMnLCAnZ2xvYmFsdmlldycsICdjb3JwdXMnLCAndG9waWNzJywgJ29udG9sb2d5JywgJ2dyYXBoJywgJ3RhYmxlMmN5cGhlciddKQogIH0sCiAgd2F0Y2g6IHsKICAgIG1hcmdpbkxlZnQ6IGZ1bmN0aW9uICgpIHsKICAgICAgY29uc29sZS5sb2coJ2xlZnQgY2hhbmdlISEhJyk7CiAgICAgIHRoaXMudGVtcCgpOwogICAgfSwKICAgIG1hcmdpblRvcDogZnVuY3Rpb24gKCkgewogICAgICBjb25zb2xlLmxvZygndG9wIGNoYW5nZSEhIScpOwogICAgICB0aGlzLnRlbXAoKTsKICAgIH0sCiAgICB3aWR0aDogZnVuY3Rpb24gKCkgewogICAgICBjb25zb2xlLmxvZygnd2lkdGggY2hhbmdlICEhIScpOwogICAgICB0aGlzLnRlbXAoKTsKICAgIH0sCiAgICBoZWlnaHQ6IGZ1bmN0aW9uICgpIHsKICAgICAgY29uc29sZS5sb2coJ2hlaWdodCBjaGFuZ2UgISEhJyk7CiAgICAgIHRoaXMudGVtcCgpOwogICAgfQogIH0KfTs="},{"version":3,"mappings":"AAsFA;AACA;AAGA;EACAA,QACA,gBADA,EAEA,OAFA,EAGA,QAHA,EAIA,YAJA,EAKA,WALA,EAMA,OANA,EAOA,aAPA,CADA;;EAUAC;IACA;MAEAC,cAFA;MAGAC,aAHA;MAIAC,cAJA;MAKAC,eALA;MAMAC,mBANA;MAOAC,cAPA;MAQAC,WARA;MASAC,aATA;MAUAC,WAVA;MAWAC,YAXA;MAYAC;IAZA;EAcA,CAzBA;;EA0BAC;IACAC;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MAEAF,sBACAG,MADA,CACA,QADA,EAEAC,IAFA,CAEA,IAFA,EAEA,OAFA,EAGAA,IAHA,CAGA,SAHA,EAGA,uCAHA,EAIAA,IAJA,CAIA,MAJA,EAIAC,IAJA,EAKAD,IALA,CAKA,MALA,EAKAE,IALA,EAMAF,IANA,CAMA,aANA,EAMAG,cANA,EAOAH,IAPA,CAOA,cAPA,EAOAI,eAPA,EAQAJ,IARA,CAQA,QARA,EAQA,oBARA,EASAA,IATA,CASA,SATA,EASA,GATA,EAUAD,MAVA,CAUA,MAVA,EAWAC,IAXA,CAWA,GAXA,EAWAK,sBAXA,EAYAL,IAZA,CAYA,QAZA,EAYA,OAZA;MAcA;MAEAT;MAEA;QACAe,oBADA;QAEAC,QAFA;QAGAC;MAHA;MAQA,uBACAC,CADA,CACAC,SADA,EAEAC,CAFA,CAEAD,SAFA,EArCA,CA0CA;;MACA;MACA;MACA;MACAE,gCACAZ,IADA,CACA,GADA,EACAa,gBADA,EAEAb,IAFA,CAEA,YAFA,EAEA,aAFA,EAGAA,IAHA,CAGA,QAHA,EAGA,OAHA,EAIAA,IAJA,CAIA,cAJA,EAIA,KAJA,EAKAA,IALA,CAKA,kBALA,GAKA,IALA;MAQAJ;;MAEA;QACAA,OACAkB,EADA,CACA,WADA,EACA;UAEA;YACAF,gCACAZ,IADA,CACA,GADA,EACAa,2CADA;UAEA;QACA,CAPA,EAQAC,EARA,CAQA,SARA,EAQA;UACAC;UACAH,gCACAZ,IADA,CACA,GADA,EACA,IADA;QAEA,CAZA;MAaA;IAEA,CAzEA;;IA4EAgB;MACA;QACA;QACA,YACAF,EADA,CACA,WADA,EACA,IADA,EAEAA,EAFA,CAEA,SAFA,EAEA,IAFA;QAGA;MACA;;MAEA;MACA;MACA;MAEAvB;MACA0B;MAGA;QACAX,oBADA;QAEAC,QAFA;QAGAC;MAHA,GAjBA,CAwBA;;MAEA;QAAAU;QAAAC;MAAA;MAEA;QACAb,iEADA;QAEAY,kCAFA;QAGAE,sCAHA;QAIAC,2BAJA;QAKAF,kCALA;QAMAG,sCANA;QAOAC,uCAPA;QAQAb;MARA;MAYA;MACA,4DAzCA,CA4CA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MAEA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;;MACA;IAEA,CAlJA;;IAoJAc;MACA;QACA;QACA;QACA;QACA;QACA,kBALA,CAMA;;QACA;MACA;IACA,CA9JA;;IAgKAC;MACA,iCACAhB,CADA,CACAC,SADA,EAEAC,CAFA,CAEAD,SAFA;MAIA;IAEA,CAvKA;;IAyKA;IACAgB;MACA;QACA;QACA;MACA,CAHA,MAGA;QACA;QACA;MACA,CAHA,MAGA;QACA;QACA;MACA;IAEA,CAtLA;;IAuLAC;MACA;MACA;MACA;IACA,CA3LA;;IA6LAC;MACA;MACA;MACA;IACA,CAjMA;;IAmMAC;MACA;MACA;MACA;IACA,CAvMA;;IAyMAC;MACA;MACA;;MACA;QACA;MACA;;MACA;QACAC;UACA;UACAC;UACA;UACA;YACAd,cADA;YAEAC;UAFA;UAIAa;UAGAA;UACA;UACA;QACA,CAdA;MAeA;;MACA;QACAD;UACA;UACAC;UACA;UACA;YACAd,WADA;YAEAC;UAFA;UAIAa;UAEAA;UACA;UACA;QACA,CAbA;MAcA;IAEA;;EAjPA,CA1BA;;EA6QAC,WACA,CA9QA;;EAgRAC,YACA;EADA,CAhRA;EAoRAC;IACAC;MACAC;MACA;IACA,CAJA;IAKAC;MACAD;MACA;IACA,CARA;IASAE;MACAF;MACA;IACA,CAZA;IAaAG;MACAH;MACA;IACA;EAhBA;AApRA","names":["props","data","rightBtn","topBtn","leftBtn","lineKeep","linePath","xy0","keep","rightLink","topLink","leftLink","canvas","methods","addLink","append","attr","refX","refY","markerBoxWidth","markerBoxHeight","d3","id","pos","in_out","x","d","y","pathGroupEnter","line","on","vm","finishLink","xy1","source","target","sourcePos","sourceBtn","targetPos","targetBtn","finishLinking","linkD","onclickPos","onclickPosRight","onclickPosTop","onclickPosLeft","temp","thisComp","link","created","computed","watch","marginLeft","console","marginTop","width","height"],"sourceRoot":"src/components","sources":["InoutputBtns.vue"],"sourcesContent":["<template>\n  <div>\n    <v-btn\n      small\n      icon\n      outlined\n      class=\"card-actions\"\n      :id=\"'right-btn-' + componentId\"\n      @mousedown=\"addLink\"\n      @mouseup=\"finishLink\"\n      v-show=\"!resizingStatus && (hover || rightBtn || drawLink)\"\n      :style=\"{\n        position: 'absolute', \n        padding: 0, \n        margin: 0,\n        left: `${width}px`, \n        top: `${height/2}px`,\n        transform: `translate(0%, -50%)`,\n      }\"\n    >\n      <v-icon \n        small\n        pos=\"right-btn-icon\"  \n      >\n        mdi-plus\n      </v-icon>\n    </v-btn>\n\n    <v-btn\n      small\n      icon\n      outlined\n      class=\"card-actions\"\n      :id=\"'left-btn-' + componentId\"\n      @mousedown=\"addLink\"\n      @mouseup=\"finishLink\"\n      ref=\"addLinkBtn\"  \n      v-show=\"!resizingStatus && (hover || leftBtn || drawLink)\"\n      :style=\"{\n        position: 'absolute', \n        padding: 0, \n        margin: 0,\n        left: 0, \n        top: `${height/2}px`,\n        transform: `translate(-120%, -50%)`\n      }\"\n    >\n      <v-icon \n        large\n        pos=\"left-btn-icon\"  \n      >\n        mdi-menu-right\n      </v-icon>\n    </v-btn>\n    \n    <v-btn\n      small\n      icon\n      outlined\n      class=\"card-actions\"\n      :id=\"`top-btn-${componentId}`\"\n      @mousedown=\"addLink\"\n      @mouseup=\"finishLink\"\n      ref=\"addLinkBtn\"  \n      v-show=\"(hover || topBtn || drawLink) && !resizingStatus\"\n      :style=\"{\n        position: 'absolute', \n        padding: 0, \n        margin: 0,\n        left: `${width/2}px`, \n        top: 0,\n        transform: `translate(-50%,-120%)`\n      }\"\n      \n    >\n      <v-icon \n        large\n        pos=\"top-btn-icon\"  \n      >\n        mdi-menu-down\n      </v-icon>\n    </v-btn>\n  </div>\n</template>\n\n<script>\nimport * as d3 from 'd3'\nimport {mapState} from 'vuex'\n\n\nexport default {\n  props: [\n    'resizingStatus', \n    'width', \n    'height', \n    'marginLeft', \n    'marginTop',\n    'hover',\n    'componentId',\n  ],\n  data(){\n    return {\n\n      rightBtn: true,\n      topBtn: false,\n      leftBtn: false, \n      lineKeep: false,\n      linePath: undefined, \n      xy0: undefined, \n      keep: false,\n      rightLink: [], \n      topLink: [],\n      leftLink: [],\n      canvas: d3.select('.svg-canvas')\n    }\n  },\n  methods: {\n    addLink(e){\n      this.$store.dispatch('changeLinkDrawingStatus', true);\n      const vm = this;\n      let xy0; \n      const canvas = d3.select('.svg-canvas');\n      const markerBoxWidth = 20; \n      const markerBoxHeight = 15;\n      const refX = markerBoxWidth / 2;\n      const refY = markerBoxHeight / 2;      \n      const arrowPoints = [[0, 0], [0, 15], [20, 7.5]];\n\n      canvas.append('defs')\n        .append('marker')\n        .attr('id', 'arrow')\n        .attr('viewBox', [0, 0, markerBoxWidth, markerBoxHeight])\n        .attr('refX', refX)\n        .attr('refY', refY)\n        .attr('markerWidth', markerBoxWidth)\n        .attr('markerHeight', markerBoxHeight)\n        .attr('orient', 'auto-start-reverse')\n        .attr('opacity', 0.6)\n        .append('path')\n        .attr('d', d3.line()(arrowPoints))\n        .attr('stroke', 'black');\n      \n      this.keep = true; \n\n      xy0 = this.onclickPosRight();\n      \n      this.$store.dispatch('setCurrentLink', {\n        id: this.componentId,\n        pos: xy0, \n        in_out: 'source'\n      })\n\n\n\n      const line = d3.line()\n                   .x(d=>d[0])\n                   .y(d=>d[1])\n      \n\n      // const className = `${this.componentId}-outlink`;\n      const className = 'drawing';\n      let pathGroup = canvas.selectAll(`.${className}`).data([0])\n      let pathGroupEnter = pathGroup.enter().append('path').attr('class', className)\n      pathGroupEnter.merge(pathGroup)\n        .attr('d', line([xy0, xy0]))\n        .attr('marker-end', 'url(#arrow)')\n        .attr('stroke', 'black')\n        .attr('stroke-width', '1px')\n        .attr('stroke-dasharray', (5,5))\n      \n    \n      canvas.call(drawLine);\n\n      function drawLine(canvas){     \n        canvas\n          .on('mousemove', function(){\n            \n            if(vm.keep){\n              pathGroupEnter.merge(pathGroup)\n                .attr('d', line([xy0, d3.mouse(this).map(x=>x-1)]))\n            }\n          })\n          .on('mouseup', function(){\n            vm.keep = false;\n            pathGroupEnter.merge(pathGroup)\n                .attr('d', null)\n          })\n      }\n\n    },\n  \n    \n    finishLink(e){\n      if(!this.drawLink || !this.currentLink.source || this.currentLink.source.id === this.componentId){\n        this.finishLinking();\n        this.canvas\n          .on('mousemove', null)\n          .on('mouseup', null)\n        return;\n      }\n\n      let xy1; \n      let xy0;\n      const canvas = d3.select('.svg-canvas')\n\n      xy0 = this.currentLink.source.pos;\n      xy1 = this.onclickPos(e.target.getAttribute('pos'))\n\n      \n      this.$store.dispatch('setCurrentLink', {\n        id: this.componentId, \n        pos: xy1, \n        in_out: 'target'\n      })\n      \n      \n      // let d = this.linkD(canvas, {source: xy0, target: xy1}, this.currentLink.source.id+'_'+this.currentLink.target.id) \n      \n      let linkD = this.linkD({source: xy0, target: xy1});\n\n      this.$store.dispatch('link/addComp', {\n        id: this.currentLink.source.id+'_'+this.currentLink.target.id,\n        source: this.currentLink.source.id, \n        sourcePos: this.currentLink.source.pos, \n        sourceBtn: 'right-btn-icon',\n        target: this.currentLink.target.id, \n        targetPos: this.currentLink.target.pos, \n        targetBtn: e.target.getAttribute('pos'),\n        d: linkD\n      })\n\n\n      const sourceType = this.currentLink.source.id.split('-')[1];\n      const targetType = this.currentLink.target.id.split('-')[1];\n      \n\n      // this.$store.dispatch(`${sourceType}/addLink`, {\n      //   id: this.currentLink.source.id+'_'+this.currentLink.target.id,\n      //   source: this.currentLink.source.id, \n      //   sourcePos: this.currentLink.source.pos, \n      //   sourceBtn: 'right-btn-icon',\n      //   target: this.currentLink.target.id, \n      //   targetPos: this.currentLink.target.pos, \n      //   targetBtn: e.target.getAttribute('pos'),\n      //   d: linkD,\n      //   status: 'source'\n      // })\n\n      // this.$store.dispatch(`${targetType}/addLink`, {\n      //   id: this.currentLink.source.id+'_'+this.currentLink.target.id,\n      //   source: this.currentLink.source.id, \n      //   sourcePos: this.currentLink.source.pos, \n      //   sourceBtn: 'right-btn-icon',\n      //   target: this.currentLink.target.id, \n      //   targetPos: this.currentLink.target.pos, \n      //   targetBtn: e.target.getAttribute('pos'),\n      //   d: linkD,\n      //   status: 'target'\n      // })\n      // remove the currentLinking and dispatch the status in store\n      this.finishLinking();\n     \n    },\n\n    finishLinking(){\n      if(this.drawLink){\n        // Draw Link First and then remove the drawing one\n        this.canvas.selectAll('.drawing').attr('d', null); \n        this.canvas.on('mousemove', null);\n        this.canvas.on('mouseup', null)\n        this.keep = false;\n        // Finish drawing Link\n        this.$store.dispatch('changeLinkDrawingStatus', false);\n      }\n    },\n\n    linkD(data){\n      const line = d3.linkHorizontal()\n                   .x(d=>d[0])\n                   .y(d=>d[1])\n\n      return line(data);\n      \n    }, \n\n    // Input the position of a button and get is central pos \n    onclickPos(pos){\n      if(pos.includes('right')){\n        this.rightBtn = true;\n        return this.onclickPosRight()\n      } else if(pos.includes('top')){\n        this.topBtn = true\n        return this.onclickPosTop()\n      } else if(pos.includes('left')){\n        this.leftBtn = true\n        return this.onclickPosLeft()\n      }\n\n    }, \n    onclickPosRight(){\n      const x = parseInt(this.marginLeft) + parseInt(this.width) + 14; \n      const y = parseInt(this.marginTop) + parseInt(this.height) / 2; \n      return [x, y]\n    },\n\n    onclickPosTop(){\n      const x = parseInt(this.marginLeft) + parseInt(this.width/2); \n      const y = parseInt(this.marginTop) - 14; \n      return [x, y]\n    },\n\n    onclickPosLeft(){\n      const x = parseInt(this.marginLeft) - 14; \n      const y = parseInt(this.marginTop) +  parseInt(this.height) / 2; \n      return [x, y]\n    },\n    \n    temp(){\n      const cardType = this.componentId.split('-')[1];\n      const thisComp = this[cardType].cards.filter(card => card.id == this.componentId)[0]\n      if(!thisComp.sourceLink && !thisComp.targetLink){\n        return ;\n      }\n      if(thisComp.sourceLink){\n        thisComp.sourceLink.forEach(link => {\n          const newXy0 = this.onclickPos(link.sourceBtn);\n          link.sourcePos = newXy0\n          const xy1 = link.targetPos;\n          const newD = this.linkD({\n            source: newXy0,\n            target: xy1\n          }) \n          link.d = newD;\n\n\n          link.status = 'source';\n          this.$store.dispatch('link/updateComp', link)\n          this.$store.dispatch(`${cardType}/updateLink`, link)\n        })\n      }\n      if(thisComp.targetLink){\n        thisComp.targetLink.forEach(link => {\n          const newXy1 = this.onclickPos(link.targetBtn);\n          link.targetPos = newXy1;\n          const xy0 = link.sourcePos;\n          const newD = this.linkD({\n            source: xy0,\n            target: newXy1\n          }) \n          link.d = newD;\n\n          link.status = 'target'\n          this.$store.dispatch('link/updateComp', link)\n          this.$store.dispatch(`${cardType}/updateLink`, link)\n        })\n      }\n      \n    }\n  },\n  created(){\n  },\n\n  computed: {\n    ...mapState(['currentLink','drawLink', 'documents', 'globalview', 'corpus', 'topics', 'ontology', 'graph', 'table2cypher'])\n  },\n\n  watch:{\n    marginLeft: function (){\n      console.log('left change!!!')\n      this.temp();\n    }, \n    marginTop: function(){\n      console.log('top change!!!')\n      this.temp();\n    },\n    width: function(){\n      console.log('width change !!!')\n      this.temp();\n    },\n    height: function(){\n      console.log('height change !!!')\n      this.temp();\n    }\n  }\n}\n</script>\n\n<style>\n\n</style>"]}]}