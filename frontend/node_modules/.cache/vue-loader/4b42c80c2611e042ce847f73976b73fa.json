{"remainingRequest":"/Users/qiurui/Desktop/ICICLE/new_gui_2022/Smartfoodshed_VA_Flow/frontend/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/qiurui/Desktop/ICICLE/new_gui_2022/Smartfoodshed_VA_Flow/frontend/src/components/viewer/graphviewer/Inner.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/qiurui/Desktop/ICICLE/new_gui_2022/Smartfoodshed_VA_Flow/frontend/src/components/viewer/graphviewer/Inner.vue","mtime":1661282079856},{"path":"/Users/qiurui/Desktop/ICICLE/new_gui_2022/Smartfoodshed_VA_Flow/frontend/node_modules/cache-loader/dist/cjs.js","mtime":1660324545335},{"path":"/Users/qiurui/Desktop/ICICLE/new_gui_2022/Smartfoodshed_VA_Flow/frontend/node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js","mtime":1661232574882},{"path":"/Users/qiurui/Desktop/ICICLE/new_gui_2022/Smartfoodshed_VA_Flow/frontend/node_modules/cache-loader/dist/cjs.js","mtime":1660324545335},{"path":"/Users/qiurui/Desktop/ICICLE/new_gui_2022/Smartfoodshed_VA_Flow/frontend/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":1661232574916}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCAqIGFzIE5lbzRqZDMgZnJvbSAnQC9qcy9OZW80akQzLmpzJwovLyBpbXBvcnQgKiBhcyBkM0xhc3NvIGZyb20gJ2QzLWxhc3NvJwppbXBvcnQgKiBhcyBkMyBmcm9tICdkMycKaW1wb3J0ICogYXMgS0d1dGlscyBmcm9tICdAL3V0aWxzL0tHdXRpbHMuanMnCmltcG9ydCB7bWFwU3RhdGV9IGZyb20gJ3Z1ZXgnCmltcG9ydCAqIGFzIGQzdGlwIGZyb20gJ0AvdXRpbHMvZDMtdGlwJwovLyBpbXBvcnQgTm9kZVJlbE92ZXJ2aWV3IGZyb20gJ0AvY29tcG9uZW50cy9Ob2RlUmVsT3ZlcnZpZXcnCmV4cG9ydCBkZWZhdWx0ewogIHByb3BzOiBbJ2l0ZW1Qcm9wcyddLCAKICBkYXRhICgpIHsKICAgIHJldHVybiB7CiAgICAgIHNlbGVjdGVkRW50aXRpZXM6IFtdLCAKICAgICAgc2VsZWN0ZWRSZWxhdGlvbnM6IFtdLAogICAgICBjdXJyZW50RW50aXRpZXM6IFtdLCAKICAgICAgY3VycmVudFJlbGF0aW9uczogW10sCiAgICAgIGxhc3NvQ29sb3I6ICJncmV5IiwgCiAgICAgIHpvb21QYW5Db2xvcjogImdyZWVuIiwgCiAgICAgIGxhc3NvU3RhdHVzOiBmYWxzZSwKICAgICAgem9vbVBhblN0YXR1czogdHJ1ZSwgCiAgICAgIGxhc3NvOiBudWxsLCAKICAgICAgem9vbTogbnVsbCwgCiAgICAgIGxvYWRpbmdfdmFsdWU6ZmFsc2UsCiAgICAgIHRpcDogbnVsbCwKICAgICAgdXNlcl9kZWZpbmVkX3RocmU6IDUsLy8gdXNlciBkZWZpbmVkIHRocmVzaG9sZCB0byBzaG93IGhvdyBtYW55IG5vZGVzIHdlIHdhbnQgdG8gc2VlIGlmIHdlIGV4cGFuZCBvbmUgbm9kZSAKICAgICAgbmVvNGpkMyA6IG51bGwsCiAgICAgIGJydXNoZWQ6IHsiZW50aXR5X3R5cGUiOiBbXSwgInJlbGF0aW9uc2hpcF90eXBlIjogW119LAogICAgICBzaG93T3ZlcnZpZXc6ZmFsc2UsIAogICAgICBzaG93TWF4UmV0cmlldmU6ZmFsc2UsCiAgICAgIGZhdjogdHJ1ZSwKICAgICAgbWVudTogZmFsc2UsCiAgICAgIG1lc3NhZ2U6IGZhbHNlLAogICAgICBoaW50czogdHJ1ZSwKICAgICAgc2VsZWN0ZWRDb2xvcjogbnVsbCwgCiAgICAgIHNob3dSZXNUaHJlOiBmYWxzZSwgLy8gcmVzaWxpZW5jZSB0aHJlc2hvbGQgYmFyIAogICAgICByZXNpbGllbmNlX3RocmU6IDAsICAvLyBzZWxlY3RlZCB0aHJlc2hvbGQgb2YgcmVzaWxpZW5jZSAKICAgICAgLy8gbWluX3Jlc2lsaWVuY2U6IDAsCiAgICAgIG1heF9yZXNpbGllbmNlOiAxLCAvLyBtYXhpbXVtIHZhbHVlIG9mIHRoZSBzY3JvbGwgYmFyIGZvciByZXNpbGllbmNlIHRocmVzaG9sZCAKICAgIH0KICB9LAogIGNyZWF0ZWQgKCkgewogICAgLy8gdGhpcy4kc3RvcmUuZGlzcGF0Y2goJ2dldEdyYXBoT3ZlcnZpZXcnKQogICAgLy8gd2luZG93WydkMyddID0gZDMKICAgIHRoaXMudGlwID0gZDN0aXAoKQogICAgICAgICAgICAuYXR0cignY2xhc3MnLCAnZDMtdGlwJykKICAgICAgICAgICAgLm9mZnNldChbLTEwLCA4MF0pCiAgICAgICAgICAgIC5odG1sKGZ1bmN0aW9uKGQpIHsKICAgICAgICAgICAgICByZXR1cm4gIjxzdHJvbmc+UmVsYXRpb246IDwvc3Ryb25nPiIgKyBkICsgIjxicj48L3NwYW4+IjsKICAgIH0pCiAgICBjb25zb2xlLmxvZyhkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCIjZGl2X2dyYXBoIikpOwogICAgCiAgfSwKICBtZXRob2RzOiB7CiAgICBjaGFuZ2VUaHJlc2hvbGQoKXsKICAgICAgLy8gY2hhbmdlIHVzZXIgZGVmaW5lIHRocmVzaG9sZCBmb3IgaG93IG1hbnkgbm9kZXMgd2Ugd2FudCB0byBleHBhbmQgCiAgICAgIHRoaXMuJHN0b3JlLmRpc3BhdGNoKCdzZXRFeHBhbmRUaCcsIHRoaXMudXNlcl9kZWZpbmVkX3RocmUpCiAgICB9LAogICAgZHJhd05lbzRqZDMgKCkgewogICAgICB2YXIgdGhhdCA9IHRoaXMKICAgICAgZDMuc2VsZWN0QWxsKCIuZDMtdGlwIikucmVtb3ZlKCkKCgogICAgICBpZih0aGlzLm5lbzRqZDMgPT0gbnVsbCl7CiAgICAgICAgdmFyIG5lbzRqZDMgPSBOZW80amQzLmRlZmF1bHQoJyNkaXZfZ3JhcGgnLCB7CiAgICAgICAgICBuZW80akRhdGE6IHRoaXMuaXRlbVByb3BzLmdyYXBoRGF0YSwKICAgICAgICAgIG5vZGVSYWRpdXM6IDMwLAogICAgICAgICAgaW5mb1BhbmVsOiBmYWxzZSwKCiAgICAgICAgICBvbk5vZGVEb3VibGVDbGljazogZnVuY3Rpb24gKG5vZGUpIHsKICAgICAgICAgICAgLy8gdGhhdC5kYmNsaWNrKG5vZGUpCiAgICAgICAgICB9LAogICAgICAgICAgb25Ob2RlTW91c2VFbnRlcjogZnVuY3Rpb24gKG5vZGUpIHsKICAgICAgICAgICAgdGhhdC5ob3Zlcl9ub2RlID0gbm9kZQogICAgICAgICAgICBjb25zb2xlLmxvZygnaG92ZXJpbmcnLCBub2RlKQogICAgICAgICAgfSwKICAgICAgICAgIG9uTm9kZUNsaWNrOiBmdW5jdGlvbiAobm9kZSxpZHgpIHsKICAgICAgICAgICAgLy8gY29uc29sZS5sb2cobm9kZSxpZCkKICAgICAgICAgICAgLy8gQ3JlYXRlIGR1bW15IGRhdGEKICAgICAgICAgICAgLy8gY29uc29sZS5sb2cobm9kZSkKICAgICAgICAgICAgaWYgKG5vZGUuc2hvd0J0blBhbmVsID09IHRydWUpIHsKICAgICAgICAgICAgICBkMy5zZWxlY3QoYCNub2RlLSR7bm9kZS5pZH1gKS5zZWxlY3RBbGwoJy5jaXJjbGUtYnV0dG9uJykucmVtb3ZlKCkKICAgICAgICAgICAgICBub2RlLnNob3dCdG5QYW5lbCA9IGZhbHNlCiAgICAgICAgICAgICAgcmV0dXJuCiAgICAgICAgICAgIH0KICAgICAgICAgICAgbm9kZS5zaG93QnRuUGFuZWwgPSB0cnVlIAogICAgICAgICAgICB2YXIgZGF0YSA9IHsgYjoge2FjdGlvbjogInJlbW92ZSIsIHZhbHVlOiAxMCwgcG9zOjB9IH0gLy8gb25seSB0d28gb3BlcmF0aW9ucyAKCiAgICAgICAgICAgIGlmKHRoYXQuaXRlbVByb3BzLnJlbGF0aW9uU3RhdHVzUmVhZHk9PWZhbHNlKXsKICAgICAgICAgICAgICAvLyByZW5kZXIgdGhlIGxvYWRpbmcgcGFuZWwgCiAgICAgICAgICAgICAgY29uc29sZS5sb2coJ25vbm9ub25vJykKICAgICAgICAgICAgICAvLwogICAgICAgICAgICB9ZWxzZXsKICAgICAgICAgICAgICBpZih0aGF0Lml0ZW1Qcm9wcy5yZWxhdGlvblN0YXR1c1JlYWR5PT0iZnJvbU1hcCIpewogICAgICAgICAgICAgIHZhciByZWxhdGlvbl9kYXRhID0gbm9kZVsncmVsYXRpb25zaGlwX3R5cGVzJ10KICAgICAgICAgICAgfQogICAgICAgICAgICBlbHNlewogICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKHRoYXQucmVsYXRpb25UeXBlRGF0YVsncmVzdWx0cyddWzBdWydkYXRhJ11bMF1bJ2dyYXBoJ11bJ25vZGVzJ10pCiAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coaWR4KQogICAgICAgICAgICAgIHZhciBmaWx0ZXJlZF9yZWxhdGlvbl90eXBlX2RhdGEgPSB0aGF0LnJlbGF0aW9uVHlwZURhdGFbJ3Jlc3VsdHMnXVswXVsnZGF0YSddWzBdWydncmFwaCddWydub2RlcyddLmZpbHRlcihkID0+IGQuaWQgPT0gbm9kZS5pZCkKICAgICAgICAgICAgICB2YXIgcmVsYXRpb25fZGF0YSA9IGZpbHRlcmVkX3JlbGF0aW9uX3R5cGVfZGF0YVswXVsncmVsYXRpb25zaGlwX3R5cGVzJ10KICAgICAgICAgICAgICAvLyBnZXQgdGhlIHN1bSBvZiBhbGwgcmVsIGNvdW50cyAKICAgICAgICAgICAgfQogICAgICAgICAgICBjb25zdCBzdW1WYWx1ZXMgPSBvYmogPT4gT2JqZWN0LnZhbHVlcyhvYmopLnJlZHVjZSgoYSwgYikgPT4gYSArIGIpOwogICAgICAgICAgICAgIGNvbnN0IHRvdGFsX2MgID0gc3VtVmFsdWVzKHJlbGF0aW9uX2RhdGEpCiAgICAgICAgICAgICAgLy8gZ2VuZXJhdGUgdGhlIGRvdW50IGRhdGEKICAgICAgICAgICAgICBmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyhyZWxhdGlvbl9kYXRhKSkgewogICAgICAgICAgICAgICAgZGF0YVtrZXldID0ge2FjdGlvbjoga2V5LCB2YWx1ZTogKHZhbHVlL3RvdGFsX2MpKjMwfQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZygiY2hlY2sgZGF0YSIpCiAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coZGF0YSkKICAgICAgICAgICAgfSAKICAgICAgICAgICAgCiAgICAgICAgICAgIC8vIHNvcnRpbmcgCiAgICAgICAgICAgIAogICAgICAgICAgICBsZXQgdGhpc19nID0gZDMuc2VsZWN0KGAjbm9kZS0ke25vZGUuaWR9YCkKCiAgICAgICAgICAgIC8vIGxldCBhcHBlbmRfZyA9IHRoaXNfZy5hcHBlbmQoJ2cnKS5hdHRyKCJ0cmFuc2Zvcm0iLCAidHJhbnNsYXRlKCIgKyBub2RlWyd4J10gKyAiLCIgKyBub2RlWyd5J10gKyAiKSIpOwogICAgICAgICAgICBsZXQgYXBwZW5kX2cgPSB0aGlzX2cKCiAgICAgICAgICAgICAgLy8gQ29tcHV0ZSB0aGUgcG9zaXRpb24gb2YgZWFjaCBncm91cCBvbiB0aGUgcGllOgogICAgICAgICAgICB2YXIgcGllID0gZDMucGllKCkKICAgICAgICAgICAgICAuc29ydChudWxsKSAvL2F2b2lkaW5nIHRvIHNvcnQgdGhlIHBpZSwgbWFrZSBzdXJlIHRoZSByZW1vdmUgYnV0dG9uIGluIHRoZSBzYW1lIHBvc2l0aW9uIAogICAgICAgICAgICAgIC52YWx1ZShmdW5jdGlvbihkKSB7cmV0dXJuIGQudmFsdWUudmFsdWU7IH0pCiAgICAgICAgICAgIHZhciBkYXRhX3JlYWR5ID0gcGllKGQzLmVudHJpZXMoZGF0YSkpCiAgICAgICAgICAgIAoKICAgICAgCiAgICAgICAgICAgICAgLy8gcmVtb3ZhbCAvIGV4cGFuZCBvcGVyYXRpb25zIAogICAgICAgICAgICB2YXIgb3BlcmF0aW9uX2J1dHRvbnNfZyA9IGFwcGVuZF9nLnNlbGVjdEFsbCgnd2hhdGV2ZXInKQogICAgICAgICAgICAgIC5kYXRhKGRhdGFfcmVhZHkpCiAgICAgICAgICAgICAgLmVudGVyKCkKICAgICAgICAgICAgCiAgICAgICAgICAgIHZhciBvcGVyYXRpb25fYnV0dG9ucyA9IG9wZXJhdGlvbl9idXR0b25zX2cuYXBwZW5kKCdwYXRoJykKICAgICAgICAgICAgICAuYXR0cignZCcsIGQzLmFyYygpCiAgICAgICAgICAgICAgICAuaW5uZXJSYWRpdXMoMzApICAgICAgICAgLy8gVGhpcyBpcyB0aGUgc2l6ZSBvZiB0aGUgZG9udXQgaG9sZQogICAgICAgICAgICAgICAgLm91dGVyUmFkaXVzKDUwKQogICAgICAgICAgICAgICkKICAgICAgICAgICAgICAuYXR0cigiY2xhc3MiLCAiY2lyY2xlLWJ1dHRvbiIpCiAgICAgICAgICAgICAgLmF0dHIoJ2ZpbGwnLCBmdW5jdGlvbihkLGkpeyAKICAgICAgICAgICAgICAgIGlmKGk9PTApewogICAgICAgICAgICAgICAgICByZXR1cm4gIiNCQjY0NjQiCiAgICAgICAgICAgICAgICB9ZWxzZXsKICAgICAgICAgICAgICAgICAgcmV0dXJuICIjOTRCNDlGIgogICAgICAgICAgICAgICAgfSAKICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgIC8vIC5hdHRyKCJzdHJva2UiLCAiYmxhY2siKQogICAgICAgICAgICAgIC5zdHlsZSgic3Ryb2tlLXdpZHRoIiwgIjJweCIpCiAgICAgICAgICAgICAgLnN0eWxlKCJzdHJva2UiLCAid2hpdGUiKQogICAgICAgICAgICAgIC5zdHlsZSgib3BhY2l0eSIsIDAuNykKICAgICAgICAgICAgICAuc3R5bGUoJ2N1cnNvcicsJ3BvaW50ZXInKQogICAgICAgICAgICAgIC5hdHRyKCd0aXRsZScsJ3Rlc3QnKQoKICAgICAgICAgICAgdmFyIGhpZGVfaWNvbiA9IG9wZXJhdGlvbl9idXR0b25zX2cuYXBwZW5kKCdwYXRoJykgCiAgICAgICAgICAgICAgLmF0dHIoJ2QnLCAnTTEyLDIwQzcuNTksMjAgNCwxNi40MSA0LDEyQzQsNy41OSA3LjU5LDQgMTIsNEMxNi40MSw0IDIwLDcuNTkgMjAsMTJDMjAsMTYuNDEgMTYuNDEsMjAgMTIsMjBNMTIsMkExMCwxMCAwIDAsMCAyLDEyQTEwLDEwIDAgMCwwIDEyLDIyQTEwLDEwIDAgMCwwIDIyLDEyQTEwLDEwIDAgMCwwIDEyLDJNNywxM0gxN1YxMUg3JykKICAgICAgICAgICAgICAuYXR0cigidHJhbnNmb3JtIiwgJ3RyYW5zbGF0ZSgyMCwgLTM1KSBzY2FsZSgwLjcpJykKICAgICAgICAgICAgICAuYXR0cigiY2xhc3MiLCAiY2lyY2xlLWJ1dHRvbiIpCiAgICAgICAgICAgIAogICAgICAgICAgICAKCiAgICAgICAgICAgIGQzLnNlbGVjdCgnc3ZnJykuY2FsbCh0aGF0LnRpcCkKICAgICAgICAgICAgICAvLyBob3ZlcmluZyBlZmZlY3QgCiAgICAgICAgICAgIG9wZXJhdGlvbl9idXR0b25zLm9uKCdtb3VzZW92ZXInLCBmdW5jdGlvbihwKXsKICAgICAgICAgICAgICAgIGQzLnNlbGVjdCh0aGlzKS5zdHlsZSgnb3BhY2l0eScsMSkKICAgICAgICAgICAgICAgIGxldCByZWwgPSBwWydkYXRhJ11bJ3ZhbHVlJ11bJ2FjdGlvbiddCiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhyZWwpCiAgICAgICAgICAgICAgICB0aGF0LnRpcC5zaG93KHJlbCk7CiAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAub24oJ21vdXNlb3V0JyxmdW5jdGlvbihwKXsKICAgICAgICAgICAgICAgIGQzLnNlbGVjdCh0aGlzKS5zdHlsZSgnb3BhY2l0eScsMC43KQogICAgICAgICAgICAgICAgbGV0IHJlbCA9IHBbJ2RhdGEnXVsndmFsdWUnXVsnYWN0aW9uJ10KICAgICAgICAgICAgICAgIHRoYXQudGlwLmhpZGUocmVsKTsKICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgIC5vbignY2xpY2snLCBmdW5jdGlvbihkLGkpewogICAgICAgICAgICAgICAgbGV0IGNsaWNrZWRfbm9kZV9pZCA9IG5vZGVbJ2lkJ10KICAgICAgICAgICAgICAgIGNvbnN0IGFjdGlvbiA9IGQuZGF0YS52YWx1ZS5hY3Rpb24gCiAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhkKQogICAgICAgICAgICAgICAgdGhhdC50aXAuaGlkZShkLmRhdGEudmFsdWUuYWN0aW9uKQogICAgICAgICAgICAgICAgaWYgKGFjdGlvbiA9PSAicmVtb3ZlIil7CiAgICAgICAgICAgICAgICAgIC8vIHRpcC5oaWRlKGQuZGF0YS52YWx1ZS5hY3Rpb24pCiAgICAgICAgICAgICAgICAgIHRoYXQuJHN0b3JlLmRpc3BhdGNoKCJub2RlX3JlbW92ZSIsIHtub2RlX2lkOiBjbGlja2VkX25vZGVfaWR9KQogICAgICAgICAgICAgICAgfWVsc2UgewogICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coZC5kYXRhLnZhbHVlLmFjdGlvbikKICAgICAgICAgICAgICAgICAgdGhhdC4kc3RvcmUuZGlzcGF0Y2goIm5vZGVfZXhwYW5kIiwge25vZGVfaWQ6IGNsaWNrZWRfbm9kZV9pZCwgcmVsYXRpb246IGQuZGF0YS5rZXl9KQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0pCiAgICAgICAgICB9CiAgICAgIH0pCiAgICAgICAgdGhpcy5uZW80amQzID0gbmVvNGpkMwogICAgICB9ZWxzZXsKICAgICAgICB0aGlzLm5lbzRqZDMudXBkYXRlV2l0aE5lbzRqRGF0YSh0aGlzLml0ZW1Qcm9wcy5ncmFwaERhdGEpCiAgICAgIH0KICAgICAgaWYgKHRoYXQubGFzc29TdGF0dXMpIHsKICAgICAgICB0aGF0LmRpc2FibGVab29tKCkKICAgICAgICB0aGF0LmVuYWJsZUxhc3NvKCkKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGF0LmRpc2FibGVMYXNzbygpIAogICAgICAgIHRoYXQuZW5hYmxlWm9vbVBhbigpCiAgICAgIH0KICAgICAgLy8gdGhhdC5lbmFibGVMYXNzbygpCiAgICAgIAogICAgfSwKICAgIHJlc2V0R3JhcGhUYWJsZUhhbmRsZXIoKXsKICAgICAgdGhpcy4kc3RvcmUuZGlzcGF0Y2goInJlc2V0VGFibGVHcmFwaCIpCiAgICB9LAogICAgdG9nZ2xlWm9vbVBhbkxhc3NvKCl7CiAgICAgIHRoaXMuem9vbVBhblN0YXR1cyA9ICF0aGlzLnpvb21QYW5TdGF0dXMgCiAgICAgIHRoaXMubGFzc29TdGF0dXMgPSAhdGhpcy5sYXNzb1N0YXR1cwogICAgICB0aGlzLnpvb21QYW5Db2xvciA9IHRoaXMuem9vbVBhblN0YXR1cz8iZ3JlZW4iOiJncmV5IgogICAgICB0aGlzLmxhc3NvQ29sb3IgPSB0aGlzLmxhc3NvU3RhdHVzPyJncmVlbiI6ImdyZXkiCiAgICB9LCAKICAgIHpvb21QYW5Ub2dnbGVIYW5kbGVyKCkgewogICAgICBpZiAoIXRoaXMuem9vbVBhblN0YXR1cykgewogICAgICAgIHRoaXMudG9nZ2xlWm9vbVBhbkxhc3NvKCkgCiAgICAgICAgdGhpcy5kaXNhYmxlTGFzc28oKQogICAgICAgIHRoaXMuZW5hYmxlWm9vbVBhbigpCiAgICAgIH0KICAgICAgCiAgICB9LCAKICAgIGxhc3NvVG9nZ2xlSGFuZGxlcigpewogICAgICBpZiAoIXRoaXMubGFzc29TdGF0dXMpIHsKICAgICAgICB0aGlzLnRvZ2dsZVpvb21QYW5MYXNzbygpCiAgICAgICAgdGhpcy5kaXNhYmxlWm9vbSgpCiAgICAgICAgdGhpcy5lbmFibGVMYXNzbygpCiAgICAgICAgLy8gdGhpcy5lbmFibGVab29tUGFuKCkKICAgICAgfQogICAgICAKICAgIH0sCiAgICBlbmFibGVMYXNzbygpewogICAgICBjb25zdCBzdmcgPSBkMy5zZWxlY3QoJyNkaXZfZ3JhcGgnKS5zZWxlY3QoInN2ZyIpCiAgICAgIHZhciBjaXJjbGVzX3F1ZXN0aW9uID0gc3ZnLnNlbGVjdEFsbCgnLm91dGxpbmUnKQogICAgICBsZXQgdGhhdCA9IHRoaXMKICAgICAgdmFyIGxhc3NvX3N0YXJ0ID0gZnVuY3Rpb24gKCkgewogICAgICAgIGNvbnNvbGUubG9nKDExMSkKICAgICAgICBsYXNzby5pdGVtcygpCiAgICAgICAgICAuYXR0cignZmlsbCcsICJncmVlbiIpCiAgICAgICAgICAuY2xhc3NlZCgnbm90X3Bvc3NpYmxlJywgdHJ1ZSkKICAgICAgICAgIC5jbGFzc2VkKCdzZWxlY3RlZCcsIGZhbHNlKQogICAgICB9CiAgICAgIHZhciBsYXNzb19kcmF3ID0gZnVuY3Rpb24gKCkgewogICAgICAgIC8vIFN0eWxlIHRoZSBwb3NzaWJsZSBkb3RzCiAgICAgICAgbGFzc28ucG9zc2libGVJdGVtcygpCiAgICAgICAgICAuY2xhc3NlZCgnbm90X3Bvc3NpYmxlJywgZmFsc2UpCiAgICAgICAgICAuY2xhc3NlZCgncG9zc2libGUnLCB0cnVlKQoKICAgICAgICAvLyBTdHlsZSB0aGUgbm90IHBvc3NpYmxlIGRvdAogICAgICAgIGxhc3NvLm5vdFBvc3NpYmxlSXRlbXMoKQogICAgICAgICAgLmNsYXNzZWQoJ25vdF9wb3NzaWJsZScsIHRydWUpCiAgICAgICAgICAuY2xhc3NlZCgncG9zc2libGUnLCBmYWxzZSkKICAgICAgfQogICAgICB2YXIgbGFzc29fZW5kID0gZnVuY3Rpb24gKCkgewogICAgICAgIGxhc3NvLml0ZW1zKCkKICAgICAgICAgIC5jbGFzc2VkKCdub3RfcG9zc2libGUnLCBmYWxzZSkKICAgICAgICAgIC5jbGFzc2VkKCdwb3NzaWJsZScsIGZhbHNlKQoKICAgICAgICBsYXNzby5zZWxlY3RlZEl0ZW1zKCkKICAgICAgICAgIC5jbGFzc2VkKCdzZWxlY3RlZCcsIHRydWUpCiAgICAgICAgdGhhdC5zZWxlY3RlZEVudGl0aWVzLnNwbGljZSgwLCB0aGF0LnNlbGVjdGVkRW50aXRpZXMubGVuZ3RoKQogICAgICAgIHRoYXQuc2VsZWN0ZWRSZWxhdGlvbnMuc3BsaWNlKDAsIHRoYXQuc2VsZWN0ZWRSZWxhdGlvbnMubGVuZ3RoKSAKICAgICAgICBsYXNzby5zZWxlY3RlZEl0ZW1zKCkuZWFjaChmdW5jdGlvbihkKXsKICAgICAgICAgIGNvbnN0IGxhYmVsID0gdGhpcy5ub2RlTmFtZSAKICAgICAgICAgIAogICAgICAgICAgaWYgKGxhYmVsID09ICJjaXJjbGUiKSB7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKCJhZGRpbmcgZW50aXR5IiArIGQuaWQpCiAgICAgICAgICAgIHRoYXQuc2VsZWN0ZWRFbnRpdGllcy5wdXNoKGQuaWQpCiAgICAgICAgICB9ZWxzZSB7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKCJhZGRpbmcgUmVsYXRpb25zIiArIGQuaWQpCiAgICAgICAgICAgIHRoYXQuc2VsZWN0ZWRSZWxhdGlvbnMucHVzaChkLmlkKQogICAgICAgICAgfQogICAgICAgICAgCiAgICAgICAgfSkKICAgICAgICAvLyBSZXNldCB0aGUgc3R5bGUgb2YgdGhlIG5vdCBzZWxlY3RlZCBkb3RzCiAgICAgICAgLy8gbGFzc28ubm90U2VsZWN0ZWRJdGVtcygpCiAgICAgICAgCiAgICAgIH0KICAgICAgdmFyIGxhc3NvID0gZDNMYXNzby5sYXNzbygpCiAgICAgICAgLmNsb3NlUGF0aFNlbGVjdCh0cnVlKQogICAgICAgIC5jbG9zZVBhdGhEaXN0YW5jZSgxMDApCiAgICAgICAgLml0ZW1zKGNpcmNsZXNfcXVlc3Rpb24pCiAgICAgICAgLnRhcmdldEFyZWEoc3ZnKQogICAgICAgIC5vbignc3RhcnQnLCBsYXNzb19zdGFydCkKICAgICAgICAub24oJ2RyYXcnLCBsYXNzb19kcmF3KQogICAgICAgIC5vbignZW5kJywgbGFzc29fZW5kKQoKICAgICAgc3ZnLmNhbGwobGFzc28pCiAgICB9LCAKICAgIGRpc2FibGVMYXNzbygpIHsKICAgICAgY29uc3Qgc3ZnID0gZDMuc2VsZWN0KCcjZGl2X2dyYXBoJykuc2VsZWN0KCJzdmciKSAKICAgICAgc3ZnLm9uKCIuZHJhZ3N0YXJ0IiwgbnVsbCk7CiAgICAgIHN2Zy5vbigiLmRyYWciLCBudWxsKTsKICAgICAgc3ZnLm9uKCIuZHJhZ2VuZCIsIG51bGwpOwogICAgfSwgCiAgICBlbmFibGVab29tUGFuKCl7CiAgICAgIGNvbnN0IHN2ZyA9IGQzLnNlbGVjdCgnI2Rpdl9ncmFwaCcpLnNlbGVjdCgic3ZnIikgCiAgICAgIHN2Zy5jYWxsKGQzLnpvb20oKS5vbignem9vbScsIGZ1bmN0aW9uICgpIHsKICAgICAgICB2YXIgc2NhbGUgPSBkMy5ldmVudC50cmFuc2Zvcm0uaywKICAgICAgICAgIHRyYW5zbGF0ZSA9IFtkMy5ldmVudC50cmFuc2Zvcm0ueCwgZDMuZXZlbnQudHJhbnNmb3JtLnldCiAgICAgICAgY29uc29sZS5sb2coMSkKICAgICAgICBjb25zdCBnID0gc3ZnLnNlbGVjdCgiZyIpCiAgICAgICAgZy5hdHRyKCd0cmFuc2Zvcm0nLCAndHJhbnNsYXRlKCcgKyB0cmFuc2xhdGVbMF0gKyAnLCAnICsgdHJhbnNsYXRlWzFdICsgJykgc2NhbGUoJyArIHNjYWxlICsgJyknKQogICAgICB9KSkKICAgICAgLm9uKCdkYmxjbGljay56b29tJywgbnVsbCkKICAgIH0sCiAgICBkaXNhYmxlWm9vbSgpIHsKICAgICAgY29uc3Qgc3ZnID0gZDMuc2VsZWN0KCcjZGl2X2dyYXBoJykuc2VsZWN0KCJzdmciKSAKICAgICAgc3ZnLm9uKCcuem9vbScsIG51bGwpCiAgICB9LAogICAgdG9nZ2xlT3ZlcnZpZXdQYW5lbChmb2N1cyl7CiAgICAgIGlmIChmb2N1cyA9PSAiZW50aXR5IikgewogICAgICAgIGNvbnN0IGNvbnRhaW5lckZvY3VzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiI2Rpdl9ub2RlX292ZXJ2aWV3IikKICAgICAgICBjb25zdCBjb250YWluZXJVbkZvY3VzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcigiI2Rpdl9saW5rX292ZXJ2aWV3IikKICAgICAgICBjb250YWluZXJGb2N1cy5zdHlsZS5ib3JkZXIgPSAiMnB4IHNvbGlkIGdyZWVuIgogICAgICAgIGNvbnRhaW5lclVuRm9jdXMuc3R5bGUuYm9yZGVyID0gIk5vbmUiCiAgICAgIH0gZWxzZXsKICAgICAgICBjb25zdCBjb250YWluZXJGb2N1cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoIiNkaXZfbGlua19vdmVydmlldyIpCiAgICAgICAgY29uc3QgY29udGFpbmVyVW5Gb2N1cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoIiNkaXZfbm9kZV9vdmVydmlldyIpCiAgICAgICAgY29udGFpbmVyRm9jdXMuc3R5bGUuYm9yZGVyID0gIjJweCBzb2xpZCBncmVlbiIKICAgICAgICBjb250YWluZXJVbkZvY3VzLnN0eWxlLmJvcmRlciA9ICJOb25lIgogICAgICB9CiAgICB9LAogICAgcmV0cmlldmVfdHlwZXNfbm9kZXMoKXsKICAgICAgdGhpcy4kc3RvcmUuZGlzcGF0Y2goInJldHJpZXZlTm9kZXNMaW5rc1dpdGhUeXBlcyIsIHRoaXMuYnJ1c2hlZCkKICAgIH0sCiAgICAvLyBjaXJjbGVVcGRhdGVNYXRjaENvbG9yKCl7CiAgICAvLyAgIGlmICh0aGlzLmNvbG9yTWFwcGluZykgewogICAgLy8gICAgIE9iamVjdC5rZXlzKHRoaXMuY29sb3JNYXBwaW5nKS5mb3JFYWNoKGNhdGVnb3J5ID0+IHsKICAgIC8vICAgICAgIGQzLnNlbGVjdEFsbCgnLicrY2F0ZWdvcnkpLnN0eWxlKCdmaWxsJywgdGhpcy5jb2xvck1hcHBpbmdbY2F0ZWdvcnldKQogICAgLy8gICAgIH0pCiAgICAvLyAgIH0KICAgIC8vIH0sCiAgICByZWNvbG9yTm9kZSgpewogICAgICB2YXIgdGhhdCA9IHRoaXMKICAgICAgZDMuc2VsZWN0KCcjZGl2X2dyYXBoJykuc2VsZWN0QWxsKCdjaXJjbGUnKS5zdHlsZSgnZmlsbCcsZnVuY3Rpb24oZCl7CiAgICAgIC8vIGNoZWNrIGNvbGQgY2hhaW4gZGF0YQogICAgICAgIGlmKCdyZXNpbGllbmNlJyBpbiBkWydwcm9wZXJ0aWVzJ10pewogICAgICAgICAgY29uc29sZS5sb2coZFsncHJvcGVydGllcyddKQogICAgICAgICAgaWYoZFsncHJvcGVydGllcyddWydyZXNpbGllbmNlJ10+PXRoYXQucmVzaWxpZW5jZV90aHJlKXsKICAgICAgICAgICAgaWYodGhhdC5zZWxlY3RlZENvbG9yKXsKICAgICAgICAgICAgICByZXR1cm4gdGhhdC5zZWxlY3RlZENvbG9yLmhleAogICAgICAgICAgICB9ZWxzZXsKICAgICAgICAgICAgICByZXR1cm4gIiM3OGIzZDAiCiAgICAgICAgICAgIH0KICAgICAgICAgICAgCiAgICAgICAgICB9ZWxzZXsKICAgICAgICAgICAgcmV0dXJuICIjYjNiM2IzIgogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSkKICAgIH0KICB9LAogIHdhdGNoOiB7CiAgICBzZWxlY3RlZENvbG9yKCkgewogICAgICB0aGlzLnJlY29sb3JOb2RlKCkKICAgICAgLy8gZDMuc2VsZWN0QWxsKCdjaXJjbGUnKS5zdHlsZSgnZmlsbCcsIHRoaXMuc2VsZWN0ZWRDb2xvci5oZXgpCiAgICB9LAogICAgcmVzaWxpZW5jZV90aHJlKCl7CiAgICAgIHRoaXMucmVjb2xvck5vZGUoKQogICAgfSwKICAgICdpdGVtUHJvcHMuZ3JhcGhEYXRhJygpIHsKICAgICAgdmFyIGFsbF9yZXNpbGllbmNlID0gW10KICAgICAgdGhpcy5pdGVtUHJvcHMuZ3JhcGhEYXRhWydyZXN1bHRzJ11bMF1bJ2RhdGEnXVswXVsnZ3JhcGgnXVsnbm9kZXMnXS5mb3JFYWNoKGZ1bmN0aW9uIChkKSB7CiAgICAgICAgZFsnc3RhdHVzJ10gPSAndW5jbGlja2VkJwogICAgICAgIC8vIGNoZWNrIGlmIHRoaXMgaXMgY29sZCBjaGFpbiBkYXRhIG9yIG5vdCAKICAgICAgICBpZigicmVzaWxpZW5jZSIgaW4gZFsncHJvcGVydGllcyddKXsKICAgICAgICAgIGFsbF9yZXNpbGllbmNlLnB1c2gocGFyc2VGbG9hdChkWydwcm9wZXJ0aWVzJ11bJ3Jlc2lsaWVuY2UnXSkpCiAgICAgICAgfQogICAgICAgIAogICAgICB9KQogICAgICAvLyB0aGlzLm1pbl9yZXNpbGllbmNlID0gZDMubWluKGFsbF9yZXNpbGllbmNlKQogICAgICB0aGlzLm1heF9yZXNpbGllbmNlID0gZDMubWF4KGFsbF9yZXNpbGllbmNlKQogICAgICBjb25zb2xlLmxvZyh0aGlzLm1heF9yZXNpbGllbmNlKQogICAgICAvL2luaXRhbCB0aGUgc2VsZWN0ZWQgcmVzaWxpZW5jZQogICAgICBLR3V0aWxzLmdyYXBoRGF0YVBhcnNpbmcodGhpcy5pdGVtUHJvcHMuZ3JhcGhEYXRhLCB0aGlzLmN1cnJlbnRFbnRpdGllcywgdGhpcy5jdXJyZW50UmVsYXRpb25zKQogICAgICB0aGlzLmRyYXdOZW80amQzKCkKICAgICAgLy8gdGhpcy5jaXJjbGVVcGRhdGVNYXRjaENvbG9yKCkKICAgIH0sIAogICAgc2VsZWN0ZWRFbnRpdGllcyh2YWwpIHsKICAgICAgaWYgKHZhbC5sZW5ndGggPiAwKSB7CiAgICAgICAgY29uc29sZS5sb2coInJldHJpZXZpbmcgZGF0YSBub3chISEiKQogICAgICAgIGNvbnNvbGUubG9nKHZhbC5sZW5ndGgpCiAgICAgICAgY29uc29sZS5sb2codGhpcy5zZWxlY3RlZEVudGl0aWVzKQogICAgICAgIGNvbnNvbGUubG9nKHRoaXMuc2VsZWN0ZWRSZWxhdGlvbnMpCiAgICAgICAgY29uc29sZS5sb2coIioqKioqKioqKioqKioqKioiKQogICAgICAgIGNvbnNvbGUubG9nKHZhbCkKICAgICAgICB0aGlzLiRzdG9yZS5kaXNwYXRjaCgicmV0cmlldmVTdWJUYWJsZSIsIHtlbnRpdGllczogdGhpcy5zZWxlY3RlZEVudGl0aWVzLCByZWxhdGlvbnM6IHRoaXMuc2VsZWN0ZWRSZWxhdGlvbnN9KQogICAgICAgIHRoaXMuJHN0b3JlLmRpc3BhdGNoKCJyZXRyaWV2ZU5vZGVHZW8iLCB7bm9kZTogdGhpcy5zZWxlY3RlZEVudGl0aWVzfSkKICAgICAgfQogICAgfSwgCiAgICBzZWxlY3RlZFJlbGF0aW9ucyh2YWwpewogICAgICBpZiAodmFsLmxlbmd0aCA+IDApIHsKICAgICAgICBjb25zb2xlLmxvZygiKioqKioqKioqKioqKioqKiIpCiAgICAgICAgY29uc29sZS5sb2codmFsLmxlbmd0aCkKICAgICAgICBjb25zb2xlLmxvZyh2YWwpIAogICAgICAgIGNvbnNvbGUubG9nKCJyZXRyaWV2aW5nIGRhdGEgbm93ISEhIikKICAgICAgICBjb25zb2xlLmxvZyh0aGlzLnNlbGVjdGVkRW50aXRpZXMpCiAgICAgICAgY29uc29sZS5sb2codGhpcy5zZWxlY3RlZFJlbGF0aW9ucykKICAgICAgICB0aGlzLiRzdG9yZS5kaXNwYXRjaCgicmV0cmlldmVTdWJUYWJsZSIsIHtlbnRpdGllczogdGhpcy5zZWxlY3RlZEVudGl0aWVzLCByZWxhdGlvbnM6IHRoaXMuc2VsZWN0ZWRSZWxhdGlvbnN9KQogICAgICB9CiAgICB9LCAKICAgIGJydXNoZWQ6ewogICAgICBoYW5kbGVyKHZhbCl7CiAgICAgICAgICBjb25zb2xlLmxvZyh2YWwpOwogICAgICB9LAogICAgICBkZWVwOnRydWUgCiAgICB9LAogICAgJ2l0ZW1Qcm9wcy5yZWxhdGlvblN0YXR1c1JlYWR5JzogZnVuY3Rpb24gKHZhbCl7CiAgICAgIGNvbnNvbGUubG9nKCJyZWxhdGlvbiBzdGF0dXM6ICIgKyB2YWwpIAogICAgfSwKICAgICdpdGVtUHJvcHMucmVsYXRpb25UeXBlRGF0YSc6ZnVuY3Rpb24odmFsKSB7CiAgICAgIGlmKHRoaXMuaXRlbVByb3BzLnJlbGF0aW9uU3RhdHVzUmVhZHkpIHsKICAgICAgICBjb25zb2xlLmxvZygicmVsYXRpb24gdHlwZSBkYXRhIGlzIHJlYWR5IikKCiAgICAgIH1lbHNlewogICAgICAgIGNvbnNvbGUubG9nKCJyZWxhdGlvbiB0eXBlIGRhdGEgaXMgbm90IHJlYWR5IHlldCEiKQogICAgICB9CiAgICB9LAogICAgJ2l0ZW1Qcm9wcy5sb2FkaW5nJzogZnVuY3Rpb24odmFsKXsKICAgICAgdGhpcy5sb2FkaW5nX3ZhbHVlID0gdmFsCiAgICB9LAogICAgCiAgfSwKICBjb21wdXRlZDogewogICAgLy8gSEVJR0hUICgpIHsKICAgIC8vICAgcmV0dXJuIHdpbmRvdy5pbm5lckhlaWdodCowLjcgKyAncHgnCiAgICAvLyB9LAogICAgLy8gT1ZFUlZJRVdfSEVJR0hUKCl7CiAgICAvLyAgIHJldHVybiB3aW5kb3cuaW5uZXJIZWlnaHQqMC4zICsgJ3B4JwogICAgLy8gfQogIH0KfQo="},{"version":3,"sources":["Inner.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0KA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;;;AAIA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;;;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Inner.vue","sourceRoot":"src/components/viewer/graphviewer","sourcesContent":["<template>\n    <div class=\"card-inner\">\n        <div\n          class=\"graph-btn-container\"\n        >\n        <v-container>\n        <v-row no-gutters\n          justify='space-between'\n        >\n          <v-col\n            key=\"0\"\n            sm=\"3\"\n            cols=\"11\"\n            >\n            <v-tooltip bottom>\n              <template v-slot:activator=\"{ on, attrs }\">\n                <v-btn \n                  class=\"ma-2 menu-btn\"\n                  icon\n                  text\n                  @click=\"resetGraphTableHandler\"\n                >\n                  <v-icon\n                    v-bind=\"attrs\"\n                    v-on=\"on\"\n                  >\n                    mdi-refresh\n                  </v-icon>\n                </v-btn>\n              </template>\n              <span>Reset</span>\n            </v-tooltip>\n            <!-- <v-btn\n              small\n              class=\"kg-view-btn\"\n              @click=\"resetGraphTableHandler\"\n              >\n              Reset\n            </v-btn> -->\n            <v-tooltip bottom>\n              <template v-slot:activator=\"{ on, attrs }\">\n                <v-btn \n                  class=\"ma-2 menu-btn\"\n                  icon\n                  text\n                  :color=\"zoomPanColor\"\n                  @click=\"zoomPanToggleHandler\"\n                >\n                  <v-icon\n                    v-bind=\"attrs\"\n                    v-on=\"on\"\n                  >\n                    mdi-arrow-expand-all\n                  </v-icon>\n                </v-btn>\n              </template>\n              <span>ZOOM</span>\n            </v-tooltip>\n\n            \n            <v-tooltip bottom>\n              <template v-slot:activator=\"{ on, attrs }\">\n                <v-btn \n                  class=\"ma-2 menu-btn\"\n                  icon\n                  text\n                  :color=\"lassoColor\"\n                  @click=\"lassoToggleHandler\"\n                >\n                  <v-icon\n                    v-bind=\"attrs\"\n                    v-on=\"on\"\n                  >\n                    mdi-lasso\n                  </v-icon>\n                </v-btn>\n              </template>\n              <span>LASSO</span>\n            </v-tooltip>\n            <v-tooltip bottom>\n              <template v-slot:activator=\"{ on, attrs }\">\n                <v-btn \n                  class=\"ma-2 menu-btn\"\n                  icon\n                  text\n                  @click=\"showOverview = !showOverview\"\n                >\n                  <v-icon\n                    v-bind=\"attrs\"\n                    v-on=\"on\"\n                  >\n                    mdi-chart-bar\n                  </v-icon>\n                </v-btn>\n              </template>\n              <span>Node Link Overview</span>\n            </v-tooltip>\n\n            <v-tooltip bottom>\n              <template v-slot:activator=\"{ on, attrs }\">\n                <v-btn \n                  class=\"ma-2 menu-btn\"\n                  icon\n                  text\n                  @click=\"showMaxRetrieve = !showMaxRetrieve\"\n                >\n                  <v-icon\n                    v-bind=\"attrs\"\n                    v-on=\"on\"\n                  >\n                    mdi-soundbar\n                  </v-icon>\n                </v-btn>\n              </template>\n              <span>Maximum Retrieval #</span>\n            </v-tooltip>\n            \n            <v-tooltip bottom>\n              <template v-slot:activator=\"{ on, attrs }\">\n                <v-btn \n                  class=\"ma-2 menu-btn\"\n                  icon\n                  text\n                  @click=\"showResThre = !showResThre\"\n                >\n                  <v-icon\n                    v-bind=\"attrs\"\n                    v-on=\"on\"\n                  >\n                    mdi-soundbar\n                  </v-icon>\n                </v-btn>\n              </template>\n              <span>Resilience Threshold #</span>\n            </v-tooltip>\n            \n            <v-slider\n              v-model=\"user_defined_thre\"\n              :thumb-size=\"24\"\n              @click=\"changeThreshold\"\n              max=\"1000\"\n              thumb-label=\"always\"\n              v-show=\"showMaxRetrieve\"\n            ></v-slider>\n\n            <v-slider\n              v-model=\"resilience_thre\"\n              :thumb-size=\"24\"\n              min=\"0\"\n              step=\"0.00001\"\n              :max = max_resilience\n              thumb-label=\"always\"\n              v-show=\"showResThre\"\n            ></v-slider>\n           \n          </v-col>\n        </v-row>\n        </v-container>\n        </div>\n        <div id=\"div_graph\" class=\"fullHeight\" :style=\"{'height': '100%'}\"></div>   \n        <v-overlay :value=\"loading_value\">\n        <v-progress-circular\n          indeterminate\n          size=\"64\"\n        ></v-progress-circular>\n      </v-overlay>\n    </div>\n</template>\n\n<script>\nimport * as Neo4jd3 from '@/js/Neo4jD3.js'\n// import * as d3Lasso from 'd3-lasso'\nimport * as d3 from 'd3'\nimport * as KGutils from '@/utils/KGutils.js'\nimport {mapState} from 'vuex'\nimport * as d3tip from '@/utils/d3-tip'\n// import NodeRelOverview from '@/components/NodeRelOverview'\nexport default{\n  props: ['itemProps'], \n  data () {\n    return {\n      selectedEntities: [], \n      selectedRelations: [],\n      currentEntities: [], \n      currentRelations: [],\n      lassoColor: \"grey\", \n      zoomPanColor: \"green\", \n      lassoStatus: false,\n      zoomPanStatus: true, \n      lasso: null, \n      zoom: null, \n      loading_value:false,\n      tip: null,\n      user_defined_thre: 5,// user defined threshold to show how many nodes we want to see if we expand one node \n      neo4jd3 : null,\n      brushed: {\"entity_type\": [], \"relationship_type\": []},\n      showOverview:false, \n      showMaxRetrieve:false,\n      fav: true,\n      menu: false,\n      message: false,\n      hints: true,\n      selectedColor: null, \n      showResThre: false, // resilience threshold bar \n      resilience_thre: 0,  // selected threshold of resilience \n      // min_resilience: 0,\n      max_resilience: 1, // maximum value of the scroll bar for resilience threshold \n    }\n  },\n  created () {\n    // this.$store.dispatch('getGraphOverview')\n    // window['d3'] = d3\n    this.tip = d3tip()\n            .attr('class', 'd3-tip')\n            .offset([-10, 80])\n            .html(function(d) {\n              return \"<strong>Relation: </strong>\" + d + \"<br></span>\";\n    })\n    console.log(document.querySelector(\"#div_graph\"));\n    \n  },\n  methods: {\n    changeThreshold(){\n      // change user define threshold for how many nodes we want to expand \n      this.$store.dispatch('setExpandTh', this.user_defined_thre)\n    },\n    drawNeo4jd3 () {\n      var that = this\n      d3.selectAll(\".d3-tip\").remove()\n\n\n      if(this.neo4jd3 == null){\n        var neo4jd3 = Neo4jd3.default('#div_graph', {\n          neo4jData: this.itemProps.graphData,\n          nodeRadius: 30,\n          infoPanel: false,\n\n          onNodeDoubleClick: function (node) {\n            // that.dbclick(node)\n          },\n          onNodeMouseEnter: function (node) {\n            that.hover_node = node\n            console.log('hovering', node)\n          },\n          onNodeClick: function (node,idx) {\n            // console.log(node,id)\n            // Create dummy data\n            // console.log(node)\n            if (node.showBtnPanel == true) {\n              d3.select(`#node-${node.id}`).selectAll('.circle-button').remove()\n              node.showBtnPanel = false\n              return\n            }\n            node.showBtnPanel = true \n            var data = { b: {action: \"remove\", value: 10, pos:0} } // only two operations \n\n            if(that.itemProps.relationStatusReady==false){\n              // render the loading panel \n              console.log('nononono')\n              //\n            }else{\n              if(that.itemProps.relationStatusReady==\"fromMap\"){\n              var relation_data = node['relationship_types']\n            }\n            else{\n              // console.log(that.relationTypeData['results'][0]['data'][0]['graph']['nodes'])\n              // console.log(idx)\n              var filtered_relation_type_data = that.relationTypeData['results'][0]['data'][0]['graph']['nodes'].filter(d => d.id == node.id)\n              var relation_data = filtered_relation_type_data[0]['relationship_types']\n              // get the sum of all rel counts \n            }\n            const sumValues = obj => Object.values(obj).reduce((a, b) => a + b);\n              const total_c  = sumValues(relation_data)\n              // generate the dount data\n              for (const [key, value] of Object.entries(relation_data)) {\n                data[key] = {action: key, value: (value/total_c)*30}\n              }\n              // console.log(\"check data\")\n              // console.log(data)\n            } \n            \n            // sorting \n            \n            let this_g = d3.select(`#node-${node.id}`)\n\n            // let append_g = this_g.append('g').attr(\"transform\", \"translate(\" + node['x'] + \",\" + node['y'] + \")\");\n            let append_g = this_g\n\n              // Compute the position of each group on the pie:\n            var pie = d3.pie()\n              .sort(null) //avoiding to sort the pie, make sure the remove button in the same position \n              .value(function(d) {return d.value.value; })\n            var data_ready = pie(d3.entries(data))\n            \n\n      \n              // removal / expand operations \n            var operation_buttons_g = append_g.selectAll('whatever')\n              .data(data_ready)\n              .enter()\n            \n            var operation_buttons = operation_buttons_g.append('path')\n              .attr('d', d3.arc()\n                .innerRadius(30)         // This is the size of the donut hole\n                .outerRadius(50)\n              )\n              .attr(\"class\", \"circle-button\")\n              .attr('fill', function(d,i){ \n                if(i==0){\n                  return \"#BB6464\"\n                }else{\n                  return \"#94B49F\"\n                } \n              })\n              // .attr(\"stroke\", \"black\")\n              .style(\"stroke-width\", \"2px\")\n              .style(\"stroke\", \"white\")\n              .style(\"opacity\", 0.7)\n              .style('cursor','pointer')\n              .attr('title','test')\n\n            var hide_icon = operation_buttons_g.append('path') \n              .attr('d', 'M12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20,12C20,16.41 16.41,20 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M7,13H17V11H7')\n              .attr(\"transform\", 'translate(20, -35) scale(0.7)')\n              .attr(\"class\", \"circle-button\")\n            \n            \n\n            d3.select('svg').call(that.tip)\n              // hovering effect \n            operation_buttons.on('mouseover', function(p){\n                d3.select(this).style('opacity',1)\n                let rel = p['data']['value']['action']\n                console.log(rel)\n                that.tip.show(rel);\n              })\n              .on('mouseout',function(p){\n                d3.select(this).style('opacity',0.7)\n                let rel = p['data']['value']['action']\n                that.tip.hide(rel);\n              })\n              .on('click', function(d,i){\n                let clicked_node_id = node['id']\n                const action = d.data.value.action \n                // console.log(d)\n                that.tip.hide(d.data.value.action)\n                if (action == \"remove\"){\n                  // tip.hide(d.data.value.action)\n                  that.$store.dispatch(\"node_remove\", {node_id: clicked_node_id})\n                }else {\n                  \n                  // console.log(d.data.value.action)\n                  that.$store.dispatch(\"node_expand\", {node_id: clicked_node_id, relation: d.data.key})\n                }\n              })\n          }\n      })\n        this.neo4jd3 = neo4jd3\n      }else{\n        this.neo4jd3.updateWithNeo4jData(this.itemProps.graphData)\n      }\n      if (that.lassoStatus) {\n        that.disableZoom()\n        that.enableLasso()\n      } else {\n        that.disableLasso() \n        that.enableZoomPan()\n      }\n      // that.enableLasso()\n      \n    },\n    resetGraphTableHandler(){\n      this.$store.dispatch(\"resetTableGraph\")\n    },\n    toggleZoomPanLasso(){\n      this.zoomPanStatus = !this.zoomPanStatus \n      this.lassoStatus = !this.lassoStatus\n      this.zoomPanColor = this.zoomPanStatus?\"green\":\"grey\"\n      this.lassoColor = this.lassoStatus?\"green\":\"grey\"\n    }, \n    zoomPanToggleHandler() {\n      if (!this.zoomPanStatus) {\n        this.toggleZoomPanLasso() \n        this.disableLasso()\n        this.enableZoomPan()\n      }\n      \n    }, \n    lassoToggleHandler(){\n      if (!this.lassoStatus) {\n        this.toggleZoomPanLasso()\n        this.disableZoom()\n        this.enableLasso()\n        // this.enableZoomPan()\n      }\n      \n    },\n    enableLasso(){\n      const svg = d3.select('#div_graph').select(\"svg\")\n      var circles_question = svg.selectAll('.outline')\n      let that = this\n      var lasso_start = function () {\n        console.log(111)\n        lasso.items()\n          .attr('fill', \"green\")\n          .classed('not_possible', true)\n          .classed('selected', false)\n      }\n      var lasso_draw = function () {\n        // Style the possible dots\n        lasso.possibleItems()\n          .classed('not_possible', false)\n          .classed('possible', true)\n\n        // Style the not possible dot\n        lasso.notPossibleItems()\n          .classed('not_possible', true)\n          .classed('possible', false)\n      }\n      var lasso_end = function () {\n        lasso.items()\n          .classed('not_possible', false)\n          .classed('possible', false)\n\n        lasso.selectedItems()\n          .classed('selected', true)\n        that.selectedEntities.splice(0, that.selectedEntities.length)\n        that.selectedRelations.splice(0, that.selectedRelations.length) \n        lasso.selectedItems().each(function(d){\n          const label = this.nodeName \n          \n          if (label == \"circle\") {\n            console.log(\"adding entity\" + d.id)\n            that.selectedEntities.push(d.id)\n          }else {\n            console.log(\"adding Relations\" + d.id)\n            that.selectedRelations.push(d.id)\n          }\n          \n        })\n        // Reset the style of the not selected dots\n        // lasso.notSelectedItems()\n        \n      }\n      var lasso = d3Lasso.lasso()\n        .closePathSelect(true)\n        .closePathDistance(100)\n        .items(circles_question)\n        .targetArea(svg)\n        .on('start', lasso_start)\n        .on('draw', lasso_draw)\n        .on('end', lasso_end)\n\n      svg.call(lasso)\n    }, \n    disableLasso() {\n      const svg = d3.select('#div_graph').select(\"svg\") \n      svg.on(\".dragstart\", null);\n      svg.on(\".drag\", null);\n      svg.on(\".dragend\", null);\n    }, \n    enableZoomPan(){\n      const svg = d3.select('#div_graph').select(\"svg\") \n      svg.call(d3.zoom().on('zoom', function () {\n        var scale = d3.event.transform.k,\n          translate = [d3.event.transform.x, d3.event.transform.y]\n        console.log(1)\n        const g = svg.select(\"g\")\n        g.attr('transform', 'translate(' + translate[0] + ', ' + translate[1] + ') scale(' + scale + ')')\n      }))\n      .on('dblclick.zoom', null)\n    },\n    disableZoom() {\n      const svg = d3.select('#div_graph').select(\"svg\") \n      svg.on('.zoom', null)\n    },\n    toggleOverviewPanel(focus){\n      if (focus == \"entity\") {\n        const containerFocus = document.querySelector(\"#div_node_overview\")\n        const containerUnFocus = document.querySelector(\"#div_link_overview\")\n        containerFocus.style.border = \"2px solid green\"\n        containerUnFocus.style.border = \"None\"\n      } else{\n        const containerFocus = document.querySelector(\"#div_link_overview\")\n        const containerUnFocus = document.querySelector(\"#div_node_overview\")\n        containerFocus.style.border = \"2px solid green\"\n        containerUnFocus.style.border = \"None\"\n      }\n    },\n    retrieve_types_nodes(){\n      this.$store.dispatch(\"retrieveNodesLinksWithTypes\", this.brushed)\n    },\n    // circleUpdateMatchColor(){\n    //   if (this.colorMapping) {\n    //     Object.keys(this.colorMapping).forEach(category => {\n    //       d3.selectAll('.'+category).style('fill', this.colorMapping[category])\n    //     })\n    //   }\n    // },\n    recolorNode(){\n      var that = this\n      d3.select('#div_graph').selectAll('circle').style('fill',function(d){\n      // check cold chain data\n        if('resilience' in d['properties']){\n          console.log(d['properties'])\n          if(d['properties']['resilience']>=that.resilience_thre){\n            if(that.selectedColor){\n              return that.selectedColor.hex\n            }else{\n              return \"#78b3d0\"\n            }\n            \n          }else{\n            return \"#b3b3b3\"\n          }\n        }\n      })\n    }\n  },\n  watch: {\n    selectedColor() {\n      this.recolorNode()\n      // d3.selectAll('circle').style('fill', this.selectedColor.hex)\n    },\n    resilience_thre(){\n      this.recolorNode()\n    },\n    'itemProps.graphData'() {\n      var all_resilience = []\n      this.itemProps.graphData['results'][0]['data'][0]['graph']['nodes'].forEach(function (d) {\n        d['status'] = 'unclicked'\n        // check if this is cold chain data or not \n        if(\"resilience\" in d['properties']){\n          all_resilience.push(parseFloat(d['properties']['resilience']))\n        }\n        \n      })\n      // this.min_resilience = d3.min(all_resilience)\n      this.max_resilience = d3.max(all_resilience)\n      console.log(this.max_resilience)\n      //inital the selected resilience\n      KGutils.graphDataParsing(this.itemProps.graphData, this.currentEntities, this.currentRelations)\n      this.drawNeo4jd3()\n      // this.circleUpdateMatchColor()\n    }, \n    selectedEntities(val) {\n      if (val.length > 0) {\n        console.log(\"retrieving data now!!!\")\n        console.log(val.length)\n        console.log(this.selectedEntities)\n        console.log(this.selectedRelations)\n        console.log(\"****************\")\n        console.log(val)\n        this.$store.dispatch(\"retrieveSubTable\", {entities: this.selectedEntities, relations: this.selectedRelations})\n        this.$store.dispatch(\"retrieveNodeGeo\", {node: this.selectedEntities})\n      }\n    }, \n    selectedRelations(val){\n      if (val.length > 0) {\n        console.log(\"****************\")\n        console.log(val.length)\n        console.log(val) \n        console.log(\"retrieving data now!!!\")\n        console.log(this.selectedEntities)\n        console.log(this.selectedRelations)\n        this.$store.dispatch(\"retrieveSubTable\", {entities: this.selectedEntities, relations: this.selectedRelations})\n      }\n    }, \n    brushed:{\n      handler(val){\n          console.log(val);\n      },\n      deep:true \n    },\n    'itemProps.relationStatusReady': function (val){\n      console.log(\"relation status: \" + val) \n    },\n    'itemProps.relationTypeData':function(val) {\n      if(this.itemProps.relationStatusReady) {\n        console.log(\"relation type data is ready\")\n\n      }else{\n        console.log(\"relation type data is not ready yet!\")\n      }\n    },\n    'itemProps.loading': function(val){\n      this.loading_value = val\n    },\n    \n  },\n  computed: {\n    // HEIGHT () {\n    //   return window.innerHeight*0.7 + 'px'\n    // },\n    // OVERVIEW_HEIGHT(){\n    //   return window.innerHeight*0.3 + 'px'\n    // }\n  }\n}\n</script>\n<style>\n\n.lasso path {\n    stroke: rgb(80,80,80);\n    stroke-width:2px;\n}\n\n.lasso .drawn {\n    fill-opacity:.05 ;\n}\n\n.lasso .loop_close {\n    fill:none;\n    stroke-dasharray: 4,4;\n}\n\n.lasso .origin {\n    fill:#3399FF;\n    fill-opacity:.5;\n}\n\n.not_possible {\n    fill: rgb(200,200,200);\n}\n\n.possible {\n    fill: #EC888C;\n}\n\n.nodes .selected {\n    fill: green!important;\n    stroke-width: 3px!important;\n    stroke: black;\n}\n.relationships .selected {\n    stroke-width: 5px !important;\n    stroke: green!important;\n}\n.graph-btn-container{\n    position: relative; \n    top: 30px;\n}\n.kg-view-btn{\n  margin-right: 10px;\n}\n\n.circle-button:hover{\n  cursor: pointer;\n}\n\n.neo4jd3{\n  margin-top:60px;\n}\n\n.card-name {\n    text-align: center;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    flex-wrap: wrap;\n    height: 100%;\n  }\n\n.card-inner{\n  text-align: center;\n  align-items: center;\n  justify-content: center;\n  flex-wrap: wrap;\n  height: 100%;\n}\n</style>\n"]}]}