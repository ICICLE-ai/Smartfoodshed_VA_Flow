{"remainingRequest":"/Users/yameitu/Desktop/ICIRCLE/Smartfoodshed_VA_Flow/frontend/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/yameitu/Desktop/ICIRCLE/Smartfoodshed_VA_Flow/frontend/src/components/GlobalViewComp.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/yameitu/Desktop/ICIRCLE/Smartfoodshed_VA_Flow/frontend/src/components/GlobalViewComp.vue","mtime":1664236533037},{"path":"/Users/yameitu/Desktop/ICIRCLE/Smartfoodshed_VA_Flow/frontend/node_modules/cache-loader/dist/cjs.js","mtime":1644041617264},{"path":"/Users/yameitu/Desktop/ICIRCLE/Smartfoodshed_VA_Flow/frontend/node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js","mtime":1661441977623},{"path":"/Users/yameitu/Desktop/ICIRCLE/Smartfoodshed_VA_Flow/frontend/node_modules/cache-loader/dist/cjs.js","mtime":1644041617264},{"path":"/Users/yameitu/Desktop/ICIRCLE/Smartfoodshed_VA_Flow/frontend/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":1661441977645}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7bWFwU3RhdGV9IGZyb20gJ3Z1ZXgnCmltcG9ydCBSaWdodENsaWNrTWVudSBmcm9tICJAL2NvbXBvbmVudHMvY29tbW9uL3JpZ2h0Y2xpY2svUmlnaHRDbGlja01lbnUiOwppbXBvcnQgSW5vdXRwdXRCdG5zIGZyb20gIkAvY29tcG9uZW50cy9jb21tb24vYnV0dG9ucy9Jbm91dHB1dEJ0bnMiOwppbXBvcnQgKiBhcyBkMyBmcm9tICdkMycKaW1wb3J0ICogYXMgZDN0aXAgZnJvbSAnQC91dGlscy9kMy10aXAnCgpleHBvcnQgZGVmYXVsdCB7CiAgcHJvcHM6IFsKICAgICdpdGVtUHJvcHMnCiAgXSwKICBkYXRhKCl7CiAgICByZXR1cm4gewogICAgICBpbml0aWFsWDogdW5kZWZpbmVkLAogICAgICBpbml0aWFsWTogdW5kZWZpbmVkLAogICAgICBkYXRhU3RhdHVzOiB1bmRlZmluZWQsCiAgICAgIHJlc2l6ZVg6IHVuZGVmaW5lZCwKICAgICAgcmVzaXplWTogdW5kZWZpbmVkLAogICAgICAvLyBkcmFnZ2FibGU6IHRydWUsCiAgICAgIHdpZHRoOiA1MDAsCiAgICAgIGhlaWdodDogNTAwLCAKICAgICAgcmVzaXplV2lkdGg6IDAsIC8vCiAgICAgIHJlc2l6ZUhlaWdodDogMCwKICAgICAgbWFyZ2luVG9wOiAwLAogICAgICBtYXJnaW5MZWZ0OiAwLAogICAgICB0b3BNYXJnaW46IHdpbmRvdy5pbm5lckhlaWdodCAvIDIsCiAgICAgIGxlZnRNYXJnaW46IHdpbmRvdy5pbm5lcldpZHRoIC8gMiwKICAgICAgcmVzaXppbmdTdGF0dXM6IGZhbHNlLAoKICAgICAgc2hvd1JpZ2h0Q2xpY2tNZW51OiBmYWxzZSwKICAgICAgcmlnaHRNZW51WDogMCwKICAgICAgcmlnaHRNZW51WTogMCwKCiAgICAgIGl0ZW1zOiBbCiAgICAgICAgeyB0aXRsZTogJ1JlbW92ZSBub2RlJyB9LAogICAgICBdLAoKICAgICAgY29udGFpbmVyOiAnLmdsb2JhbHZpZXctY29tcG9uZW50cy1saXN0JywKCiAgICAgIHJpZ2h0QnRuOiB0cnVlLAoKICAgICAgdG9wQnRuOiBmYWxzZSwKCiAgICAgIGxlZnRCdG46IGZhbHNlLAoKICAgICAgbG9hZGluZ1N0YXR1czogZmFsc2UsCgogICAgICBvbk9wZXJhdGlvbjogZmFsc2UsIAoKICAgICAgLy8gY29sb3JzOiBbIiM1NDMwMDUiLCAiIzhjNTEwYSIsICIjYmY4MTJkIiwgIiNkZmMyN2QiLCAiI2Y2ZThjMyIsIiNmNWY1ZjUiLCIjYzdlYWU1IiwiIzgwY2RjMSIsIiMzNTk3OGYiLCIjMDE2NjVlIiwiIzAwM2MzMCJdLCAKICAgICAgY29sb3JzOiBbJyNhNmNlZTMnLCcjMWY3OGI0JywnI2IyZGY4YScsJyMzM2EwMmMnLCcjZmI5YTk5JywnI2UzMWExYycsJyNmZGJmNmYnLCcjZmY3ZjAwJywnI2NhYjJkNicsJyM2YTNkOWEnLCcjZmZmZjk5JywnI2IxNTkyOCddCiAgICB9CiAgfSwKICBtZXRob2RzOnsKICAgIGRyYWdTdGFydChlKXsKICAgICAgLy8gaWYoIXRoaXMuaW5pdGlhbFgpewogICAgICAvLyAgIHRoaXMuaW5pdGlhbFggPSBlLmNsaWVudFg7IAogICAgICAvLyAgIHRoaXMuaW5pdGlhbFkgPSBlLmNsaWVudFk7CiAgICAgIC8vIH0KICAgICAgLy8gZS5kYXRhVHJhbnNmZXIuc2V0RGF0YSgnaXRlbS1pZCcsIGUudGFyZ2V0LmlkKTsKICAgICAgLy8gZS5kYXRhVHJhbnNmZXIuc2V0RGF0YSgnaW5pdGlhbFgnLCB0aGlzLmluaXRpYWxYKTsKICAgICAgLy8gZS5kYXRhVHJhbnNmZXIuc2V0RGF0YSgnaW5pdGlhbFknLCB0aGlzLmluaXRpYWxZKTsKICAgICAgY29uc3QgZWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGAjJHtlLnRhcmdldC5pZH1gKTsgCiAgICAgIGNvbnN0IGluaXRpYWxMZWZ0ID0gcGFyc2VJbnQoZWwuc3R5bGUubGVmdC5zcGxpdCgncHgnKVswXSkgLSBlLmNsaWVudFg7CiAgICAgIGNvbnN0IGluaXRpYWxUb3AgPSBwYXJzZUludChlbC5zdHlsZS50b3Auc3BsaXQoJ3B4JylbMF0pIC0gZS5jbGllbnRZOwogICAgICBlLmRhdGFUcmFuc2Zlci5zZXREYXRhKCdpdGVtLWlkJywgZS50YXJnZXQuaWQpOwogICAgICBlLmRhdGFUcmFuc2Zlci5zZXREYXRhKCdpbml0aWFsTGVmdCcsIGluaXRpYWxMZWZ0KTsKICAgICAgZS5kYXRhVHJhbnNmZXIuc2V0RGF0YSgnaW5pdGlhbFRvcCcsIGluaXRpYWxUb3ApOwogICAgICB0aGlzLiRzdG9yZS5kaXNwYXRjaCgnY2hhbmdlQ3VycmVudERyYWdnaW5nVk0nLCB0aGlzKTsKICAgIH0sIAoKICAgIGFkZExpbmsoKXsKICAgICAgY29uc29sZS5sb2coMTExKTsKICAgICAgdGhpcy4kc3RvcmUuZGlzcGF0Y2goJ2NoYW5nZUxpbmtEcmF3aW5nU3RhdHVzJywgdHJ1ZSk7CiAgICB9LAoKICAgIGZpbmlzaExpbmsoKXsKICAgICAgY29uc29sZS5sb2coMjIyKTsKICAgICAgdGhpcy4kc3RvcmUuZGlzcGF0Y2goJ2NoYW5nZUxpbmtEcmF3aW5nU3RhdHVzJywgZmFsc2UpOwogICAgfSwKCiAgICAvLyBIYW5kbGVyIGZvciBkaXYgcmVzaXppbmcKICAgIG1vdXNlRG93bkhhbmRsZXIoZSl7CiAgICAgIAogICAgICAvLyB0aGlzLiRzdG9yZS5kaXNwYXRjaCgnY2hhbmdlUmVzaXplclN0YXR1cycsIHRydWUpOwogICAgICB0aGlzLnJlc2l6ZVggPSBlLmNsaWVudFg7IAogICAgICB0aGlzLnJlc2l6ZVkgPSBlLmNsaWVudFk7CiAgICAgIGNvbnNvbGUubG9nKHRoaXMucmVzaXplWCwgdGhpcy5yZXNpemVZKQogICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZW1vdmUnLCB0aGlzLm1vdXNlTW92ZUhhbmRsZXIpOyAKICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbW91c2V1cCcsIHRoaXMubW91c2VVcEhhbmRsZXIpOyAKICAgICAgdGhpcy5yZXNpemluZ1N0YXR1cyA9IHRydWUKICAgICAgCiAgICB9LCAKCiAgICAvLyBIYW5kbGVyIGZvciBtb3ZpbmcgbW91c2UgdG8gcmVzaXplIAogICAgbW91c2VNb3ZlSGFuZGxlcihlKXsKICAgICAgY29uc3QgZHggPSBlLmNsaWVudFggLSB0aGlzLnJlc2l6ZVg7IAogICAgICBjb25zdCBkeSA9IGUuY2xpZW50WSAtIHRoaXMucmVzaXplWTsgCiAgICAgIHRoaXMud2lkdGggPSB0aGlzLnJlc2l6ZVdpZHRoICsgZHg7CiAgICAgIHRoaXMuaGVpZ2h0ID0gdGhpcy5yZXNpemVIZWlnaHQgKyBkeTsKICAgICAgCiAgICB9LCAKCiAgICAvLyBIYW5kbGVyIGZvciBtb3VzZSB1cCBhbmQgcmVtb3ZlIHRoZSBFdmVudExpc3RlbmVyCiAgICBtb3VzZVVwSGFuZGxlcihlKXsKICAgICAgdGhpcy5yZXNpemVXaWR0aCA9IHRoaXMud2lkdGg7IAogICAgICB0aGlzLnJlc2l6ZUhlaWdodCA9IHRoaXMuaGVpZ2h0OyAKICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2Vtb3ZlJywgdGhpcy5tb3VzZU1vdmVIYW5kbGVyKTsgCiAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNldXAnLCB0aGlzLm1vdXNlVXBIYW5kbGVyKQogICAgICB0aGlzLnJlc2l6aW5nU3RhdHVzID0gZmFsc2UKICAgICAgLy8gdGhpcy4kc3RvcmUuZGlzcGF0Y2goJ2NoYW5nZVJlc2l6ZXJTdGF0dXMnLCBmYWxzZSkKICAgIH0sCgogICAgcmlnaHRDbGlja01lbnVTaG93KGUpewogICAgICBlLnByZXZlbnREZWZhdWx0KCk7CiAgICAgIHRoaXMuc2hvd1JpZ2h0Q2xpY2tNZW51ID0gdHJ1ZTsKICAgICAgdGhpcy5yaWdodE1lbnVYID0gZS5jbGllbnRYOwogICAgICB0aGlzLnJpZ2h0TWVudVkgPSBlLmNsaWVudFk7CiAgICB9LCAKCiAgICBkcmF3KCl7CiAgICAgIGlmKCF0aGlzLml0ZW1Qcm9wcy52aXNfdHNuZSl7CiAgICAgICAgYWxlcnQoJ05vIHZpcyBkYXRhIGJ1dCBzdGlsbCB0cmlnZ2VyZWQhIGNoZWNrIEdMb2JhbFZpZXdDb21wLnZ1ZScpCiAgICAgIH0KCiAgICAgIAogICAgICBsZXQgdGlwID0gZDN0aXAoKQogICAgICAgICAgICAuYXR0cignY2xhc3MnLCAnZDMtdGlwJykKICAgICAgICAgICAgLm9mZnNldChbLTEwLCAwXSkKICAgICAgICAgICAgLmh0bWwoZnVuY3Rpb24oZCkgewogICAgICAgICAgICAgIHJldHVybiAiPHN0cm9uZz5UaXRsZTogPC9zdHJvbmc+PHNwYW4gY2xhc3M9J2RldGFpbHMnPiIgKyBkLnRpdGxlICsgIjxicj48L3NwYW4+IjsKICAgICAgICAgICAgfSkKCiAgICAgIGxldCB2aXNEYXRhID0gdGhpcy5pdGVtUHJvcHMudmlzX3RzbmUudHNuZS5kYXRhOyAKICAgICAgbGV0IHZpc0FyZWEgPSB0aGlzLml0ZW1Qcm9wcy52aXNfdHNuZS50c25lLmFyZWE7CiAgICAgIAogICAgICBjb25zb2xlLmxvZygncHJpbnQgdmlzIGRhdGEnKTsKICAgICAgY29uc29sZS5sb2codmlzRGF0YSk7CgogICAgICBjb25zb2xlLmxvZygncHJpbnQgdmlzIGFyZWEnKTsKICAgICAgY29uc29sZS5sb2codmlzQXJlYSk7CiAgICAgIGNvbnN0IGNhbnZhc0NvbnRhaW5lciA9IGQzLnNlbGVjdChgLmdsb2JhbHZpZXctY2FudmFzLSR7dGhpcy5pdGVtUHJvcHMuaWR9YCk7CiAgICAgIGNvbnN0IGNhbnZhc0dyb3VwID0gY2FudmFzQ29udGFpbmVyLnNlbGVjdEFsbCgnZycpLmRhdGEoWzBdKTsKICAgICAgY29uc3QgY2FudmFzRW50ZXIgPSBjYW52YXNHcm91cC5lbnRlcigpLmFwcGVuZCgnZycpCgogICAgICBjb25zdCBjYW52YXMgPSBjYW52YXNHcm91cC5tZXJnZShjYW52YXNFbnRlcik7CgogICAgICBjb25zdCBjbGFzc0NvbG9ycyA9IHRoaXMuY29sb3JzOwogICAgICBjb25zdCBhcmVhTGluZSA9IGQzLmxpbmUoKQogICAgICAgIC54KGQgPT4gZFswXSkKICAgICAgICAueShkID0+IGRbMV0pCiAgICAgICAgLmN1cnZlKGQzLmN1cnZlQ2F0bXVsbFJvbUNsb3NlZCk7CiAgICAgIGNvbnNvbGUubG9nKGNsYXNzQ29sb3JzKTsKCgogICAgICBjb25zdCB3aWR0aCA9IHRoaXMud2lkdGgKICAgICAgY29uc3QgaGVpZ2h0ID0gdGhpcy5oZWlnaHQKICAgICAgY29uc3QgeFNjYWxlID0gZDMuc2NhbGVMaW5lYXIoKQogICAgICAgICAgICAgICAgICAgICAgLmRvbWFpbihkMy5leHRlbnQodmlzRGF0YSwgZD0+ZC5lbWJlZGRpbmdbMF0pKQogICAgICAgICAgICAgICAgICAgICAgLnJhbmdlKFswLCB3aWR0aF0pCiAgICAgIAogICAgICBjb25zdCB5U2NhbGUgPSBkMy5zY2FsZUxpbmVhcigpCiAgICAgICAgICAgICAgICAgICAgICAuZG9tYWluKGQzLmV4dGVudCh2aXNEYXRhLCBkPT5kLmVtYmVkZGluZ1sxXSkpCiAgICAgICAgICAgICAgICAgICAgICAucmFuZ2UoWzAsIGhlaWdodF0pCgoKICAgICAgLy8gZm9yKGxldCBpIGluIE9iamVjdC5rZXlzKHZpc0FyZWEpKXsKICAgICAgLy8gICBpZihpPT0xIHx8IGkgPT0gMTcpewogICAgICAvLyAgICAgbGV0IHF1ZXJ5SWQgPSB2aXNBcmVhW2ldOwogICAgICAgICAgCiAgICAgIC8vICAgICBjYW52YXMuYXBwZW5kKCJwYXRoIikKICAgICAgLy8gICAgIC5hdHRyKCJmaWxsIiwgY2xhc3NDb2xvcnNbaSAlIGNsYXNzQ29sb3JzLmxlbmd0aF0pCiAgICAgIC8vICAgICAuYXR0cigic3Ryb2tlIiwgInN0ZWVsYmx1ZSIpCiAgICAgIC8vICAgICAuYXR0cigic3Ryb2tlLXdpZHRoIiwgMykKICAgICAgLy8gICAgIC5hdHRyKCJvcGFjaXR5IiwgMC4yKQogICAgICAvLyAgICAgLmF0dHIoImQiLCBhcmVhTGluZShodWxsKHZpc0FyZWFbYHFfJHtpfWBdLm1hcChkPT5beFNjYWxlKGRbMF0pLCB4U2NhbGUoZFsxXSldKSkpKTsKICAgICAgLy8gICB9CiAgICAgICAgCiAgICAgIC8vIH0KCgogICAgICBjb25zdCBoID0gY2FudmFzLmFwcGVuZCgicGF0aCIpLmF0dHIoImNsYXNzIiwgInBvbHlodWxsLTAxIikuc3R5bGUoInN0cm9rZSIsICJncmF5Iikuc3R5bGUoInN0cm9rZS13aWR0aCIsIjNweCIpLnN0eWxlKCJmaWxsLW9wYWNpdHkiLCAiMC4zIikuc3R5bGUoImZpbGwiLCAibGlnaHRibHVlIik7CiAgICAgIGNvbnN0IGNpcmNsZUdyb3VwID0gY2FudmFzLnNlbGVjdEFsbCgnY2lyY2xlJykuZGF0YSh2aXNEYXRhKTsgLy8KICAgICAgY29uc3QgY2lyY2xlR3JvdXBFbnRlciA9IGNpcmNsZUdyb3VwLmVudGVyKCkuYXBwZW5kKCdjaXJjbGUnKQogICAgIAogICAgICBjaXJjbGVHcm91cEVudGVyLm1lcmdlKGNpcmNsZUdyb3VwKQogICAgICAgIC5hdHRyKCdjeCcsIGQ9PnhTY2FsZShkLmVtYmVkZGluZ1swXSkpCiAgICAgICAgLmF0dHIoJ2N5JywgZD0+eVNjYWxlKGQuZW1iZWRkaW5nWzFdKSkKICAgICAgICAuYXR0cigncicsIGQ9PnsKICAgICAgICAgIHJldHVybiAxCiAgICAgICAgfSkKICAgICAgICAuYXR0cignZmlsbCcsIGQ9PnsKICAgICAgICAgIC8vIGlmKGRbJ3FfMSddKXsKICAgICAgICAgIC8vICAgcmV0dXJuIGNsYXNzQ29sb3JzWzVdCiAgICAgICAgICAvLyB9CiAgICAgICAgICAvLyBpZihkWydxXzE3J10pewogICAgICAgICAgLy8gICByZXR1cm4gY2xhc3NDb2xvcnNbNl0KICAgICAgICAgIC8vIH0KICAgICAgICAgIHJldHVybiAnc3RlZWxibHVlJwogICAgICAgIH0pCiAgICAgICAgLm9uKCdtb3VzZW92ZXInLCBmdW5jdGlvbihkKXsKICAgICAgICAgIHRpcC5zaG93KGQpOwogICAgICAgICAgZDMuc2VsZWN0KHRoaXMpCiAgICAgICAgICAgIC5hdHRyKCdyJywgMS41KQogICAgICAgICAgICAuc3R5bGUoJ3N0cm9rZScsICdibGFjaycpCiAgICAgICAgICAgIAogICAgICAgIH0pCiAgICAgICAgLm9uKCdtb3VzZW91dCcsIGZ1bmN0aW9uKGQpewogICAgICAgICAgdGlwLmhpZGUoZCk7CiAgICAgICAgICBkMy5zZWxlY3QodGhpcykKICAgICAgICAgICAgLmF0dHIoJ3InLCAxKQogICAgICAgICAgICAuc3R5bGUoJ3N0cm9rZScsIG51bGwpCiAgICAgICAgICAgIAogICAgICAgIH0pCgogICAgICAKICAgICAgCgogICAgICBmdW5jdGlvbiB6b29tZWQoKSB7CiAgICAgICAgY29uc29sZS5sb2coMTExKTsKICAgICAgICBjb25zdCB7dHJhbnNmb3JtfSA9IGQzLmV2ZW50OwogICAgICAgIGNhbnZhcy5hdHRyKCJ0cmFuc2Zvcm0iLCB0cmFuc2Zvcm0pOwogICAgICB9CgoKICAgICAgY2FudmFzQ29udGFpbmVyLm9uKCdkYmxjbGljaycsICgpPT57CiAgICAgICAgY29uc29sZS5sb2coMTExKQogICAgICAgIGNhbnZhc0NvbnRhaW5lci5jYWxsKGQzLnpvb20oKQogICAgICAgICAgLmV4dGVudChbWzAsIDBdLCBbd2lkdGgsIGhlaWdodF1dKQogICAgICAgICAgLnNjYWxlRXh0ZW50KFsxLCA4XSkKICAgICAgICAgIC5vbigiem9vbSIsIHpvb21lZCkpOwoKICAgICAgICBjYW52YXNDb250YWluZXIuc3R5bGUoJ2JvcmRlcicsICcxcHggc29saWQgcmVkJykKICAgICAgfSkKCiAgICAgIGNhbnZhc0NvbnRhaW5lci5vbignbW91c2VsZWF2ZScsICgpPT57CiAgICAgICAgY29uc29sZS5sb2coJ21vdXNlb3V0Jyk7CiAgICAgICAgY29uc29sZS5sb2coY2FudmFzQ29udGFpbmVyKQogICAgICAgIGNhbnZhc0NvbnRhaW5lci5vbignLnpvb20nLCBudWxsKTsKICAgICAgICBjYW52YXNDb250YWluZXIuc3R5bGUoJ2JvcmRlcicsIG51bGwpCiAgICAgIH0pCiAgICAgIC8vIGNhbnZhc0NvbnRhaW5lci5jYWxsKGQzLnpvb20oKQogICAgICAvLyAgIC5leHRlbnQoW1swLCAwXSwgW3dpZHRoLCBoZWlnaHRdXSkKICAgICAgLy8gICAuc2NhbGVFeHRlbnQoWzEsIDhdKQogICAgICAvLyAgIC5vbigiem9vbSIsIHpvb21lZCkpOwoKICAgICAgY2FudmFzQ29udGFpbmVyLmNhbGwodGlwKTsKCiAgICAgIGNvbnN0IHBvaW50c1RlbXAgPSB2aXNEYXRhLnNsaWNlKDEwMDAsIDEwMTApOyAKICAgICAgLy8gY29uc29sZS5sb2coIkNoZWNrIEhlcmUhIik7CiAgICAgIC8vIGNvbnNvbGUubG9nKHBvaW50c1RlbXApOwogICAgICBjb25zdCBodWxsQ3VydmUgPSBodWxsKHBvaW50c1RlbXAubWFwKG9iaiA9PiBbeFNjYWxlKG9iai5lbWJlZGRpbmdbMF0pLCB5U2NhbGUob2JqLmVtYmVkZGluZ1sxXSldKSk7IAogICAgICBoLmF0dHIoImQiLCBgTSR7aHVsbEN1cnZlLmpvaW4oIkwiKX1aYCkKCiAgICAgIGZ1bmN0aW9uIGh1bGwocG9pbnRzKSB7CiAgICAgICAgLy8gTm8gc2Vuc2UgaW4gcmVuZGVyaW5nIGEgaHVsbCBmb3IgZmV3ZXIgdGhhbiB0d28gcG9pbnRzCiAgICAgICAgaWYgKHBvaW50cy5sZW5ndGggPCAyKSByZXR1cm47CgogICAgICAgIC8vIHBvbHlnb25IdWxsIHNlZW1zIHRvIHJlcXVpcmUgYSBtaW5pbXVtIG9mIHRocmVlIHBvaW50cywgYnV0IHdvcmtzCiAgICAgICAgLy8ganVzdCBmaW5lIGlmIHR3byBvZiB0aGUgcG9pbnRzIGFyZSBpZGVudGljYWwsIHNvIHdlIGNhbiBwYXRjaCBvdmVyCiAgICAgICAgLy8gdGhlIHByb2JsZW0gb2YgYSB0d28gcG9pbnQgY2x1c3RlciBieSBkdXBsaWNhdGluZyB0aGUgZmlyc3QgcG9pbnQuCiAgICAgICAgaWYgKHBvaW50cy5sZW5ndGggPCAzKSByZXR1cm4gZDMucG9seWdvbkh1bGwoW3BvaW50c1swXSwgLi4ucG9pbnRzXSk7CgogICAgICAgIHJldHVybiBkMy5wb2x5Z29uSHVsbChwb2ludHMpOwogICAgICB9CgogICAgfSwKCgogICAgCgogIH0sCgogIGNyZWF0ZWQoKXsKICAgIC8vIEluaXRpYWxpemUgaW5pdGlhbCBwb3NpdGlvbgogICAgdGhpcy5tYXJnaW5Ub3AgPSB0aGlzLnRvcE1hcmdpbiAtIHRoaXMuaGVpZ2h0LzI7IAogICAgdGhpcy5tYXJnaW5MZWZ0ID0gdGhpcy5sZWZ0TWFyZ2luIC0gdGhpcy53aWR0aC8yOwoKICAgIC8vIEluaXRpYWxpemUgcmVzaXplV2lkdGggYW5kIHJlc2l6ZUhlaWdodAogICAgdGhpcy5yZXNpemVXaWR0aCA9IHRoaXMud2lkdGg7CiAgICB0aGlzLnJlc2l6ZUhlaWdodCA9IHRoaXMuaGVpZ2h0OyAKICB9LAoKICBjb21wdXRlZDp7CiAgICAuLi5tYXBTdGF0ZShbJ2RyYXdMaW5rJywncmVzaXplciddKSwKICAgIGRyYWdnYWJsZSgpewogICAgICByZXR1cm4gISh0aGlzLmRyYXdMaW5rIHx8IHRoaXMucmVzaXppbmdTdGF0dXMpOwogICAgfQogIH0sCgogIGNvbXBvbmVudHM6IHsKICAgIFJpZ2h0Q2xpY2tNZW51LAogICAgSW5vdXRwdXRCdG5zCiAgfSwKCiAgd2F0Y2g6IHsKICAgICdpdGVtUHJvcHMuaW5wdXREYXRhJzogZnVuY3Rpb24obmV3VmFsLCBvbGRWYWwpewogICAgICBpZihuZXdWYWwpewogICAgICAgIHRoaXMubG9hZGluZ1N0YXR1cyA9IHRydWUKICAgICAgICB0aGlzLmRhdGFTdGF0dXMgPSB0cnVlIC8vIG1lYW5zIGxvYWRpbmcKICAgICAgICBjb25zb2xlLmxvZygnZ2xvYmFsVmlldyBjb21wb25lbnQgdHJpZ2dlcmVkIG5ld1ZhbCcpCiAgICAgICAgY29uc29sZS5sb2cobmV3VmFsKTsKICAgICAgfWVsc2V7CiAgICAgICAgdGhpcy5sb2FkaW5nU3RhdHVzID0gZmFsc2UKICAgICAgICB0aGlzLmRhdGFTdGF0dXMgPSBmYWxzZQogICAgICB9CiAgICB9LCAKCiAgICAnaXRlbVByb3BzLnZpc190c25lJzogZnVuY3Rpb24obmV3VmFsLCBvbGRWYWwpewogICAgICBjb25zb2xlLmxvZygndmlzRGF0YSBuZXdWYWwsIG9sZFZhbCcpOyAvLwogICAgICBjb25zb2xlLmxvZyhuZXdWYWwpOyAvLwogICAgICBjb25zb2xlLmxvZyhvbGRWYWwpOwogICAgICBpZihuZXdWYWwgJiYgbmV3VmFsLnRzbmUpewogICAgICAgIHRoaXMubG9hZGluZ1N0YXR1cyA9IGZhbHNlCiAgICAgICAgdGhpcy5kYXRhU3RhdHVzID0gdHJ1ZSAvLyBubyBsb25nZXIgbG9hZGluZwogICAgICAgIGNvbnNvbGUubG9nKCdoZXJlJykKICAgICAgICBjb25zb2xlLmxvZyh0aGlzLmRhdGFTdGF0dXMpOwogICAgICAgIHRoaXMuZHJhdygpOwogICAgICB9ZWxzZXsKICAgICAgICB0aGlzLmxvYWRpbmdTdGF0dXMgPSBmYWxzZQogICAgICAgIHRoaXMuZGF0YVN0YXR1cyA9IGZhbHNlOwogICAgICB9CiAgICB9LAoKICAgIHdpZHRoOiBmdW5jdGlvbiAoKXsKICAgICAgaWYodGhpcy5pdGVtUHJvcHMudmlzX3RzbmUpewogICAgICAgIHRoaXMuZHJhdygpCiAgICAgIH0KICAgICAgCiAgICB9LCAKCiAgICBoZWlnaHQ6IGZ1bmN0aW9uKCl7CiAgICAgIGlmKHRoaXMuaXRlbVByb3BzLnZpc190c25lKXsKICAgICAgICB0aGlzLmRyYXcoKQogICAgICB9CiAgICB9CiAgfQp9Cg=="},{"version":3,"sources":["GlobalViewComp.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmFA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;AAGA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;AAKA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;;;;AAKA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA","file":"GlobalViewComp.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <div>\n  <v-hover\n    v-slot=\"{ hover }\"\n  >\n    <v-card\n      :elevation=\"hover? 12 : 5\"\n      class=\"card-gloablview\"\n      :draggable=\"draggable\"\n      @dragstart=\"dragStart\"\n      outlined\n      :id=\"itemProps.id\"\n      ref=\"cardComp\"\n      @contextmenu = \"rightClickMenuShow\"\n      :style=\"{top: marginTop + 'px', left: marginLeft +'px', width: `${width}px`, height: `${height}px`, position: 'absolute'}\"\n    > \n      <v-card\n        loading\n        v-if=\"loadingStatus\"\n        :width=\"width\"\n        :height=\"height\"\n      ></v-card>\n      <v-card-text \n        v-if=\"!dataStatus\" \n        class=\"card-name\"\n      >\n        No Global View Yet\n      </v-card-text>\n      <div \n        class=\"canvas-container\"\n        v-if=\"dataStatus\" \n      >\n        <svg\n          :class=\"`globalview-canvas-${itemProps.id}`\" \n         \n          :viewBox=\"[0, 0, width, height]\"\n        >\n\n        </svg>\n      </div>\n      <v-card-actions>\n        <InoutputBtns\n          :resizingStatus=\"resizingStatus\"\n          :width=\"width\"\n          :height=\"height\"\n          :marginLeft=\"marginLeft\"\n          :marginTop=\"marginTop\"  \n          :componentId=\"itemProps.id\"\n          :hover=\"hover\"\n        />\n      </v-card-actions>\n\n      <div \n        class=\"resizer resizer-r\"\n        @mousedown=\"mouseDownHandler\"\n      ></div>\n      <div \n        class=\"resizer resizer-b\"\n        @mousedown=\"mouseDownHandler\"\n      ></div>\n\n    </v-card>\n  </v-hover>\n\n  <v-menu\n    v-model=\"showRightClickMenu\"\n    :position-x=\"rightMenuX\"\n    :position-y=\"rightMenuY\"\n    absolute\n    offset-y\n  >\n    <RightClickMenu \n      :vue=\"this\" \n      :container=\"container\" \n      :itemProps=\"itemProps\"\n      store=\"globalview\"\n    /> \n  </v-menu>\n\n  </div>\n</template>\n\n<script>\nimport {mapState} from 'vuex'\nimport RightClickMenu from \"@/components/common/rightclick/RightClickMenu\";\nimport InoutputBtns from \"@/components/common/buttons/InoutputBtns\";\nimport * as d3 from 'd3'\nimport * as d3tip from '@/utils/d3-tip'\n\nexport default {\n  props: [\n    'itemProps'\n  ],\n  data(){\n    return {\n      initialX: undefined,\n      initialY: undefined,\n      dataStatus: undefined,\n      resizeX: undefined,\n      resizeY: undefined,\n      // draggable: true,\n      width: 500,\n      height: 500, \n      resizeWidth: 0, //\n      resizeHeight: 0,\n      marginTop: 0,\n      marginLeft: 0,\n      topMargin: window.innerHeight / 2,\n      leftMargin: window.innerWidth / 2,\n      resizingStatus: false,\n\n      showRightClickMenu: false,\n      rightMenuX: 0,\n      rightMenuY: 0,\n\n      items: [\n        { title: 'Remove node' },\n      ],\n\n      container: '.globalview-components-list',\n\n      rightBtn: true,\n\n      topBtn: false,\n\n      leftBtn: false,\n\n      loadingStatus: false,\n\n      onOperation: false, \n\n      // colors: [\"#543005\", \"#8c510a\", \"#bf812d\", \"#dfc27d\", \"#f6e8c3\",\"#f5f5f5\",\"#c7eae5\",\"#80cdc1\",\"#35978f\",\"#01665e\",\"#003c30\"], \n      colors: ['#a6cee3','#1f78b4','#b2df8a','#33a02c','#fb9a99','#e31a1c','#fdbf6f','#ff7f00','#cab2d6','#6a3d9a','#ffff99','#b15928']\n    }\n  },\n  methods:{\n    dragStart(e){\n      // if(!this.initialX){\n      //   this.initialX = e.clientX; \n      //   this.initialY = e.clientY;\n      // }\n      // e.dataTransfer.setData('item-id', e.target.id);\n      // e.dataTransfer.setData('initialX', this.initialX);\n      // e.dataTransfer.setData('initialY', this.initialY);\n      const el = document.querySelector(`#${e.target.id}`); \n      const initialLeft = parseInt(el.style.left.split('px')[0]) - e.clientX;\n      const initialTop = parseInt(el.style.top.split('px')[0]) - e.clientY;\n      e.dataTransfer.setData('item-id', e.target.id);\n      e.dataTransfer.setData('initialLeft', initialLeft);\n      e.dataTransfer.setData('initialTop', initialTop);\n      this.$store.dispatch('changeCurrentDraggingVM', this);\n    }, \n\n    addLink(){\n      console.log(111);\n      this.$store.dispatch('changeLinkDrawingStatus', true);\n    },\n\n    finishLink(){\n      console.log(222);\n      this.$store.dispatch('changeLinkDrawingStatus', false);\n    },\n\n    // Handler for div resizing\n    mouseDownHandler(e){\n      \n      // this.$store.dispatch('changeResizerStatus', true);\n      this.resizeX = e.clientX; \n      this.resizeY = e.clientY;\n      console.log(this.resizeX, this.resizeY)\n      document.addEventListener('mousemove', this.mouseMoveHandler); \n      document.addEventListener('mouseup', this.mouseUpHandler); \n      this.resizingStatus = true\n      \n    }, \n\n    // Handler for moving mouse to resize \n    mouseMoveHandler(e){\n      const dx = e.clientX - this.resizeX; \n      const dy = e.clientY - this.resizeY; \n      this.width = this.resizeWidth + dx;\n      this.height = this.resizeHeight + dy;\n      \n    }, \n\n    // Handler for mouse up and remove the EventListener\n    mouseUpHandler(e){\n      this.resizeWidth = this.width; \n      this.resizeHeight = this.height; \n      document.removeEventListener('mousemove', this.mouseMoveHandler); \n      document.removeEventListener('mouseup', this.mouseUpHandler)\n      this.resizingStatus = false\n      // this.$store.dispatch('changeResizerStatus', false)\n    },\n\n    rightClickMenuShow(e){\n      e.preventDefault();\n      this.showRightClickMenu = true;\n      this.rightMenuX = e.clientX;\n      this.rightMenuY = e.clientY;\n    }, \n\n    draw(){\n      if(!this.itemProps.vis_tsne){\n        alert('No vis data but still triggered! check GLobalViewComp.vue')\n      }\n\n      \n      let tip = d3tip()\n            .attr('class', 'd3-tip')\n            .offset([-10, 0])\n            .html(function(d) {\n              return \"<strong>Title: </strong><span class='details'>\" + d.title + \"<br></span>\";\n            })\n\n      let visData = this.itemProps.vis_tsne.tsne.data; \n      let visArea = this.itemProps.vis_tsne.tsne.area;\n      \n      console.log('print vis data');\n      console.log(visData);\n\n      console.log('print vis area');\n      console.log(visArea);\n      const canvasContainer = d3.select(`.globalview-canvas-${this.itemProps.id}`);\n      const canvasGroup = canvasContainer.selectAll('g').data([0]);\n      const canvasEnter = canvasGroup.enter().append('g')\n\n      const canvas = canvasGroup.merge(canvasEnter);\n\n      const classColors = this.colors;\n      const areaLine = d3.line()\n        .x(d => d[0])\n        .y(d => d[1])\n        .curve(d3.curveCatmullRomClosed);\n      console.log(classColors);\n\n\n      const width = this.width\n      const height = this.height\n      const xScale = d3.scaleLinear()\n                      .domain(d3.extent(visData, d=>d.embedding[0]))\n                      .range([0, width])\n      \n      const yScale = d3.scaleLinear()\n                      .domain(d3.extent(visData, d=>d.embedding[1]))\n                      .range([0, height])\n\n\n      // for(let i in Object.keys(visArea)){\n      //   if(i==1 || i == 17){\n      //     let queryId = visArea[i];\n          \n      //     canvas.append(\"path\")\n      //     .attr(\"fill\", classColors[i % classColors.length])\n      //     .attr(\"stroke\", \"steelblue\")\n      //     .attr(\"stroke-width\", 3)\n      //     .attr(\"opacity\", 0.2)\n      //     .attr(\"d\", areaLine(hull(visArea[`q_${i}`].map(d=>[xScale(d[0]), xScale(d[1])]))));\n      //   }\n        \n      // }\n\n\n      const h = canvas.append(\"path\").attr(\"class\", \"polyhull-01\").style(\"stroke\", \"gray\").style(\"stroke-width\",\"3px\").style(\"fill-opacity\", \"0.3\").style(\"fill\", \"lightblue\");\n      const circleGroup = canvas.selectAll('circle').data(visData); //\n      const circleGroupEnter = circleGroup.enter().append('circle')\n     \n      circleGroupEnter.merge(circleGroup)\n        .attr('cx', d=>xScale(d.embedding[0]))\n        .attr('cy', d=>yScale(d.embedding[1]))\n        .attr('r', d=>{\n          return 1\n        })\n        .attr('fill', d=>{\n          // if(d['q_1']){\n          //   return classColors[5]\n          // }\n          // if(d['q_17']){\n          //   return classColors[6]\n          // }\n          return 'steelblue'\n        })\n        .on('mouseover', function(d){\n          tip.show(d);\n          d3.select(this)\n            .attr('r', 1.5)\n            .style('stroke', 'black')\n            \n        })\n        .on('mouseout', function(d){\n          tip.hide(d);\n          d3.select(this)\n            .attr('r', 1)\n            .style('stroke', null)\n            \n        })\n\n      \n      \n\n      function zoomed() {\n        console.log(111);\n        const {transform} = d3.event;\n        canvas.attr(\"transform\", transform);\n      }\n\n\n      canvasContainer.on('dblclick', ()=>{\n        console.log(111)\n        canvasContainer.call(d3.zoom()\n          .extent([[0, 0], [width, height]])\n          .scaleExtent([1, 8])\n          .on(\"zoom\", zoomed));\n\n        canvasContainer.style('border', '1px solid red')\n      })\n\n      canvasContainer.on('mouseleave', ()=>{\n        console.log('mouseout');\n        console.log(canvasContainer)\n        canvasContainer.on('.zoom', null);\n        canvasContainer.style('border', null)\n      })\n      // canvasContainer.call(d3.zoom()\n      //   .extent([[0, 0], [width, height]])\n      //   .scaleExtent([1, 8])\n      //   .on(\"zoom\", zoomed));\n\n      canvasContainer.call(tip);\n\n      const pointsTemp = visData.slice(1000, 1010); \n      // console.log(\"Check Here!\");\n      // console.log(pointsTemp);\n      const hullCurve = hull(pointsTemp.map(obj => [xScale(obj.embedding[0]), yScale(obj.embedding[1])])); \n      h.attr(\"d\", `M${hullCurve.join(\"L\")}Z`)\n\n      function hull(points) {\n        // No sense in rendering a hull for fewer than two points\n        if (points.length < 2) return;\n\n        // polygonHull seems to require a minimum of three points, but works\n        // just fine if two of the points are identical, so we can patch over\n        // the problem of a two point cluster by duplicating the first point.\n        if (points.length < 3) return d3.polygonHull([points[0], ...points]);\n\n        return d3.polygonHull(points);\n      }\n\n    },\n\n\n    \n\n  },\n\n  created(){\n    // Initialize initial position\n    this.marginTop = this.topMargin - this.height/2; \n    this.marginLeft = this.leftMargin - this.width/2;\n\n    // Initialize resizeWidth and resizeHeight\n    this.resizeWidth = this.width;\n    this.resizeHeight = this.height; \n  },\n\n  computed:{\n    ...mapState(['drawLink','resizer']),\n    draggable(){\n      return !(this.drawLink || this.resizingStatus);\n    }\n  },\n\n  components: {\n    RightClickMenu,\n    InoutputBtns\n  },\n\n  watch: {\n    'itemProps.inputData': function(newVal, oldVal){\n      if(newVal){\n        this.loadingStatus = true\n        this.dataStatus = true // means loading\n        console.log('globalView component triggered newVal')\n        console.log(newVal);\n      }else{\n        this.loadingStatus = false\n        this.dataStatus = false\n      }\n    }, \n\n    'itemProps.vis_tsne': function(newVal, oldVal){\n      console.log('visData newVal, oldVal'); //\n      console.log(newVal); //\n      console.log(oldVal);\n      if(newVal && newVal.tsne){\n        this.loadingStatus = false\n        this.dataStatus = true // no longer loading\n        console.log('here')\n        console.log(this.dataStatus);\n        this.draw();\n      }else{\n        this.loadingStatus = false\n        this.dataStatus = false;\n      }\n    },\n\n    width: function (){\n      if(this.itemProps.vis_tsne){\n        this.draw()\n      }\n      \n    }, \n\n    height: function(){\n      if(this.itemProps.vis_tsne){\n        this.draw()\n      }\n    }\n  }\n}\n</script>\n\n<style scoped> \n  .card-name{\n    text-align: center;\n    display: flex; \n    align-items: center;\n    justify-content: center;\n    flex-wrap: wrap;\n    height: 100%;\n  }\n\n  /* .card-actions{\n    position: absolute;\n    transform: translate(300px, -150px);\n    padding: 0;\n  } */\n\n  .resizer{\n    position: absolute;\n  }\n\n  .resizer-r {\n    cursor: col-resize;\n    height: 100%;\n    right: 0;\n    top: 0;\n    width: 5px;\n  }\n\n  /* Placed at the bottom side */\n  .resizer-b {\n    bottom: 0;\n    cursor: row-resize;\n    height: 5px;\n    left: 0;\n    width: 100%;\n  }\n</style>"]}]}